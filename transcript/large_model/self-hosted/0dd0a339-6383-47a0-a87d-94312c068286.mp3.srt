1
00:00:00,000 --> 00:00:06,480
episode 42 the title can mean only one thing yes it is a hitchhiker's guide to the galaxy reference

2
00:00:06,480 --> 00:00:09,520
oh and i didn't bring my towel oh well don't panic

3
00:00:12,000 --> 00:00:16,800
chris in the badger mornings all right let's go let's go let's get up or whatever you happen

4
00:00:16,800 --> 00:00:22,160
to listen to it i guess on self-hosted dot show oh we're bringing that back are we okay cool

5
00:00:23,360 --> 00:00:28,240
i'm going in with this i love this we are the week i think you and i would have a great a.m

6
00:00:28,240 --> 00:00:33,600
morning show we need to lean into that a bit more yeah we do we'd be doing the traffic on the 15s

7
00:00:33,600 --> 00:00:39,600
and uh we'd also be taking people's tech questions and uh discussing the news of the day and we'd

8
00:00:39,600 --> 00:00:44,720
have a movie review segment and a tv review segment i know you're going to give us a uh

9
00:00:44,720 --> 00:00:52,960
surprise tv review later in the show yeah i might have interrupted an interview with

10
00:00:52,960 --> 00:01:00,000
an impromptu movie review yes it just makes me laugh i love it alex but you know i think

11
00:01:00,000 --> 00:01:05,440
we'd have a great morning show and we'd have our friends on right like we'd call alan on and we'd

12
00:01:05,440 --> 00:01:10,880
give him a hard time about freebsd that'd be pretty great yes that would be rather awkward

13
00:01:10,880 --> 00:01:15,280
at the moment wouldn't it yeah yeah we'd ask him if he's got wire guard set up so that way we could

14
00:01:15,280 --> 00:01:21,760
do we could do it over at wire guard uh we should put a link in the show notes so people don't know

15
00:01:21,760 --> 00:01:27,120
what we're talking about oh yeah quick too long didn't read wire guard nearly got merged into the

16
00:01:27,120 --> 00:01:32,160
bsd kernel and the code was of questionable quality so if you have any questions about that

17
00:01:32,160 --> 00:01:37,280
there is a link in the show notes to jim salter's ars technica breakdown of this you will probably

18
00:01:37,280 --> 00:01:44,720
come away rather salty with bsd just full warning so um yeah enjoy that but in the meantime i want

19
00:01:44,720 --> 00:01:50,240
to say thanks to a cloud guru for sponsoring this here episode they are the learning in cloud linux

20
00:01:50,240 --> 00:01:54,960
and other modern tech skills hundreds of courses and thousands of hands-on labs get certified get

21
00:01:54,960 --> 00:02:01,200
hired get learning at a cloud guru dot com but speaking of that post over at ars technica you

22
00:02:01,200 --> 00:02:08,400
also had a new post over at ars technica and this is a brilliant one how to achieve smart home

23
00:02:08,400 --> 00:02:14,640
nirvana or home automation without a subscription also very clever were you stuck between two titles

24
00:02:14,640 --> 00:02:20,560
alex and congratulations also on your first post at ars technica thank you yes that was rather a

25
00:02:20,560 --> 00:02:25,760
life box ticked last week it was a war of two titles wasn't it it was actually i was working

26
00:02:25,760 --> 00:02:30,960
with their editors and they had about six titles to choose from so we ended up picking two halves

27
00:02:30,960 --> 00:02:34,720
of two different titles that didn't belong together and then kind of like munging them

28
00:02:34,720 --> 00:02:39,360
together wow could you imagine having people like help us come up with titles like you and i like

29
00:02:39,360 --> 00:02:43,120
have to like call each other up after the show and be like what are we going to call this one

30
00:02:43,120 --> 00:02:47,840
we completely forget we walk away and don't even title the show we do yeah all the time

31
00:02:49,680 --> 00:02:54,960
hey so did you see in the news this week that nvidia have finally seen sense and unlocked their

32
00:02:54,960 --> 00:03:00,080
gpu drivers for pass-through i did see this in the news i didn't go too far into it because i

33
00:03:00,080 --> 00:03:06,080
figured i'd pick your brain this must be a shot in the arm for virtualization i'd say so yeah

34
00:03:06,080 --> 00:03:11,680
to recap you know the high level of why this is a big deal nvidia previously locked down their

35
00:03:11,680 --> 00:03:20,080
consumer graphics cards from being air quotes supported are on gpu pass-through so they would

36
00:03:20,080 --> 00:03:26,640
show an error code 43 an infamous error code 43 in the windows device manager rather than loading

37
00:03:26,640 --> 00:03:31,440
and just working as normal so what you would have to do is hide the fact that the vm was running as

38
00:03:31,440 --> 00:03:38,640
a vm from the vm which has some minor performance implications uh only only minor and but what this

39
00:03:38,640 --> 00:03:43,680
does from from nvidia is it basically says yeah okay guys cool go ahead and take our consumer

40
00:03:43,680 --> 00:03:49,440
level graphics cards pass them through to you know guests and do gaming and what have you and

41
00:03:49,440 --> 00:03:53,520
you know go nuts i don't even know if i have a rig to try this on these days alex have you

42
00:03:53,520 --> 00:03:58,160
had a chance to try this i don't actually run pass-through very much these days uh i ended up

43
00:03:59,120 --> 00:04:05,440
basically giving up because you you and i talked about this a long time ago on linux unplug 308

44
00:04:05,440 --> 00:04:10,320
and we talked about all the different rigmarole that surrounds pci pass-through and all of that

45
00:04:10,320 --> 00:04:15,520
still applies even with this nvidia news all of that still applies um so you're going to need a

46
00:04:15,520 --> 00:04:19,840
way of switching your monitor inputs of switching your keyboard and mouse inputs and all that kind

47
00:04:19,840 --> 00:04:26,320
of stuff and i have 144 hertz gaming monitor in front of me here and trying to find a kvm switch

48
00:04:26,320 --> 00:04:32,160
that can support that and thunderbolt from my macbook pro it it just it's just a pain in the

49
00:04:32,160 --> 00:04:37,920
bum so i ended up uh just dual booting these days you know i when i want to do some windows

50
00:04:37,920 --> 00:04:44,080
stuff i reboot and when i want to do some linux stuff i reboot and it's it's it's fine it's a bit

51
00:04:44,080 --> 00:04:48,160
of a pain but it's fine so yeah there is a line where you have to go how much is it worth

52
00:04:48,160 --> 00:04:54,160
virtualizing versus just dual booting i i totally get that that's a line i don't really often cross

53
00:04:54,160 --> 00:04:59,440
like i'm legitimately at a loss of of even i don't know why i'd install windows right now i don't

54
00:04:59,440 --> 00:05:05,040
think i've i don't think i've installed windows i definitely haven't installed it in 2021 and i

55
00:05:05,040 --> 00:05:11,840
don't know if i installed it i must have at least installed it once in 2020 but maybe that was it

56
00:05:11,840 --> 00:05:17,040
i really have over the years just sort of i'm not this is not a brag i just it's because i have in

57
00:05:17,040 --> 00:05:21,280
other places used max for special tools that other people probably would have used a windows box so

58
00:05:21,280 --> 00:05:26,640
it's not like i have some superpower but it's just i have over the times just kind of migrated

59
00:05:26,640 --> 00:05:32,800
completely away from windows yeah the only things i really use it for is fusion 360 so 3d modeling

60
00:05:32,800 --> 00:05:37,360
for my my printing stuff which i can also do on the mac as well so i don't really need windows

61
00:05:37,360 --> 00:05:43,440
there i use it for blue iris as we often talk about on a separate system i could see that

62
00:05:43,440 --> 00:05:49,040
in terms of the desktop yeah i mean vs code takes care of a lot of my coding stuff wsl

63
00:05:50,000 --> 00:05:55,280
2 takes care of a lot of the ssh type stuff and the new windows terminal is actually quite nice

64
00:05:55,280 --> 00:06:00,560
so i mean i spend a lot more time in windows than i think i admit to myself these days even though

65
00:06:00,560 --> 00:06:04,800
it doesn't really feel like windows anymore because they've basically shoehorned linux onto

66
00:06:04,800 --> 00:06:10,480
the side of it okay i feel like there's also an elephant in the room this week you and i have

67
00:06:11,200 --> 00:06:17,520
talked about ubiquity gear a bit on this show and they have been in the news in a bad way some

68
00:06:17,520 --> 00:06:25,920
serious security potential leaks i guess according to someone that brian krebs spoke to on his blog

69
00:06:25,920 --> 00:06:31,680
he writes that a cyber criminal gained administrative access to ubiquity's aws databases via stolen

70
00:06:31,680 --> 00:06:36,640
credentials uh perhaps like an employee's last pass account it looks like and then got root

71
00:06:36,640 --> 00:06:43,040
admin access that's what they say to the aws accounts s3 buckets application logs secrets

72
00:06:43,040 --> 00:06:50,160
for single sign-on cookies all databases including databases that include user credentials

73
00:06:51,520 --> 00:06:56,960
there's even according to some people who've come forward supposedly been backdoor software that

74
00:06:56,960 --> 00:07:02,960
they found that ubiquity it staff found um that the the situation is so serious that certain people

75
00:07:02,960 --> 00:07:08,400
have been fired there's there's a lot going on and i'm wondering how you feel somebody who's

76
00:07:08,400 --> 00:07:13,040
i think running a fair amount of their gear i certainly am yeah i have three access points

77
00:07:13,040 --> 00:07:18,560
in this house i have uh half a dozen that i manage in england for my family across two or three

78
00:07:18,560 --> 00:07:24,720
different you know houses and you know that from that perspective having a centralized controller

79
00:07:24,720 --> 00:07:32,160
where all of these devices talk back to that runs on linode is is for me very convenient and so far

80
00:07:32,160 --> 00:07:37,120
as i understand it anyway there is no risk to people who self-host the unify controller

81
00:07:37,120 --> 00:07:41,760
right if however you're running one of their cloud keys or a dream machine or something that requires

82
00:07:41,760 --> 00:07:48,400
you to authenticate with their cloud you may well want to change some passwords and possibly even

83
00:07:48,400 --> 00:07:55,120
consider you know not using ubiquity stuff in that manner anymore because you know the manner of the

84
00:07:55,120 --> 00:08:02,720
breach was that an employee's aws s3 bucket key was compromised so yeah we have to assume that

85
00:08:02,720 --> 00:08:08,240
the attackers got access to everything stored passwords i mean they won't may well be hashed

86
00:08:08,240 --> 00:08:15,440
and salted but we can break passwords with enough compute you know um application logs databases

87
00:08:16,000 --> 00:08:22,800
uh database credentials all of that stuff that's in there even just ip ip records it's all bad it's

88
00:08:22,800 --> 00:08:28,320
all really bad alex and that's kind of where i was going with this is i quietly for the last couple

89
00:08:28,320 --> 00:08:35,440
of years have been progressively more and more disappointed with ubiquity while my friends like

90
00:08:35,440 --> 00:08:40,240
you and others around me have seemed pretty solid with them i've been wondering if things haven't

91
00:08:40,240 --> 00:08:45,200
been getting a little sour i don't feel like their latest batch of products have been that solid

92
00:08:45,920 --> 00:08:50,320
i have not liked some of their answers around the controller limitations uh and some of their

93
00:08:50,320 --> 00:08:55,920
solutions and it just seemed like a power grab in some circumstances and it seems like this is an

94
00:08:55,920 --> 00:09:02,080
indication that not all is well in hq the qa has for sure been declining you know there's been

95
00:09:02,080 --> 00:09:06,960
several firmware upgrades for the actual ap's themselves as well as the controller software

96
00:09:06,960 --> 00:09:12,800
that have nuked people's databases and history and stuff like that so i wonder if maybe just some

97
00:09:12,800 --> 00:09:17,440
original people left the company a while ago and it's been in decline or if their prioritization

98
00:09:17,440 --> 00:09:22,400
has changed but where do you go to like what what do you change to well i actually asked jim on

99
00:09:22,400 --> 00:09:27,760
twitter what he thought and he's been recommending there's a bunch of tp link devices and uh tom

100
00:09:27,760 --> 00:09:32,640
from lawrence systems just got a bunch in to review on youtube so if you're interested in some

101
00:09:32,640 --> 00:09:37,200
ubiquity alternatives they are out there but i'll tell you what worries me the most about this

102
00:09:37,200 --> 00:09:42,320
breach it's not necessarily that it happened because unfortunately these things are going to

103
00:09:42,320 --> 00:09:50,560
happen at some point to every company what matters more is how a company responds and ubiquity is

104
00:09:50,560 --> 00:09:57,520
and ubiquity tried to basically cover this up they didn't deny i suppose is more accurate they

105
00:09:57,520 --> 00:10:04,800
didn't deny these claims and it took them several days more than a week to admit responsibility and

106
00:10:05,440 --> 00:10:11,840
basically inform their user base that some of their stuff might be boned yeah and on top of

107
00:10:11,840 --> 00:10:16,800
that it seems like it's taken some insiders to come out and leak information to well-known people

108
00:10:16,800 --> 00:10:21,920
like krebs to get the complete picture which is disappointing yeah i think i think you just hit

109
00:10:21,920 --> 00:10:26,640
the nail on the head there is disappointing i mean ubiquity made their name through

110
00:10:27,840 --> 00:10:34,720
basically making people realize how crappy consumer grade gear is and uh you know they're

111
00:10:34,720 --> 00:10:41,360
providing cisco grade ideas and hardware for consumer sort of grade prices but with these

112
00:10:41,360 --> 00:10:47,200
kinds of breaches and and behavior as a company i'm i'm struggling i mean the access point that

113
00:10:47,200 --> 00:10:53,280
i'm looking at behind my monitor here i first installed into a house that i lived three houses

114
00:10:53,280 --> 00:10:59,440
ago uh six six seven years ago and it's it's not mr b it still works perfectly it's had all the

115
00:10:59,440 --> 00:11:03,760
firmware updates and that kind of stuff but there was that one issue with the controller a few months

116
00:11:03,760 --> 00:11:09,280
ago where i ended up having to completely rebuild my unify controller because of poor software qa

117
00:11:09,280 --> 00:11:14,240
it's critical infrastructure in my house okay it's not a hotel it's not a commercial setting

118
00:11:14,240 --> 00:11:19,040
where a lot of people do deploy unify gear into but if it happens to me it's going to happen to

119
00:11:19,040 --> 00:11:24,560
those people as well and it only takes one or two or three incidents before your your brand name is

120
00:11:24,560 --> 00:11:30,960
completely trashed and people are already talking about just going back to consumer grade stuff like

121
00:11:30,960 --> 00:11:37,760
mesh networks like aero and you know all these other you know not as technically accomplished

122
00:11:37,760 --> 00:11:43,920
solutions that have you know poe backhaul and stuff like that in favor of something that is

123
00:11:43,920 --> 00:11:49,920
possibly even more leaky because it requires more cloud connectivity i don't know uh what's

124
00:11:49,920 --> 00:11:54,640
the solution i'm probably just going to wait and see how this turns out for the next six months

125
00:11:54,640 --> 00:12:00,240
but my next ap will probably not be a unify one wouldn't it be something if the community stepped

126
00:12:00,240 --> 00:12:06,640
forward and built something that we could flash again mesh networks be amazing oh it'd be cool i

127
00:12:06,640 --> 00:12:12,400
tell you what if somehow we could open these devices up these unify devices we all already

128
00:12:12,400 --> 00:12:19,280
have and then put like a tasmota style completely divorcing ourselves of unify of ubiquity sorry

129
00:12:20,240 --> 00:12:24,720
you know own the hardware i keep banging on about this don't i but own the hardware it's

130
00:12:24,720 --> 00:12:28,960
not dependent on a cloud service then it does seem like that is exactly what we need it's

131
00:12:28,960 --> 00:12:35,280
something we could reflash and load a common os on that has a common set of standards and interfaces

132
00:12:35,280 --> 00:12:40,480
and a web ui like you used to do with the old linksys routers you know those things are still

133
00:12:40,480 --> 00:12:45,680
being sold today those old linksys routers open wrt yeah we just need a newer version of that

134
00:12:45,680 --> 00:12:50,960
something more powerful with different hardware options essentially like the ubiquity options

135
00:12:50,960 --> 00:12:57,040
because you're right it's you need something that for folks that want to run poe and and then you

136
00:12:57,040 --> 00:13:01,760
know plug a plug a ap at the end of a barn somewhere at the end of a building somewhere

137
00:13:01,760 --> 00:13:05,920
and they can only run one cable like you got to have something for that solution i think your

138
00:13:05,920 --> 00:13:09,840
use case too where you've got several buildings and you want to manage all of the ap's with one

139
00:13:09,840 --> 00:13:17,600
interface is also totally legitimate and extremely common it's so useful when my dad rings me up and

140
00:13:17,600 --> 00:13:22,240
he's like oh my wi-fi is not working in the bedroom i can go in and see the ap has dropped

141
00:13:22,240 --> 00:13:27,120
from gigabit down to megabit for example and i can oh we just need to reboot the the ap and

142
00:13:27,120 --> 00:13:30,720
and we're good to go but there's a way to do that alex you know and get that central

143
00:13:30,720 --> 00:13:34,640
dashboard i know you don't use it much but uh something we should talk about at some point on

144
00:13:34,640 --> 00:13:39,680
the show i maybe is cockpit one of the things i appreciate about cockpit is they have come up with

145
00:13:39,680 --> 00:13:46,560
a way to allow you to manage multiple servers you go you can go to one ui though log into one one

146
00:13:46,560 --> 00:13:51,360
web server and you can you can select all your servers and manage them and it has to be set up

147
00:13:51,360 --> 00:13:54,640
in a special way and there's some security precautions you have to take but it's it's a

148
00:13:54,640 --> 00:13:59,440
very secure setup and so maybe something like that could be done i don't know maybe somebody

149
00:13:59,440 --> 00:14:06,080
out there in the community knows maybe so i found out this week that a device i purchased nearly two

150
00:14:06,080 --> 00:14:13,040
years ago on some black friday sale you know i i bought it thinking oh yeah this is this is going

151
00:14:13,040 --> 00:14:18,640
to solve all my problems with my fans because um quite often when you buy a server grade motherboard

152
00:14:18,640 --> 00:14:25,360
the fan control headers are designed for server grade fans which spin at crazy high rpms and draw

153
00:14:25,360 --> 00:14:30,800
crazy amounts of of current and stuff like that and so when you put a consumer grade fan on one

154
00:14:30,800 --> 00:14:34,960
of these motherboards it kind of goes uh ramps up and then ramps down and ramps up and ramps down

155
00:14:34,960 --> 00:14:39,760
because it's not getting enough of a signal to think it's got enough rpms anyway it's this whole

156
00:14:39,760 --> 00:14:45,120
thing so i bought this device called the corsair commander pro plugs into a usb header on the

157
00:14:45,120 --> 00:14:52,160
motherboard controls led lighting it controls um fans and uh has some temperature probes attached

158
00:14:52,160 --> 00:14:59,520
to it but the downside was this device was windows only to my surprise and absolute delight six

159
00:14:59,520 --> 00:15:04,800
months ago this device has been added to the linux kernel there's been a driver added to the

160
00:15:04,800 --> 00:15:12,400
linux kernel so you can now natively control fans via a usb header on linux i love it when that

161
00:15:12,400 --> 00:15:17,120
happens yeah and you're always surprised like my little thing the little thing that i care about

162
00:15:17,120 --> 00:15:22,000
that's coming that's always the best feeling so i wrote a small blog post about it it doesn't

163
00:15:22,000 --> 00:15:30,400
require an awful lot of elbow grease to get set up but you do need to have the 5.9 or later kernel

164
00:15:31,040 --> 00:15:34,400
and then you need to make sure you've got lm sensors installed and then there's a couple

165
00:15:34,400 --> 00:15:38,160
of other instructions in the blog post about how you configure the pwm profiles

166
00:15:38,720 --> 00:15:43,200
and then once you've done that you just enable the fan control service i mean i'm using a very

167
00:15:43,200 --> 00:15:50,560
tiny tiny little archvm on my esxi host it's i think it's using 256 megs of ram for example

168
00:15:50,560 --> 00:15:55,360
and four gigabytes of disk perfect use case for arch because i don't want anything else

169
00:15:55,360 --> 00:16:03,120
and i want a modern kernel and and that's exactly what arch gives me there lino.com slash ssh go

170
00:16:03,120 --> 00:16:08,320
there to get 100 and 68 credit towards a new account and of course you support the show 100

171
00:16:09,280 --> 00:16:14,640
and that's a lot you can really try out linode and you support the self-hosted podcast that's

172
00:16:14,640 --> 00:16:19,280
like a win-win for everybody linode is our cloud server provider when we're building or

173
00:16:19,280 --> 00:16:23,840
any any kind of testing that we're doing we do it on linode and because the price is so great

174
00:16:23,840 --> 00:16:28,400
it makes it possible for a small team to have killer infrastructure that's one of the things

175
00:16:28,400 --> 00:16:35,840
that i feel like is our secret sauce here at jb is we we can have access to infrastructure that is

176
00:16:35,840 --> 00:16:41,360
crazy fast 11 data centers around the world really fast network connections really fast machines

177
00:16:41,360 --> 00:16:47,200
their dedicated cpu rigs have those amd epic cpus in them and they have been independently

178
00:16:47,200 --> 00:16:52,080
verified as some of the fastest cpus in cloud computing but one of the things i think that's

179
00:16:52,080 --> 00:16:56,800
great about them is when i'm building or testing something they have a ton of distributions to

180
00:16:56,800 --> 00:17:01,040
choose from basically all the distributions you'd want to deploy and even some i'm not sure you'd

181
00:17:01,040 --> 00:17:06,800
want to deploy in production arch but are there and i extremely appreciate that but what i what

182
00:17:06,800 --> 00:17:11,440
i really get about linode is their love for linux that's what got them into this that's why they

183
00:17:11,440 --> 00:17:17,760
started in 2003 is because they were in love with the technology itself they saw where it was going

184
00:17:17,760 --> 00:17:22,880
what virtualization was going to bring to the market and so they got in before aws or anyone

185
00:17:22,880 --> 00:17:30,720
else they started so long ago and yet they don't do like a million things they're not like a bookstore

186
00:17:30,720 --> 00:17:37,600
and a movie platform they really just focus on doing the absolute best cloud computing possible

187
00:17:37,600 --> 00:17:42,000
and they're independently owned even today and they're dedicated to offering the best virtualized

188
00:17:42,000 --> 00:17:47,600
cloud computing if it runs on linux it runs on linode also check a link on our show notes we'll

189
00:17:47,600 --> 00:17:53,120
have a link to their top docs talk that's right top docs talk and they have one about the benefits

190
00:17:53,120 --> 00:17:58,320
of using infrastructure as code and you know that's something we're big fans of so check in

191
00:17:58,320 --> 00:18:05,200
the notes for that linode.com slash ssh go there support the show get 100 in 60 day credit and of

192
00:18:05,200 --> 00:18:13,440
course check out all the features of linode linode.com slash ssh well a few weeks ago i

193
00:18:13,440 --> 00:18:19,760
promised something along the lines of a self-hosted community deep dive you know every so often we're

194
00:18:19,760 --> 00:18:23,760
going to have somebody from the self-hosted community come on and chat with us and sort of

195
00:18:23,760 --> 00:18:30,560
talk about the apps they run why they run them you know what they what they wish that they set up did

196
00:18:30,560 --> 00:18:35,280
that it doesn't currently do and a lot of hopefully discussions about why they made some of

197
00:18:35,280 --> 00:18:40,400
the decisions that they made hopefully it'll be an interesting portal into some of our community

198
00:18:40,400 --> 00:18:47,040
members for you and the first volunteer or the first glutton for punishment is the orange one

199
00:18:47,040 --> 00:18:51,840
from our discord server hey jake how you doing hi yeah i think i feel like maybe the correct term

200
00:18:51,840 --> 00:18:58,960
for this is victim um yes yes yes but yeah no it's it's great it's great to be here it's

201
00:18:58,960 --> 00:19:02,640
it's gonna be good well it's been interesting trying to schedule three different people in

202
00:19:02,640 --> 00:19:07,520
three different time zones so thank you for joining us at i think what is 10 30 p.m uk time

203
00:19:08,160 --> 00:19:13,840
yeah it's 10 30 i've got to be up in nine hours for another seven and a half hours of work that

204
00:19:13,840 --> 00:19:20,240
used to be your life alex yeah pre-dad life huh sleep is a distant memory all right so why don't

205
00:19:20,240 --> 00:19:25,360
we dive in with the first question then and let's talk a little bit about your hardware setup so

206
00:19:25,360 --> 00:19:29,920
specifically talking about the stuff you have at home and things like that talk us through some of

207
00:19:29,920 --> 00:19:36,400
the stuff you've got there most of my setup is at at home the sort of self-hosting life is very much

208
00:19:36,400 --> 00:19:44,400
i run everything on on my lan sort of as normal um most of my setup is a single uh single machine

209
00:19:44,400 --> 00:19:53,360
because running things over the network is a bit a bit funky my main rig is a ryzen uh 3000 series

210
00:19:53,360 --> 00:20:00,560
3700x is the sort of beating heart of it yeah various other parts it runs proxmox because

211
00:20:01,360 --> 00:20:06,240
virtual machines are great do you use vms for a lot of stuff because i know you're into sort of

212
00:20:06,240 --> 00:20:12,400
the one big vm we often have this discussion on discord about the one big vm versus lots of smaller

213
00:20:12,400 --> 00:20:17,760
like lxc containers and docker containers and things like that what's uh what's your philosophy

214
00:20:17,760 --> 00:20:23,280
on that if i'm running a hypervisor with vms i'd rather not do that i'd rather have sort of

215
00:20:24,080 --> 00:20:30,400
everything nicely containerized to fully uh take advantage of vms in their sort of

216
00:20:31,120 --> 00:20:38,560
natural habitat of what they're good for so i think my setup is currently six vms or so spread

217
00:20:38,560 --> 00:20:45,440
most of the different uses there is still one single lxc container which runs docker which has

218
00:20:45,440 --> 00:20:52,720
most of my docker applications in there's probably 10 or so containers running under that besides

219
00:20:52,720 --> 00:21:00,000
that i've got a separate one for um my monitoring applications that would be prometheus again your

220
00:21:00,000 --> 00:21:08,400
advice grafana i've got a separate vm for home assistant which runs home assistant os couple

221
00:21:08,400 --> 00:21:14,720
other ones one which deals with uh ingress coming into my house which is an interesting setup

222
00:21:14,720 --> 00:21:21,040
because i'm sure we'll touch on later and yeah various other little things the other place i've

223
00:21:21,040 --> 00:21:29,360
diverted away from what you've previously done is i've also moved the storage out of the one

224
00:21:29,360 --> 00:21:34,560
big vm and so storage is handled directly on the host why is that then the main reason for that is

225
00:21:34,560 --> 00:21:42,320
i tried running true nas in a vm and it it installed great it i could access all my files

226
00:21:42,320 --> 00:21:50,240
the issue was that performance was horrible absolutely horrible um i just got latency spikes

227
00:21:50,240 --> 00:21:58,320
everywhere next cloud ground to halt uh sq lite over nfs is a really really bad time i don't

228
00:21:58,320 --> 00:22:02,960
recommend it to anyone so talk us through that a little bit more than you know uh performance was

229
00:22:02,960 --> 00:22:09,120
was bad were you passing through a disk controller to that vm or or what were you doing so from some

230
00:22:09,120 --> 00:22:14,880
advice i got from i'm sorry i can't remember who it was on the self-hosted discord uh suggested

231
00:22:14,880 --> 00:22:24,400
using uh an lsi xba that xba i then passed in through regular pci pass through into true nas

232
00:22:25,200 --> 00:22:34,720
from there uh regular mounted a very small two drive zfs pool exposed via true nas's built-in

233
00:22:34,720 --> 00:22:43,440
nfs sharing which was super easy to do which is great mounted that as normal through etsy fs tab

234
00:22:43,440 --> 00:22:49,120
and then from there just pointing my docker containers at it as if it was a directory

235
00:22:49,920 --> 00:22:55,760
in that container thing because it was running entirely over the internal network inside the

236
00:22:55,760 --> 00:23:03,280
machine latency wise it was absolutely tiny you're talking like fractions of milliseconds but for

237
00:23:03,280 --> 00:23:08,320
some unknown reason it didn't like it now that might be because i went a little bit insane and

238
00:23:08,320 --> 00:23:15,440
decided to run true nas scale rather than true nas directly so this may be a performance regression

239
00:23:15,440 --> 00:23:22,400
with true nas scale because at the time i ran it was in alpha and we know full well don't run alpha

240
00:23:22,400 --> 00:23:29,680
software but i did anyway just to try it is scale the bsd one and core is is the linux one or is it

241
00:23:29,680 --> 00:23:34,560
the way around i can never remember other way around so scale is the linuxy one which at the

242
00:23:34,560 --> 00:23:43,040
time was in alpha so i tried it it didn't work great yes i have some thoughts on bsd this week

243
00:23:43,040 --> 00:23:50,480
after the whole wire guard kernel merge thing but let's let's not derail your yeah that that's not

244
00:23:50,480 --> 00:23:57,680
a fun discussion it's all embarrassing after i tried scale out it it didn't work too well for

245
00:23:57,680 --> 00:24:05,280
me and i didn't want to try uh porting over to the actual core version of true nas because

246
00:24:06,160 --> 00:24:11,760
keeping going with that process it meant i had to deal with issues where that one storage vm as it

247
00:24:11,760 --> 00:24:18,480
were would have to stay up and alive sort of all the time and if i needed to reboot that machine

248
00:24:18,480 --> 00:24:25,280
that vm even i would have to reboot sort of everything in the entire machine which felt a bit

249
00:24:25,280 --> 00:24:31,840
like a faff and eventually i concluded well if i want high performance i want things to be easy

250
00:24:31,840 --> 00:24:39,200
then if i move the storage on to the actual host hypervisor under proxmox proxmox has built-in

251
00:24:39,200 --> 00:24:46,640
support for zfs because the os is on zfs so just works it means latency is nice and low and because

252
00:24:46,640 --> 00:24:53,280
the majority of my applications live in lxc there's the nice benefit of rather than using

253
00:24:53,280 --> 00:25:00,480
nfs to mount all of my data i can use bind mounts and bind mounts are you have no network latency

254
00:25:00,480 --> 00:25:05,840
because it's just passing directories into containers in much the same way that you give

255
00:25:05,840 --> 00:25:12,640
bind mounts to docker containers there's no extra latency extra overhead extra complexity

256
00:25:13,360 --> 00:25:18,560
around that it just works so sounds like a lot of a lot of different application uses and it

257
00:25:18,560 --> 00:25:24,880
sounds like you have a pretty distinct line between what is a container and what should be a vm when

258
00:25:24,880 --> 00:25:29,680
i see complexity like this i start to wonder like what's your backup strategy looking like

259
00:25:29,680 --> 00:25:38,400
my backup strategy at the moment is on that one docker lxc there is a single instance of duplicati

260
00:25:38,400 --> 00:25:46,160
which backs up because eat that lxc specifically has access to my entire zfs pool i can just take

261
00:25:46,160 --> 00:25:53,680
the entire pool compress it up with duplicati and push it up to currently there's a mixture of back

262
00:25:53,680 --> 00:26:02,400
blaze and s3 for various bits depending on how much i care about it i intend at some point in the

263
00:26:03,200 --> 00:26:08,480
maybe not too distant future to switch parts of that out to restic ah good man i was just about

264
00:26:08,480 --> 00:26:15,040
to ask you about that duplicati is such a pain in the ass sometimes and it you know it runs fine

265
00:26:15,040 --> 00:26:21,120
for weeks and weeks and then you log in and have a look at it and in the intervening time stuff's

266
00:26:21,120 --> 00:26:27,280
just broken for seemingly no reason and it breaks silently and can only configure it through the ui

267
00:26:27,280 --> 00:26:31,840
which you know how much i love that so restic i think is something i'm really going to be looking

268
00:26:31,840 --> 00:26:38,320
into a lot in the future with uh minio with the s3 back end as well so you can you can use restic

269
00:26:38,320 --> 00:26:44,480
with that so you use backblaze and a little bit of s3 so is that amazon s3 uh yeah wow made of

270
00:26:44,480 --> 00:26:50,320
money boy there's there's like a couple hundred meg in there just because oh okay then i was

271
00:26:50,320 --> 00:26:56,000
testing stuff like this was before when i was only backing up like the tiny bits and i concluded

272
00:26:56,000 --> 00:27:00,960
well if i'm just backing up the tiny bits i might as well back up everything well object storage

273
00:27:00,960 --> 00:27:06,000
is perfect for that exactly 100 let me ask you this then because i'm picturing the audience

274
00:27:06,000 --> 00:27:09,280
somebody's out there building their backup strategy right now if you were going to start

275
00:27:09,280 --> 00:27:13,680
again today start fresh how would you build it better what would you do differently what message

276
00:27:13,680 --> 00:27:18,960
would you send a past version of yourself past version would definitely be installed backups

277
00:27:18,960 --> 00:27:25,040
sooner um i'm very glad that i've never had a case where i've had to actually restore from

278
00:27:25,680 --> 00:27:30,160
an off-site backup i had one case where i had to restore from an on-site backup

279
00:27:30,880 --> 00:27:38,080
which i still think is sort of a bug in docker where i was messing around with some weird

280
00:27:38,080 --> 00:27:43,840
dockery stuff and i went to log into nextcloud a few hours later and the entire nextcloud bind

281
00:27:43,840 --> 00:27:51,040
mount was empty completely empty no app data no files no nothing just gone i have no idea

282
00:27:51,040 --> 00:27:58,000
why it happened fortunately that morning i had done an on-site backup to a disconnected hard drive

283
00:27:58,000 --> 00:28:05,360
so a few hours of syncing files back i lost as far as i'm aware no real data because i'd not

284
00:28:05,360 --> 00:28:11,440
made any changes but that that was not fun so definitely anyone listening i think alan jude

285
00:28:11,440 --> 00:28:15,760
says it best if it doesn't exist in three places it doesn't exist at all oh you had to go and

286
00:28:15,760 --> 00:28:21,360
reference alan huh yeah i kind of did but it's also it's such a good point is that now my data

287
00:28:21,360 --> 00:28:29,920
exists on my server it also exists using zfs send to a random shuck hard drive sitting on my desk

288
00:28:29,920 --> 00:28:36,080
good man and then as well like i say back up to backblaze which has been absolutely great i did

289
00:28:36,720 --> 00:28:43,440
for a small amount of time decide hey what if i roll my own backblaze would not recommend it uh i

290
00:28:43,440 --> 00:28:50,960
had a ten dollar machine from kim sufi which are a very cheap dedicated server host out of france

291
00:28:50,960 --> 00:28:56,560
they're a subsidiary of ovh and we all know how ovh are doing right now yeah i hear their business

292
00:28:56,560 --> 00:29:03,200
is on fire at the minute oh alex too soon too soon too soon hey i thought it was funny yes i

293
00:29:03,200 --> 00:29:10,320
tried running that and minio and it worked fine but once i realized that i was backing up a server

294
00:29:10,320 --> 00:29:17,360
i owned to a server i owned it was great but it was the kim sufi box was a bit finicky it was

295
00:29:17,360 --> 00:29:25,760
low powered minio as tiny as it is it's much more resource heavy than i would expect it to be so

296
00:29:25,760 --> 00:29:30,720
should we talk a little bit about some of your favorite self-hosted apps top three maybe oh so

297
00:29:30,720 --> 00:29:38,480
i'd have to say the one i definitely use the most is uh ttrss which is an rss reader my rss reader

298
00:29:38,480 --> 00:29:47,040
of choice i do most of my content consumption via rss all of my youtube consumption is entirely via

299
00:29:47,040 --> 00:29:53,120
rss because youtube's algorithms and suggestions and things like that are just quite frankly

300
00:29:53,120 --> 00:29:58,320
terrible that's amazing i think um more people should do this because i watched a film the

301
00:29:58,320 --> 00:30:04,400
other night called the social dilemma which talks about how insidious those algorithms are in

302
00:30:04,400 --> 00:30:08,800
controlling what you see and what you eventually what you think and what you believe you know the

303
00:30:08,800 --> 00:30:14,800
ultimate conclusion if anybody's on the fence as to whether you know facebook and google and twitter

304
00:30:14,800 --> 00:30:19,840
and what have you are forces for good in the world or not uh i recommend watching the social

305
00:30:19,840 --> 00:30:24,880
dilemma it might change your mind anyway as you were that's definitely one for my watch list as

306
00:30:24,880 --> 00:30:31,280
well um yeah so ttrss is definitely way up there what clients do you use for that i actually just

307
00:30:31,280 --> 00:30:38,800
entirely use the web ui mostly cool it's easy and it works other than ttrss i would have to say next

308
00:30:38,800 --> 00:30:45,600
cloud is currently quite far up there that's been a really nice tool for just accessing files it's a

309
00:30:45,600 --> 00:30:52,560
little bit heavy for my needs but it is the plugins are great it's fast enough and the sync

310
00:30:52,560 --> 00:30:57,040
clients when they work they work really really well see everybody always says this like oh the

311
00:30:57,040 --> 00:31:01,600
syncs a bit hit and miss i know chris you've had some actual experience with it losing data for you

312
00:31:01,600 --> 00:31:08,000
but i've used it now for i guess three years solid and it's just next file's just been really really

313
00:31:08,000 --> 00:31:15,280
reliable for me so i've only had two issues with it one is that it doesn't do uh partial syncs

314
00:31:15,280 --> 00:31:20,880
so if you modify a small part in a very large file it will sync the entirety of the large file

315
00:31:21,600 --> 00:31:28,000
i don't deal with large files but i suspect if you guys are pushing around very large mp3s or mp4s

316
00:31:28,000 --> 00:31:34,080
uncompressed media yeah then it can be really really slow the other issue i've had or i did

317
00:31:34,080 --> 00:31:39,600
have which i haven't had in a while is it would keep forgetting who i am oh no big deal right

318
00:31:39,600 --> 00:31:47,680
i know who i am but it just forgets and it gets very difficult to sync anything if it just

319
00:31:47,680 --> 00:31:52,640
forgets who you are it'll just keep logging me out i'd love to see them add land sync too

320
00:31:52,640 --> 00:31:57,120
because that's a fantastic feature when you when you power up a laptop and it hasn't been on the

321
00:31:57,120 --> 00:32:02,480
internet for maybe a week or more if you can sync from other nodes on the network directly it's

322
00:32:03,040 --> 00:32:07,840
way faster and it reduces the demand on your internet connection i love that feature about

323
00:32:07,840 --> 00:32:13,280
dropbox also i think dropbox has some intelligence about the order in which they sync files and what

324
00:32:13,280 --> 00:32:18,640
operations sync first versus what operations can be queued where nextcloud's c sync subsystem

325
00:32:18,640 --> 00:32:24,000
doesn't seem to support that so we've had situations where the nextcloud server is kind

326
00:32:24,000 --> 00:32:30,320
of like processing and sinking down some directory cleanup that we've done and maybe it's a significant

327
00:32:30,320 --> 00:32:36,320
amount of like just reorganizing or something and the client has to process all of those changes

328
00:32:36,320 --> 00:32:42,560
and operate all of those file system operations before it will process the sync command to send

329
00:32:42,560 --> 00:32:46,960
the new files up to the server and so we've literally just had editors on the other side

330
00:32:46,960 --> 00:32:53,840
waiting for files and so that stunk but what we did is we just changed the way we operate we don't

331
00:32:54,800 --> 00:32:59,200
make those kinds of changes on any kind of show day anymore we you know we wait and we make sure

332
00:32:59,200 --> 00:33:03,120
we do it like with a couple of day buffer and we've adjusted the way we operate and it's we've

333
00:33:03,120 --> 00:33:08,320
made it work now we've been using it for uh i mean i don't know alex do you remember since the since

334
00:33:08,320 --> 00:33:14,480
the sprint in 2019 right yes and since i appeared yeah roughly yeah right since we brainstormed and

335
00:33:14,480 --> 00:33:21,120
started this show so and and uh it's been running but yeah it isn't ideal so what's your last pick

336
00:33:21,120 --> 00:33:26,320
then it's a project i've been involved with a little bit in sort of contributing and writing

337
00:33:26,320 --> 00:33:31,840
content for uh which is probably also going to be a bit of a sore subject for some people uh it's an

338
00:33:31,840 --> 00:33:39,200
application called plausible plausible is a self-hosted google analytics alternative it's

339
00:33:39,200 --> 00:33:45,760
backed by a company there's a hosted offering it's really really nice the ui is beautiful

340
00:33:46,480 --> 00:33:53,680
it's fully gdpr compliant so it only tracks the data that it needs to do to do its job it doesn't

341
00:33:54,480 --> 00:34:00,400
track things around various other places it's entirely self-hosted so i run my own instance

342
00:34:00,400 --> 00:34:06,000
which tracks my own websites it doesn't track anything else and what that means is i can see

343
00:34:06,640 --> 00:34:11,840
which pages are getting the most traction which ones aren't where people are coming from and

344
00:34:11,840 --> 00:34:18,160
that's about it that looks great yeah really nice it's really nice i highly recommend it

345
00:34:18,160 --> 00:34:23,440
to anyone that's got a website especially if they're running google analytics and want to

346
00:34:23,440 --> 00:34:29,280
sort of take back some of their control from google and various other companies like that

347
00:34:29,280 --> 00:34:34,160
uh-oh ding dong you said it take back control my that's a trigger phrase for me

348
00:34:36,080 --> 00:34:41,120
something something brexit anyway oh it says the guy who's immigrated to the states to the

349
00:34:41,120 --> 00:34:47,840
guy who's still over there incredible uh-huh awkward one final question for you though jake

350
00:34:47,840 --> 00:34:53,120
and it's the one everybody's been waiting for it's the how many terabytes on your land question

351
00:34:53,120 --> 00:35:00,560
oh yeah oh so this is going to be an interesting one i'm going for the opposite record to what

352
00:35:00,560 --> 00:35:06,080
people are probably expecting um to have from guests on here i'm going for the lowest result

353
00:35:06,080 --> 00:35:14,480
possible so my current pool has four terabytes in wow i love this idea because why the headache if

354
00:35:14,480 --> 00:35:20,720
you don't need it right it's two four terabyte seagate drives they've been working pretty well

355
00:35:20,720 --> 00:35:27,760
for my use case there's only 200 gig on the pool so i've got ample storage space i've got ample

356
00:35:27,760 --> 00:35:34,960
space to grow it's been working absolutely flawlessly there is an additional single six

357
00:35:34,960 --> 00:35:40,560
terabyte drive which currently houses all of my media i need to get that into a pool of some kind

358
00:35:40,560 --> 00:35:45,280
as quick as possible because i can see alex's face physically pained as i say that perfect media

359
00:35:45,280 --> 00:35:52,480
server.com yeah i know where to go it's motor fs snap raid are two things yeah reasonably high up

360
00:35:52,480 --> 00:35:59,200
on my list of things to do when i get a free second but yeah four terabytes is exactly just

361
00:35:59,200 --> 00:36:05,040
about enough for my needs and i don't really have any intention of growing that anytime soon so i'm

362
00:36:05,040 --> 00:36:09,200
sticking right here at the bottom of the list so far okay well there's no shame in that i mean you

363
00:36:09,200 --> 00:36:14,880
could be like the michael gambon of uh terabytes huh uh that's an old top gear reference for some

364
00:36:14,880 --> 00:36:19,360
people that don't know what i'm talking about so thanks very much for coming on jake it was

365
00:36:19,360 --> 00:36:24,000
really nice to talk to you and please let us know from from the audience like if number one you

366
00:36:24,000 --> 00:36:28,240
would like to be you know one of these community spotlights that we're going to do what you thought

367
00:36:28,240 --> 00:36:31,840
of the segment let us know as well if it's something you'd like to see us do more of let

368
00:36:31,840 --> 00:36:36,800
us know if it's something you didn't like well maybe keep that opinion to yourself wow is there

369
00:36:36,800 --> 00:36:41,760
anywhere else you'd like to send people jake you know twitter or your personal blog that i know

370
00:36:41,760 --> 00:36:47,680
you write a lot of yeah i believe you described me as a quote prolific blogger and many people who

371
00:36:47,680 --> 00:36:53,920
hang out on the discord know i write quite a lot uh my website is theorangeone.net which i'm sure

372
00:36:53,920 --> 00:37:00,480
will be in the show notes uh my twitter account as well is at realorangeone which i suspect as well

373
00:37:00,480 --> 00:37:05,600
will be in the show notes well jake thank you a quick thank you to cloud guru for sponsoring

374
00:37:05,600 --> 00:37:10,160
this episode and i'd like you to know about their powershell core for linux admins course

375
00:37:10,160 --> 00:37:14,400
it's an intermediate level course and it teaches you the concepts of using powershell core with

376
00:37:14,400 --> 00:37:19,520
linux this could be game changing if you're in a multi-platform environment and the course includes

377
00:37:19,520 --> 00:37:25,520
of course administration installing docker working with the sql server even managing azure instances

378
00:37:25,520 --> 00:37:30,000
as well as integrating all with visual studio code there's a lot there so you'll have to click

379
00:37:30,000 --> 00:37:35,280
the link in our show notes that'll be at selfhosted.show slash 42 and you'll see the

380
00:37:35,280 --> 00:37:42,160
powershell core for linux admins course and thanks to a cloud guru for sponsoring this episode and of

381
00:37:42,160 --> 00:37:47,360
course a big thanks to our members over at selfhosted.show slash sre you can go there to

382
00:37:47,360 --> 00:37:51,760
support the show and get a limited ad feed we often talk as well in the post show about some

383
00:37:51,760 --> 00:37:56,080
little knickknacks in our lives and things that are going on uh so you get a little bonus show

384
00:37:56,080 --> 00:38:01,520
little bonus extra content yeah selfhosted.show slash sre and you can also find the contact page

385
00:38:01,520 --> 00:38:06,480
at selfhosted.show slash contact that's the place to get in touch with us i'm on twitter as well you

386
00:38:06,480 --> 00:38:11,680
can get me there i'm at chris las and i'm there at ironic badger and don't forget the show at

387
00:38:11,680 --> 00:38:32,160
selfhosted show so thanks for listening everyone that was selfhosted.show slash 42

