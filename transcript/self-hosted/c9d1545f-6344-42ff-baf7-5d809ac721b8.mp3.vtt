WEBVTT

00:00.000 --> 00:12.000
Coming up on today's Self Hosted, Chris figures out how hot is too hot, I attempt to perform an extreme remote firewall install, and we share some of our favourite SSH tricks. I'm Alex.

00:12.000 --> 00:15.000
And I'm Chris, and this is Self Hosted 24.

00:15.000 --> 00:17.000
I have squirrels on my mind.

00:17.000 --> 00:18.000
Okay.

00:18.000 --> 00:19.000
Squirrel mail.

00:19.000 --> 00:20.000
Go on then.

00:20.000 --> 00:25.000
Well, I am not happy about this Google news. Have you seen this Gmail news?

00:25.000 --> 00:29.000
What's that? That they're rolling everything all into Gmail?

00:29.000 --> 00:44.000
One big productivity suite. And I'm just not, not having it. I just want email. I want decent web email, but I don't want to host it myself, I don't think. So that's when squirrel mail came to mind.

00:44.000 --> 00:50.000
We've been over this before, Chris. I think we decided that self hosting email wasn't worth the trouble. What's changed?

00:50.000 --> 01:05.000
Here's what I'm thinking is, instead of hosting the email myself, I just want a really nice web based IMAP client, something that would render well on mobile, that I could add all of my Google accounts to, of which there are minty for the various shows.

01:05.000 --> 01:19.000
There are plenty I should say, many and plenty minty, and I bring them all into one web mail client, where I can just check that one web mail client, and I want something nice, that is clean, ideally could even support GPG encryption but not required.

01:19.000 --> 01:28.000
You know what I mean? Does sound appealing. I mean, I'm sure there's plenty of ways to skin this particular turkey, but next cloud mail comes to mind.

01:28.000 --> 01:36.000
Yeah, and round cube also came to mind. I know, I think round cube might be my top contender, but I bet the people in Discord might know.

01:36.000 --> 01:51.000
Selfhost.show.discord. I'd like to know if you have an IMAP client that you really like or something, whatever, just plugs into Google. That's really all it has to do so I can get out of their email client, but still take advantage of their infrastructure.

01:51.000 --> 01:58.000
So speaking of the Discord, we had some really interesting discussions over there this week about the best way to install Docker.

01:58.000 --> 02:09.000
It's changed a lot over the years because Docker decided to change their versioning, I think maybe two or three years ago at this point, which broke a bunch of package repositories.

02:09.000 --> 02:18.000
And if you type apt install docker in Ubuntu these days, it doesn't give you the latest version. It's really confusing. What do you think?

02:18.000 --> 02:28.000
There are a lot of ways to install Docker on a Linux box. In some ways, it's almost easier on Mac and Windows because there's just one sort of official way for end users or consumers to deploy it.

02:28.000 --> 02:35.000
But on Linux, you can just go through the process of adding Docker's repos and they have documentation on that.

02:35.000 --> 02:50.000
Or, and I think this was really the crux of the discussion on Discord, you can use what they call their convenience script, which is just essentially curling a git-docker.sh file and then just running it with pseudo privileges.

02:50.000 --> 03:03.000
And it goes through the process of setting up everything, removing conflicting packages if necessary, adding GPG keys, getting the repos configured, pulling down the software, installing it all.

03:03.000 --> 03:14.000
It does all of it for you. But no one is generally that comfortable with just running an arbitrary script from the Internet, even when it's from a project as well known as Docker.

03:14.000 --> 03:19.000
What's the worst that could happen? Pipe to curl, pipe to bash, pseudo, you know?

03:19.000 --> 03:31.000
I admit it, though, Alex, when I set up Docker on the Raspberry Pis, I went with the convenient script because I just I wanted to be sure I had the right repos and the right packages for the Raspberry Pi platform.

03:31.000 --> 03:43.000
Yeah, so the script that you're talking about, I think, is served at git.docker.com. And this basically gives you at the top, there's a very short little disclaimer.

03:43.000 --> 03:53.000
And you can pipe this. Basically, they don't recommend you curl, pipe to bash. They recommend you save it locally, chmod it and then run the script, which is perfectly fine.

03:53.000 --> 04:03.000
And the fact that you're going to git.docker.com looking at the script you're about to actually download, I think for me, that removes a lot of the anxiety.

04:03.000 --> 04:20.000
Like, for example, when you're going to go and install Homebrew on Mac OS, for example, their lead installation method is curl this script and pipe it to pseudo bash so that you can install whatever this script on the Internet is.

04:20.000 --> 04:29.000
Now, the reason that that's bad is that sometimes web hosts get hacked or malicious code is injected into the script.

04:29.000 --> 04:38.000
And if you're a bad guy hacker, you might not replace the entire script. You might just add a couple of small lines down in the corner that nobody notices.

04:38.000 --> 04:54.000
And so the whole purpose of verifying the scripts using the SHA hash that is there is to verify that the code you're looking at on the screen is actually the code that was downloaded and there wasn't some clever injection going on somewhere.

04:54.000 --> 05:11.000
Yeah, I think it's for me, it's variations of seriousness, because another tool where I sort of abuse the bash, curl, download a shell script and go thing is one of my absolute favorite data visualizers for system metrics net data.

05:11.000 --> 05:17.000
Mm hmm. Top installation source. Right. That's there. That's the one liner. And God, I'm such a hypocrite.

05:17.000 --> 05:28.000
I realize now I know I definitely curl pipe to bash on a more regular occurrence than I think I should say.

05:28.000 --> 05:34.000
Yeah, like I was saying, though, I would assign various like gradients of risk to my systems.

05:34.000 --> 05:40.000
I have boxes that are pretty unimportant, like quite literally a laptop that's come in for review.

05:40.000 --> 05:49.000
It's going to be in the studio for one week, and we're just totally punishing this machine to try to get all of the performance data we can from it.

05:49.000 --> 05:52.000
I'll bash curl net data on that thing without a second thought.

05:52.000 --> 06:00.000
Now, if it's a primary system that has private information, I often will try to go a more traditional route, especially if it's an arch box.

06:00.000 --> 06:02.000
I'll see if it's just in the A.U.R.

06:02.000 --> 06:13.000
If it's a went to box, I'll see if there's a PPA or a snap before I ever go that route. But you just have to kind of assess the risk in these each individual cases.

06:13.000 --> 06:18.000
And remember that the installation is just one spot where you're vulnerable.

06:18.000 --> 06:27.000
But a lot of times these things we're installing install other tools that bring all kinds of dependencies with them and have their own package repositories.

06:27.000 --> 06:32.000
So really, it's a rabbit hole, Alex. Always, always a rabbit hole with self hosting.

06:32.000 --> 06:39.000
Another rabbit hole you could go down if you want to install Docker in a repeatable way is to use Ansible.

06:39.000 --> 06:45.000
So I've used the Jeff Geerling Ansible role from Ansible Galaxy for the best part of two or three years at this point.

06:45.000 --> 06:49.000
Just works flawlessly. So that's another route you could take.

06:49.000 --> 06:53.000
Like that. Another reason I should be using Ansible right there.

06:53.000 --> 06:58.000
One of many. So how was the heat? You're back from Texas.

06:58.000 --> 07:03.000
We did pretty well. Spoiler alert. Nothing died. Nothing died. So that's good.

07:03.000 --> 07:07.000
We did get up to one hundred and four point nine in the server booth.

07:07.000 --> 07:14.000
Hold on. Hold on. I'm going to have to do the maths on that. One hundred and five to Celsius. Forty forty point five Celsius.

07:14.000 --> 07:18.000
That is what? So that's ambient air temperature. That's inside the server seat.

07:18.000 --> 07:21.000
That's inside the booth. Yeah. The server seat. That's high.

07:21.000 --> 07:26.000
It is. And I think I might have seen it thermal throttle a little.

07:26.000 --> 07:33.000
I might have seen some thermal throttle in action when we were watching Plex and we lost the playback session and then had to reconnect.

07:33.000 --> 07:36.000
And it took a little while to reestablish. It just seemed like things were running a little slow.

07:36.000 --> 07:40.000
So I think thermal throttling did kick in in that in that situation.

07:40.000 --> 07:44.000
But for the most part, the human venting procedure worked between Hedi and I.

07:44.000 --> 07:47.000
We managed to usually vent it every single day.

07:47.000 --> 07:51.000
So what we do is when we had the AC running and cranking, we'd vent it because the AC is right above it.

07:51.000 --> 07:57.000
So it can blow in there pretty well. And then we try to ride that as long as we could.

07:57.000 --> 08:01.000
But that was nice. It was nice that it didn't die. I did run a reduced load.

08:01.000 --> 08:06.000
So now that I'm back in the Pacific Northwest, Shinobi's back online. Sync thing is running again.

08:06.000 --> 08:10.000
So it's, you know, back to full operational status now.

08:10.000 --> 08:15.000
I'm just picturing all of your gear breathing a sigh of relief going, oh, thank goodness.

08:15.000 --> 08:18.000
We're back home where the temperature isn't just hot.

08:18.000 --> 08:26.000
I know. I wouldn't be surprised if I shortened the life of power bricks and maybe my router.

08:26.000 --> 08:31.000
You know, you don't really know, right? I could have just cut a couple of years off their life.

08:31.000 --> 08:33.000
But so does going down the road.

08:33.000 --> 08:39.000
It's amazing, the Texas heat, really. I think it was Carl George was saying in the Telegram group

08:39.000 --> 08:44.000
that the value of a parking spot in Texas is not valued by how close it is to the shop.

08:44.000 --> 08:46.000
It's valued by the shade.

08:46.000 --> 08:51.000
When we were driving home, we were heading west and that west and north often.

08:51.000 --> 08:56.000
And that meant that the sun in the afternoon when it was its hottest was on the driver's side of the RV.

08:56.000 --> 08:58.000
But it was it was slow cooking you.

08:58.000 --> 09:03.000
Oh, oh, it got so bad. And the AC even in the dash can only do so much.

09:03.000 --> 09:06.000
So it got to the point where it's basically blowing warm air at me.

09:06.000 --> 09:07.000
That sounds gross.

09:07.000 --> 09:11.000
We just could barely, barely stay alive because it was so hot.

09:11.000 --> 09:18.000
We just couldn't get comfortable some days. So we very much started taking like strategic parking spots as much as we could,

09:18.000 --> 09:23.000
which meant we ended up staying in a few areas that were fully off grid, which is really what I built the system for.

09:23.000 --> 09:27.000
It worked great. Plex is a bit of a pain in the neck.

09:27.000 --> 09:34.000
If you have multiple profiles, like I have a parents profile and a kid profile and you select it when Plex launches.

09:34.000 --> 09:37.000
And I think it uses their online service for that authentication.

09:37.000 --> 09:41.000
And so you can be a bit of a diva trying to load that screen, huh? Oh, my gosh.

09:41.000 --> 09:45.000
So in those cases, we just fell back to Cody. I don't blame you.

09:45.000 --> 09:50.000
Yeah. And then I just have to remember to go back and, oh, yeah, Marcus watched Marcus watched.

09:50.000 --> 09:53.000
Yeah, because he can't even use the Plex plug in encoding in that scenario.

09:53.000 --> 09:57.000
It just it doesn't work. So Cody saved the day in that case.

09:57.000 --> 10:06.000
And then just an aside, when we got back, I was sort of concerned that our outdoor Z wave devices wouldn't work

10:06.000 --> 10:13.000
after being disconnected from the controller for 50 days because they get marked in home assistant as the term isn't offline.

10:13.000 --> 10:18.000
It's some other term like dysfunctional or disconnected or something.

10:18.000 --> 10:23.000
I think it's disconnected. So, you know, when I would look at my devices, I'd see all of my outside stuff,

10:23.000 --> 10:26.000
which is a handful of devices marked as disconnected. And I just didn't like the error message.

10:26.000 --> 10:32.000
And I've done trips where I've been gone for a couple of weeks and come back and they reconnected fine.

10:32.000 --> 10:40.000
But I thought 50 days, you know, this this may never work. I may have to redo my Z wave setup.

10:40.000 --> 10:51.000
And I got home and I completely had forgotten about it until I was walking around outside and I noticed my automatic sunset lighting coming on.

10:51.000 --> 10:58.000
And I thought, oh, yeah. So not only did it just pick right up, but it's working with the automations just like it always did to it.

10:58.000 --> 11:03.000
It just connected. No problem. And I can go in and I can do a Z wave repair network.

11:03.000 --> 11:10.000
But if you're looking for yet another option to control outdoor stuff and for some reason,

11:10.000 --> 11:17.000
maybe Wi-Fi doesn't work or the devices aren't available, I give a hearty recommendation for Z wave because it may even work for like holiday equipment.

11:17.000 --> 11:21.000
Maybe you only bring it out for certain times a year.

11:21.000 --> 11:24.000
And I think it would just connect right back up and all the automations would pick right up.

11:24.000 --> 11:30.000
Don't have any Z wave stuff. Sorry, Z wave. It I don't know.

11:30.000 --> 11:39.000
I when I when I moved into this house, I wanted to investigate Zigbee and Z wave and all those different protocols.

11:39.000 --> 11:43.000
But in the end, they ended up sticking with Wi-Fi because I've just not had any issues with it.

11:43.000 --> 11:51.000
It just just works fine. And I don't know if that makes a difference you being in a tin can or anything to the Wi-Fi signals and stuff.

11:51.000 --> 11:56.000
But, you know, for the most part, I ended up using Z wave for sensors.

11:56.000 --> 12:02.000
That's an interesting use case because I I generally speaking when I'm building a sensor, it's a temperature sensor or something like that.

12:02.000 --> 12:07.000
Or everything I build is based around an ESP8266 pretty much.

12:07.000 --> 12:14.000
And for the most part, they they just need Wi-Fi, you know, 2.4 gig Wi-Fi.

12:14.000 --> 12:19.000
They just work. I think like 90 percent of my devices are on Wi-Fi.

12:19.000 --> 12:29.000
But I think early on, a lot of the manufacturers that do outdoor stuff like lighting and sprinkler controls and whatnot, I think they just went all in on Z wave.

12:29.000 --> 12:36.000
So a lot of the outdoor equipment that I have found that is ruggedized and rubberized and all of that is Z wave.

12:36.000 --> 12:45.000
And then these Aotech sensors that I love so much are both USB powered or lithium battery operated.

12:45.000 --> 12:53.000
And when you go with a lithium battery and you use Z wave as the radio, you get a year battery life off one of those little lithiums.

12:53.000 --> 12:56.000
It just looks like a Duracell. Oh, man, that does sound good. Yeah.

12:56.000 --> 13:00.000
Aren't they like a mesh style thing? They all communicate to each other, don't they?

13:00.000 --> 13:04.000
That's the other thing that works really nice about them for outdoor devices is each one.

13:04.000 --> 13:08.000
Well, depends on if you buy the right type, but they can extend the mesh network.

13:08.000 --> 13:21.000
And so that's why it's probably a good idea that I run a repair on my network, because when you tell Home Assistant to repair the Z wave network, the nodes sort of rediscover their positioning and kind of set up a new mesh.

13:21.000 --> 13:28.000
And if you've had a device missing for a while and then you bring it back online, it's generally a good idea to run that repair so that the mesh network is stronger.

13:28.000 --> 13:31.000
I really need to investigate some Z wave stuff.

13:31.000 --> 13:35.000
I kind of feel like maybe it's sort of at the end of its era.

13:35.000 --> 13:41.000
You know, there's there's new standards coming out from Google and Apple and I don't know.

13:41.000 --> 13:48.000
And I think most stuff now has enough horsepower and battery life to support just Wi-Fi always on.

13:48.000 --> 13:52.000
So it's sort of maybe on the decline, but I really like the ones I have.

13:52.000 --> 13:54.000
They sure do work reliably.

13:54.000 --> 14:02.000
And I just got a little stick that plugs right into my Raspberry Pi and Home Assistant detects it and just manages the whole Z wave network for me.

14:02.000 --> 14:07.000
I can manage all the particulars, like how often a device updates right through the Home Assistant UI.

14:07.000 --> 14:12.000
How did you manage remote access whilst you were gone, like SSH tunnels and stuff like that?

14:12.000 --> 14:16.000
Yeah, I am a fan of the good old simple SSH tunnel.

14:16.000 --> 14:19.000
When I'm coming into the studio, that's WireGuard.

14:19.000 --> 14:21.000
That's all the connections into the studio.

14:21.000 --> 14:24.000
I'll use WireGuard and I love it, man.

14:24.000 --> 14:27.000
I've got it on my phone. I've got it on my tablet. I got it on my laptop.

14:27.000 --> 14:39.000
But if I want to connect into the RV remotely, which does come up, especially when there's things that I forget at home on my file server, you know, sometimes SCP gets the job done, Alex.

14:39.000 --> 14:41.000
We've all been there.

14:41.000 --> 14:50.000
I've talked about this before on Linux Unplugged, but I don't think I've ever mentioned my super sweet self-repairing SSH tunnel powered by SystemD setup.

14:50.000 --> 14:52.000
I was trying to get another S in there.

14:52.000 --> 15:00.000
But it is what I have, and I have a couple of resource links in the show notes, and I set this up on all of my, well, all my systems, really, for the most part.

15:00.000 --> 15:06.000
I've started doing this on my laptop, too, because it's just, I like having a backdoor in.

15:06.000 --> 15:18.000
And what I have done is set up a SystemD unit file that starts as a service in the background and it does an SSH connection to a DigitalOcean droplet.

15:18.000 --> 15:24.000
And then from wherever I'm at, I can use that DigitalOcean droplet as a jump host.

15:24.000 --> 15:30.000
I log into that droplet and then I jump to whichever machine I like based on the port number I've assigned it.

15:30.000 --> 15:33.000
And that gets around your carrier grade NAT problems.

15:33.000 --> 15:43.000
Absolutely, because the connection is it's being initiated like on the Raspberry Pi or on the laptop and it's SSHing outbound and then it's connecting to the droplet.

15:43.000 --> 15:46.000
So it's not an inbound connection to the RV.

15:46.000 --> 15:49.000
It's an outbound connection and SystemD monitors that.

15:49.000 --> 15:52.000
And if it goes down, it restarts it automatically.

15:52.000 --> 15:58.000
That's really nice. I think I've used something similar when I wanted to kind of get out from behind a corporate firewall.

15:58.000 --> 16:02.000
I probably shouldn't have done that. It was probably very much against their I.T. policy.

16:02.000 --> 16:09.000
I did the same thing, though. I even had like a whole virtual Linux box I used to remote desktop into so I could watch YouTube.

16:09.000 --> 16:11.000
Oh, yeah. Yeah, that was it.

16:11.000 --> 16:17.000
You see, you know, back in the dark ages before mobile phones were a thing, like text messaging your wife was a pain in the butt.

16:17.000 --> 16:21.000
Whereas now it's just so easy. You don't really even think about that kind of stuff.

16:21.000 --> 16:26.000
But you can you know, once you've got an SSH tunnel set up, you can you can route everything through it.

16:26.000 --> 16:30.000
So, I mean, I've mentioned SSH shuttle before, for example.

16:30.000 --> 16:35.000
But there's all sorts of stuff you can do, like remote port forwarding or local port forwarding.

16:35.000 --> 16:42.000
So let's say you have a database running on a system and you want to give your friend access just, you know,

16:42.000 --> 16:50.000
whilst you're doing some dev work or something, you could do remote port forwarding so that they could connect on their local system to a port.

16:50.000 --> 16:53.000
And it's as if they're on your machine for a few minutes.

16:53.000 --> 16:58.000
There's some really cool stuff you can do with SSH. Maybe we'll touch on it one day.

16:58.000 --> 17:05.000
Yeah. And I'm also happy to report that port forwarding works through a jump host, which is fantastic for me.

17:05.000 --> 17:16.000
So I can get to my sync thing, Webman UI from the studio and I can set up a sync between the studio and the RV from just the one location.

17:16.000 --> 17:23.000
It's really pretty great. And the kind of peace of mind, too, that I have this private low end dedicated droplet.

17:23.000 --> 17:26.000
And that's the only thing my RV is connecting to.

17:26.000 --> 17:29.000
And then I can manage what systems I allow a connection in from.

17:29.000 --> 17:36.000
And so it's a pretty nice compromise of functionality and security and digital oceans, you know, firewalls and all that kind of stuff.

17:36.000 --> 17:42.000
I mean, you can lock it down really quite a lot. And it's sometimes you end up locking yourself out.

17:42.000 --> 17:46.000
I've definitely not done that and had to reset the root password before.

17:46.000 --> 17:49.000
But yeah, I've done all sorts of similar stuff.

17:49.000 --> 17:55.000
And you just feel like you're in what's it called, Mr. Robot or something when you're doing this kind of stuff, don't you?

17:55.000 --> 18:00.000
Especially when you're doing port forwarding through a jump host. That actually feels kind of cool.

18:00.000 --> 18:10.000
It boggles the mind when I pull up a Web page that's hosted on a Raspberry Pi inside a dinette booth in an RV that's connected over a MiFi that's being relayed through a droplet in San Francisco.

18:10.000 --> 18:13.000
So are you familiar with the SSH config file?

18:13.000 --> 18:14.000
Yeah.

18:14.000 --> 18:18.000
There's a command you can put in there for each of your hosts called proxy jump.

18:18.000 --> 18:23.000
And that will let you transparently use that jump host that you mentioned.

18:23.000 --> 18:27.000
So, for example, let's say you have a host called server.

18:27.000 --> 18:31.000
You put in host server and then you type SSH server.

18:31.000 --> 18:36.000
You can put all sorts of parameters in there like user, port number, host name, that kind of stuff.

18:36.000 --> 18:39.000
So you don't have to type the IP address in every time, for example.

18:39.000 --> 18:43.000
You can just type SSH server and it will go straight to that IP address.

18:43.000 --> 18:45.000
Another one you can do is proxy jump.

18:45.000 --> 18:49.000
And so you can start chaining multiple SSH hosts together.

18:49.000 --> 18:56.000
And I'm just looking through my config here and to get into my dad's house, I have about four or five different hops.

18:56.000 --> 18:57.000
I think it's five.

18:57.000 --> 19:05.000
So I go from here to my bastion server in my LAN, which then goes to a DigitalOcean droplet,

19:05.000 --> 19:14.000
which then goes to the OpenSense firewall, which I'll come on to shortly at my dad's house, which then goes to the host inside the LAN.

19:14.000 --> 19:16.000
So there's like five different hops there.

19:16.000 --> 19:24.000
And each of those hops only permits traffic from a specific place and a specific IP address on the LAN side anyway.

19:24.000 --> 19:30.000
And so I like to think, even though it's a really complex house of cards, sometimes it's actually quite secure doing that.

19:30.000 --> 19:32.000
Very similar to what I'm doing.

19:32.000 --> 19:37.000
I did not add it to my config file, though, and that is a super good tip.

19:37.000 --> 19:42.000
I think I will, because why not save myself typing extra commands?

19:42.000 --> 19:44.000
That's great. I love that.

19:44.000 --> 19:49.000
I need to write a blog post on ProxyJump because I'll post you a little bit in Telegram right now.

19:49.000 --> 19:54.000
And you can take a look and you can see how you can chain these different things together and take a look.

19:54.000 --> 19:56.000
I think we may have ourselves a future topic there.

19:56.000 --> 19:59.000
But I heard you tease OpenSense.

19:59.000 --> 20:00.000
A little bit. Yeah.

20:00.000 --> 20:10.000
Yeah. So when I moved into this house, I was running PFSense and sometime in January or February, I don't remember, pre the event.

20:10.000 --> 20:12.000
I don't really remember much before the event.

20:12.000 --> 20:17.000
I switched to OpenSense purely because it supports WireGuard.

20:17.000 --> 20:22.000
It's the only reason I switched. And PFSense, to my knowledge, still doesn't.

20:22.000 --> 20:29.000
For this, you know, what's it been, four or five month period, I've had OpenSense at my house and PFSense at my dad's house.

20:29.000 --> 20:34.000
That's been working fine. And we had an open VPN server for our iPlayer usage and that kind of stuff.

20:34.000 --> 20:41.000
But I thought, come on, it would be cool to have OpenSense in both places and then set up a site to site WireGuard VPN.

20:41.000 --> 20:54.000
And what that means is that I can now type in IP addresses of my dad's remote LAN subnet and access them on my local laptop on my LAN as if I'm in England.

20:54.000 --> 20:57.000
Oh, that's the dream. That's the dream, Alex.

20:57.000 --> 20:59.000
It's pretty cool, I must admit.

20:59.000 --> 21:08.000
So I owe my dad a beer or two because as part of that thought process, obviously, I had to replace PFSense remotely.

21:08.000 --> 21:11.000
Now you think about this. I want to paint you a picture for a moment.

21:11.000 --> 21:14.000
Oh, God, I am already thinking about it.

21:14.000 --> 21:20.000
You want to remote install a firewall that only has serial console access.

21:20.000 --> 21:23.000
So think about what you need here. You need a null modem cable.

21:23.000 --> 21:30.000
So I'm running this on an APU2D, I think is what it's called, PC Engine's integrated system.

21:30.000 --> 21:31.000
OK.

21:31.000 --> 21:36.000
So I need a serial null modem cable to convert the serial console output to USB.

21:36.000 --> 21:43.000
I need him to get his ThinkPad, put it next to that box in a cupboard dangling an ethernet cable out the side.

21:43.000 --> 21:53.000
I need him to get me a USB stick so I can flash OpenSense onto that and then get him to put that into the APU2 so I can boot from that.

21:53.000 --> 21:58.000
But think about this, right? When you're installing a firewall, what don't you have?

21:58.000 --> 22:00.000
Internet access, Alex.

22:00.000 --> 22:03.000
Correct.

22:03.000 --> 22:12.000
And so my damn arse thought it would be a good idea to try and remotely install a firewall from America in my dad's cupboard in England when he barely has 3G in his house.

22:12.000 --> 22:13.000
Oh, no.

22:13.000 --> 22:23.000
So he and I were resorted to SMS text for a few, maybe about half an hour, whilst we tried to figure out which cable wasn't quite plugged in correctly.

22:23.000 --> 22:33.000
And I was expecting to be reduced to Telegram so at least we could send pictures, but no, we were reduced to SMS and MMS didn't seem to work.

22:33.000 --> 22:37.000
So, yeah, that was a fun half hour.

22:37.000 --> 22:41.000
I really apologize to my father for putting him through that.

22:41.000 --> 22:48.000
So I've got him plugged directly into the Virgin Media modem in modem mode, so there's no NAT going on or anything.

22:48.000 --> 22:54.000
So the ThinkPad itself has a WAN IP address, so you don't want to do that for very long on a Windows machine.

22:54.000 --> 23:07.000
And then I'm connected via TeamViewer into his laptop doing the install of OpenSense through Putty and a console session, which went flawlessly.

23:07.000 --> 23:11.000
It took about 20 minutes to install OpenSense. That was no big deal.

23:11.000 --> 23:22.000
And then the moment of truth comes. You have to unplug the laptop and plug the firewall in in the correct order and trying to make sure that the WAN port was connected to what it was before.

23:22.000 --> 23:25.000
And there's just a lot of stuff that could go wrong.

23:25.000 --> 23:32.000
And there's just that puckering moment where you're like, right, disconnect it, go on, just try.

23:32.000 --> 23:50.000
And then you just pray that there's internet. And there was this horrible five minutes where he wasn't getting a WAN IP address, he was getting a 192.168.100.10, which I think means that the Virgin modem hadn't detected that the Mac had changed or something.

23:50.000 --> 23:56.000
So I got him to power cycle the Virgin Media modem and it worked.

23:56.000 --> 24:10.000
Wow. Wow. It would have been incredible if you could have had like a camera and, you know, Telegram, like you were saying, like that would have made it so much simpler because you could at least exchanged pictures of what was on the screen.

24:10.000 --> 24:19.000
Yes. Yep. It reminds me of a project I heard once that was a Python script that would take SSH commands in over SMS.

24:19.000 --> 24:23.000
So you couldn't interact with it, but you could send commands over SMS.

24:23.000 --> 24:28.000
My old UK server that I didn't bring with me when I emigrated is at my dad's house.

24:28.000 --> 24:34.000
And that's I power it on once or twice a week, do my ZFS remote replication backup and turn it off.

24:34.000 --> 24:39.000
Now I do that over a WireGuard VPN site to site. So it's even better than before.

24:39.000 --> 24:47.000
But yeah, I don't know. There's got to be some way of doing a backup like that. But in reality, how often are you reinstalling a firewall?

24:47.000 --> 25:03.000
Well, in this case, would it have helped? Right. Because you were taking out the Internet connection. So even if you had some sort of remote management card in that server or you had a second PC there that you could get a complete remote desktop session, it would have been disconnected when you took down the firewall.

25:03.000 --> 25:07.000
True. Yeah. I need a backup Internet connection. That's what I need.

25:07.000 --> 25:11.000
You know what you need is a modem. Just a good old dial up modem.

25:11.000 --> 25:20.000
Yeah, maybe. Maybe it actually would have worked in this case since you're just dealing with a serial console. But that was as ridiculous as it sounds.

25:20.000 --> 25:31.000
Back in the day, what we did, what I had to do, I would have clients that had really serious business like they have to transfer medical records on this particular hour.

25:31.000 --> 25:42.000
And they had a T1 line, which was one point five megabits, I think. And it was a thousand dollars a month. And it would go out. It would go out.

25:42.000 --> 25:48.000
That is painful. Oh. And their backup was a fifty six K modem that was actually sufficient.

25:48.000 --> 25:53.000
It was just slower. But the T1 was supposed to be for reliability.

25:53.000 --> 26:02.000
And I remember just thinking how funny it was because we had these procedures where after the transfer was done, the office lady would go around and unplug the phone from the back of the modem.

26:02.000 --> 26:08.000
And then like an hour before the procedure was to start, she'd go up to it and plug the modem back in.

26:08.000 --> 26:12.000
And that was the security control. I went for a hotel for a little while.

26:12.000 --> 26:19.000
And I remember the night management manual had it. You have to go and replace the tapes in the backup server.

26:19.000 --> 26:23.000
And I thought, oh, yeah, we had we had people that shared that job.

26:23.000 --> 26:30.000
It was there. They were on tape duty and they'd had to drive it down to the alternative location, rotate the tapes and drive it down.

26:30.000 --> 26:44.000
Crazy. So talking of backups and stuff like that briefly, one of the coolest features I discovered in OpenSense, besides the native WireGuard support, is you can back up your config files natively to next cloud.

26:44.000 --> 26:49.000
We'll all be dipped. It sends it to next cloud. Have you seen how large it is? It must be pretty small, right?

26:49.000 --> 26:52.000
It's a few kilobytes of XML. Let me go and have a look.

26:52.000 --> 26:57.000
You could just run that forever then and never have to worry about eating up your space. That's great.

26:57.000 --> 27:07.000
It versions it every day. So the file names have, you know, config firewall dot KTZ dash date stamp timestamp at 1 a.m.

27:07.000 --> 27:11.000
It's one hundred and twenty kilobytes every day. So I think I can probably swing that.

27:11.000 --> 27:16.000
Now, do you have that pointed at another backup, Alex? One is none.

27:16.000 --> 27:24.000
Yes, but it's it's already my firewall backup. I mean, I mean, do I need to back that up more? I don't know. I don't think so.

27:24.000 --> 27:31.000
No, I just I just as the guy who recently deleted some data, I have to give you a hard time. That's my job now.

27:31.000 --> 27:43.000
Yeah. Well, I actually think having lost most of the previous weekend, actually previous week to getting the site to site VPN working, I am going to make sure I back this up with my life.

27:43.000 --> 27:51.000
Right. Because the open sentence documentation, God love it. Particularly the bit for WireGuard was about two years old.

27:51.000 --> 27:57.000
And so a lot of it was kind of in the right ballpark, but didn't really work properly.

27:57.000 --> 28:01.000
The site to site VPN thing is still old, so I'm going to rewrite that.

28:01.000 --> 28:08.000
But I've rewritten the man page for OpenSense and WireGuard, and that was merged this week.

28:08.000 --> 28:13.000
So it's one of my first proper like major open source documentation contributions.

28:13.000 --> 28:17.000
No kidding. You didn't tell me that. I'm really pleased with that one.

28:17.000 --> 28:27.000
That's a solid contribution to because I was sort of turned off from OpenSense when I reviewed that and I thought this looks really out of date.

28:27.000 --> 28:33.000
Maybe it isn't complete. Maybe it's not very good. And I kind of just moved on.

28:33.000 --> 28:36.000
I'm not joking. It wasn't complete and it wasn't very good.

28:36.000 --> 28:39.000
So, yeah. Wow. That's so great.

28:39.000 --> 28:43.000
Hopefully the new one is there. And I just want to underscore that point to people.

28:43.000 --> 28:48.000
Anybody that's listening that's wondering how they get started with contributing to open source.

28:48.000 --> 28:54.000
There are many, many ways you can do it. Code is just one and arguably one of the least important ways.

28:54.000 --> 28:56.000
I mean, obviously without code, there's nothing.

28:56.000 --> 29:01.000
But somebody said to me on Discord earlier when I pointed at the pull request that they were like, oh, that's really cool.

29:01.000 --> 29:08.000
Because when I'm maintaining a project and I'm the guy that knows the intricacies of this particular plugin,

29:08.000 --> 29:14.000
the last thing I want to be doing is fielding user requests about the baby stuff, the basics.

29:14.000 --> 29:17.000
And equally, I don't want to be writing that stuff either.

29:17.000 --> 29:26.000
I would rather that it was someone like you came along and did a good job writing the documentation that frees me up to do what I'm good at.

29:26.000 --> 29:30.000
And I hadn't really thought of it quite so clearly as that, so concisely as that.

29:30.000 --> 29:38.000
Yeah, it has a real benefit long term because it means less questions, which means that developer is saving time. That's huge, really.

29:38.000 --> 29:42.000
Yeah, so I found that the whole merge process only took a few days.

29:42.000 --> 29:48.000
So for those of you that aren't on GitHub all day, every day for your day job, the process is really straightforward.

29:48.000 --> 29:52.000
You go to the repo that you want to contribute to.

29:52.000 --> 29:55.000
So in this case, it's the open sense docs repo.

29:55.000 --> 30:07.000
You press the fork button up in the top right hand corner, which then creates a full copy, a snapshot effectively of that Git repo at that moment in time under your username.

30:07.000 --> 30:12.000
You're then free to make all the changes in the world that you want for as long as you want.

30:12.000 --> 30:21.000
If it's a particularly busy repo, try not to make it more than a few days because otherwise things will get out of sync and you'll have to have resolve merge conflicts.

30:21.000 --> 30:25.000
But in this case, there's not very much churn in the open sense docs repo.

30:25.000 --> 30:30.000
So it was on my computer for like a week and that was that was no problem.

30:30.000 --> 30:39.000
So once I'd finished writing the article, the next thing that I did was I opened what's called a pull request, merge request, pull request.

30:39.000 --> 30:42.000
They kind of mean the same thing. It's just semantics.

30:42.000 --> 30:53.000
And what that does is it asks permission of the open sense repo owners permission to say this guy, Ironic Badger, wants to make these changes to your repo.

30:53.000 --> 30:59.000
Is that OK? And we had a little bit of back and forth about some of the wording and a few tweaks here and there.

30:59.000 --> 31:05.000
And I made a few changes based on his comments. And after a few days, wouldn't you know it? Merged.

31:05.000 --> 31:08.000
And that's it. You're a contributor to open source. It's as simple as that.

31:08.000 --> 31:13.000
This really makes me appreciate an aspect of self-hosting that we've never really touched on.

31:13.000 --> 31:27.000
And that is you can actually make a difference on the projects in a way that is maybe even not code related and it benefits more self-hosters and it makes what you use better.

31:27.000 --> 31:35.000
That's just an opportunity you don't have when you use a service that's hosted, say, on Google's cloud or Apple's cloud or whatever it might be.

31:35.000 --> 31:41.000
There's just no opportunity for you to have any voice there. You have no impact on its direction.

31:41.000 --> 31:48.000
And almost all the software that we run on our servers for self-hosting stuff is open source.

31:48.000 --> 31:54.000
It's free software and you can actually make a difference. That's a big deal with self-hosting that we don't talk about much.

31:54.000 --> 31:56.000
It does feel scary.

31:56.000 --> 32:05.000
Even sat in this chair as a guy that has been working in DevOps now for five, six years, whatever it is, as my day job.

32:05.000 --> 32:12.000
I still got a little bit nervous when I pushed that merge request button, that pull request button, because you're putting yourself out there.

32:12.000 --> 32:16.000
You're putting yourself out there for judgment and sometimes people are going to say no.

32:16.000 --> 32:21.000
But in my experience in general, most people are just happy that somebody else is contributing.

32:21.000 --> 32:26.000
If it's a good quality contribution, then just go for it. Give it a go. What have you got to lose?

32:26.000 --> 32:31.000
There has to be more things like this that our community could have an impact with various self-hosted open source software.

32:31.000 --> 32:34.000
It's maybe something for further discussion down the road.

32:34.000 --> 32:37.000
Now, you're all about power monitoring and stuff like that, aren't you?

32:37.000 --> 32:43.000
I have been getting more and more into it, yeah. I don't have a great solution now that's tied in with Home Assistant.

32:43.000 --> 32:49.000
I have a Victron system that has an app that gives me all kinds of data, but it just lives there.

32:49.000 --> 32:54.000
Now, I'm not going to go into the full details in this episode. We'll save it for a future episode.

32:54.000 --> 33:09.000
But I would like to draw our listeners' attention to a 100% open source hardware and software Raspberry Pi whole home power monitor project by user David00 over on Reddit.

33:09.000 --> 33:12.000
Okay. Well, this is starting to check some boxes.

33:12.000 --> 33:20.000
Yeah. Yeah. So like I say, we are going to save the full reveal for this thing for probably a couple of episodes time.

33:20.000 --> 33:27.000
But in the meantime, please check the show notes for the link to a flyer that David's put together.

33:27.000 --> 33:32.000
Now, we don't stand to make any money out of this, David or I, we're just trying to get together a group buy.

33:32.000 --> 33:40.000
So the reason we're doing this is because there are a bunch of you need to buy a few circuit boards, get some custom circuit boards made up,

33:40.000 --> 33:44.000
some fuses, a few components, nothing major and some Raspberry Pis.

33:44.000 --> 33:50.000
And at the quantities that, you know, just one or two units would be, it's not really cost effective.

33:50.000 --> 33:58.000
But if we're able to get, you know, 50 to 100 people together that are interested in building these things, then it starts to make a lot more sense.

33:58.000 --> 34:02.000
And we're looking at sort of the $20 price range for a kit here.

34:02.000 --> 34:14.000
So what this thing allows you to do is it allows you to monitor the energy going into and out of your house and then export that to a Telegraph Influx Grafana stack.

34:14.000 --> 34:18.000
And then obviously that will be compatible with Home Assistant as well.

34:18.000 --> 34:27.000
You can monitor up to six individual circuits. You can see in real time how much power they're using, you know, current wattage, all that kind of stuff and voltage.

34:27.000 --> 34:35.000
So if you are at all interested in monitoring solar, it will also monitor inbound as well as outbound power.

34:35.000 --> 34:38.000
So there's all sorts of different things you can do with this.

34:38.000 --> 34:42.000
I wonder if it'd be compatible with my setup. I'm going to seriously look at this thing.

34:42.000 --> 34:49.000
Now, I think the next step for everybody is to, if you are at all interested in this project, take a look at the link in the show notes

34:49.000 --> 34:59.000
and then reach out to me on Twitter at Ironic Badger or self-hosted at JupiterBroadcasting.com on the email and just let me know what you think.

34:59.000 --> 35:07.000
And if that $20 price point is of interest to you, if we get enough interest, we're going to put together a group buy probably and then get these things shipped out.

35:07.000 --> 35:12.000
And maybe we could come to some agreement because there is going to be some kind of soldering required.

35:12.000 --> 35:19.000
So there is a slight downside, I'm sorry to say, that you might have to do some self, you know, some assembly.

35:19.000 --> 35:23.000
But I think it's a good starter project for a lot of people.

35:23.000 --> 35:29.000
And there isn't really much else like it out there on the market in that similar price bracket.

35:29.000 --> 35:35.000
It looks pretty cool. So the idea is that it's a tool that will give you real time information on your power consumption.

35:35.000 --> 35:39.000
Solar is on here, too. Generator status. That's awesome.

35:39.000 --> 35:46.000
That's exactly what I need. And monitor six individual circuits. So that's I wonder how that would work for me.

35:46.000 --> 35:49.000
This is pretty neat. The PDF is pretty cool.

35:49.000 --> 35:58.000
The way that you monitor the actual current usage is you use what's called a CT clamp and that basically just clips over the cable.

35:58.000 --> 36:03.000
So there's an electrical field generated as current flows through a cable.

36:03.000 --> 36:09.000
And what these CT clamps are able to do is measure that somehow. I think that's just incredible.

36:09.000 --> 36:12.000
You don't need to splice into the cables or anything like that.

36:12.000 --> 36:18.000
And what these CT clamps generate is a very small voltage somewhere between zero and one volts.

36:18.000 --> 36:26.000
And then there's an integrated controller chip that reads that value and interprets that to say, OK, well, that means there's three amps flowing at this voltage.

36:26.000 --> 36:30.000
Therefore, you're using this number of watts. Super simple to do.

36:30.000 --> 36:33.000
And hopefully we can get some interest. Yeah.

36:33.000 --> 36:36.000
So it's not very invasive to set it up, it sounds like. No, no.

36:36.000 --> 36:42.000
And then the software to actually do like all the data collection and whatnot is also open source.

36:42.000 --> 36:45.000
It's a cool little project. You can put me down. Put me down. All right.

36:45.000 --> 36:49.000
I thought you'd be interested. Yeah, I like it. Looking at the GitHub project, too.

36:49.000 --> 36:53.000
I like what I like what I see up there as well. We'll put links to all that stuff in the show notes.

36:53.000 --> 36:57.000
And yeah, please let me know if you're interested. Yeah, I could always use another Raspberry Pi.

36:57.000 --> 37:05.000
No, what have I done? You know, it's funny, too, is the RV might be in good, good shape now, heat wise.

37:05.000 --> 37:14.000
But now the studio heats up because the afternoon where we have the studio servers in the garage and the sunlight just bakes that garage in the afternoon.

37:14.000 --> 37:20.000
So it's about 92 degrees out there right now. And I went out and set up one of those portable air conditioners.

37:20.000 --> 37:25.000
So from the fire into the frying pan, Alex. Always, always the way.

37:25.000 --> 37:31.000
Well, before we officially in self-hosted 24, I'll mention the contact page self-hosted dot show slash contact.

37:31.000 --> 37:35.000
And while I'm on a roll, self-hosted dot show slash Discord for the community.

37:35.000 --> 37:39.000
And so, yeah, please do go and check out the Discord. It's hopping these days.

37:39.000 --> 37:43.000
We've got nearly 1500 members. It's getting pretty crazy over there.

37:43.000 --> 37:56.000
So thanks very much for listening, everyone. That was self-hosted 24.

