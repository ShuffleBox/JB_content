I'm looking out tonight over a beautiful Norfolk sky.
I'm finally, finally back in England.
Oh, that must feel amazing after having to wait with the whole pandemic and everything.
And how ironic is it that now that I'm back in my studio, you're traveling?
I know, right?
And I'm talking to you over a 4G LTE connection because the house I'm staying in at my mother-in-law's
is so rural she can only get two meg down on DSL.
Well, now the shoe's on the other foot.
I'm with the good connection and you've got cellular.
How was it, though?
I mean, traveling with the baby.
Plus, that's no short flight.
Even from the East Coast to London, that must have been a six-hour flight, something like that?
It's seven going to Europe because you're with the wind, what they call the jet stream.
But coming back, it's an hour longer.
I guess it must be uphill or something.
So, right, it's story time.
All right, it's story time.
I was a colossal idiot.
Let's put it that way.
No, the night before our flight to England from the States, I was logging onto the American
Airlines website, putting in all my passport information and I put in my wife's passport
information and my daughter's passport information.
It was all fine.
Got to mine and I have both, I have the British and the American one and I put in my British
one and then it said, you don't have a visa for this passport, please enter your US one.
I'm like, okay, I was going to enter Britain on my British one, but sure, fine.
Went to get my US passport out the drawer, it expired in July.
Oh, no, you can't just get that taken care of like overnight, like that's a process.
No, and bear in mind, so we were due to fly out on Labor Day, which is like a bank holiday
in the States, you know, this was Sunday night I found out for a Monday night flight.
On Labor Day, so the entire government was closed on the Monday, so I just had to sit
there stewing in my own filth and shame for an entire day, explained to my entire family
why they weren't going to get to meet their granddaughter on time and yada, yada, yada.
I mean, that does feel like a quintessential dad experience where like you're, you're so
worried about like, how are we going to fly with a baby?
What do we need to do?
Like, do we have devices to entertain ourselves, sync the media, pack everything?
You think of all that stuff except for your own passport.
Do you know what makes this absolutely asinine stupid is that we had to apply for my daughter's
first passport in August, so she had her appointment on August 8th.
We paid for the expedited processing and it was there by August the 22nd.
That was pretty fast, I think, for a first passport.
They used my American passport in that application and at no point did anybody say to me,
hey, Mr. Kretschmar, your passport's expired.
Hey man, just so you know.
Just so you know.
Looks like you might be preparing to travel.
I mean, look, it's totally my fault and I hold my hands up that I screwed up, but there
were a couple of opportunities where other people could have helped me as well.
Oh boy, no kidding.
Well, you can always help yourself by going to a cloud guru, the leader in learning for
cloud Linux and other modern tech skills.
And right now everyone can get into the game with discounts on learning plans, hundreds
of certification courses, thousands of labs and hands on learning and free cloud sandboxes
to develop your skills.
A cloud guru dot com.
So the Tuesday morning rolls round and I end up calling the State Department and booking
an appointment, an emergency passport appointment.
The only one they have within two weeks is in Chicago.
And of course, you're in North Carolina.
So that's a that's a bit of a trek.
Well, actually, I tell a lie.
They had one in Buffalo as well.
But given the size of O'Hare in Chicago, I figured actually what we'd do is we'd fly
out to Chicago.
I'd go and get my emergency passport taken care of.
And then they give it to you within two or three hours.
And then we just fly to London from Chicago.
So in the end, my wife got her birthday in Chicago and she got to go around all the art
museums, all that kind of stuff.
And then we flew out to Heathrow direct from O'Hare.
We went on one of those really nice new Dreamliners, those Boeing Dreamliners.
Oh, really?
Yeah, lives up to the hype, man.
I tell you what, they say they pressurize the cabin at 6000 feet, not eight.
And I was super comfortable on that plane, even with a mask on.
It's hard to explain, but I just didn't feel as fatigued at the other end.
Boy, if you're going to go on a long flight, that seems like the way to go.
How nice is that for the wife lady?
She got to spend the anniversary in Denver during our meetup and the birthday in Chicago.
Yeah, I know, right?
After a year and a half of not traveling, it's a bit strange.
So anyway, here I am sat in my mother-in-law's house in England, and it's actually pretty
much three years to the day since I emigrated.
Wow, a lot to catch up on.
There's so much that's happened in that three years from, you know, new career, new houses,
new baby.
The weird thing is, is that when we emigrated, child, having a child was just not something
we were even thinking about.
And here we are coming back the first time with her in tow.
It's very strange.
Wow.
Well, you're getting that baby adapted to travel early, which I hear is the way to do
it.
So hopefully she'll be a travel pro.
Hopefully, you know, right away.
You know, the weirdest thing, though, you'd think after three years, it would feel weird
to come back to a different country that drives on the correct side of the road, that measures
everything correctly.
But, you know, the weirdest thing actually is that it doesn't feel weird at all.
It doesn't even feel like we ever left.
It's just picking right back up where we left off.
It's it's bizarre for me, you know, just even after this road trip, we were gone for about
40 days for the first two days that I was back in the Seattle area.
It felt a little strange, like, oh, this doesn't quite click anymore.
But now that I've been here for a little bit more than a week, it just feels totally normal
back in the swing of things.
Is it kind of like that?
Yeah.
Yeah.
I mean, I've still got a couple of British bank accounts, so I've got all the correct
credit cards to pay for things with, you know, I can just pay for petrol and it's no problem.
And you're no longer the one with the accent anymore.
It is so nice.
I can't lie to just not have that be a talking.
Oh, my God, I love your accent.
Yeah, yeah.
I bet you get that all the time, especially in the south.
That must be very common.
Oh, my gosh.
Of course, my go to line to them is, well, you're the one with the accent and you can
you can just see people stop and look at me like, oh, yeah, I suppose I do have an accent
to you, don't I?
I imagine much like myself, you must go through a lot tech wise and with your home set up
to get ready for a trip like this.
Well, yeah, I mean, I've got three years worth of tech debt that I wanted to try and
address on this trip.
A bunch of stuff to my old UK server.
I wanted to try and improve things for my parents as well, who have a bunch of old laptops
that are just sat around gathering dust that they'd love to get the data off of and find
ways to manage all their photos, all this kind of stuff and try and bring some of the
self hosting stuff that I've learned over the last three years since I left back with
me and try and improve their setups.
I imagine it's an opportunity for you to also maybe rethink your offsite backup because
you're at these machines now.
Like if you want to change something when it comes to any of that kind of stuff, this
is kind of your opportunity.
This is it.
Exactly.
Yeah.
I mean, we will be coming back next summer because of my sister's wedding, but it's
not often, you know, who knows?
Maybe there'll be another COVID.
Oh, God, I do hope not.
But you just don't know when you're going to get these opportunities.
So I've gone ahead and replaced the motherboard in my UK server.
That was it was six or seven years old when I left.
So, you know, now it's knocking on the door of being 10 years old.
Oh, yeah.
It's a really old super micro 1366 LGA socket Xeon, I think.
Good box, though.
That's a good board.
Oh, yeah, absolutely.
But it ran IPMI through Java.
So I had to have a special VM around just for that, which was a pain in the ass.
So I've gone ahead and replaced that.
I put a link in the show notes to the ASRock rack motherboard that I've picked out.
And I picked this one out for a few reasons, mostly because I actually
already had an i5 8500 CPU lying around.
And I had that because of all the experimentation I did in January with the
GVTG stuff, so that's just been sat on a shelf gathering dust for a little while.
I mean, this looks like a board that should last you a good number of years,
and especially if it's one you already had, that's a major win.
And I'm impressed that you've already got the work done.
You got right to it.
I waited to decompress and dejet lag for a couple of days, and then I got to swapping
out the motherboard, and you know, there's a few nice upgrades.
I put an NVME drive in there.
The i5 that's in there obviously has quick sync as well.
So if there's any, you know, I use that server for a lot of TV streaming, so like
when the Olympics were on, when the World Cup is going to be on next year, the
Euros, all that kind of stuff.
I watched the BBC coverage, 3Plex, from my UK server.
I see.
So you don't even have to pop in over WireGuard because you're using Plex.
You can just bring up Plex.
Correct.
Yeah, just, just for the TV.
And it works really nicely, but the old Xeon, when it was transcoding, that
content would suck down the juice, which, you know, it's not my electricity bill.
So I'm trying to be a good citizen and replaced it with a more power efficient
system with the Intel quick sync stuff.
But this motherboard in particular has a couple of really interesting things, I
think, if you're looking at a media server motherboard, you should be aware of.
First of all, it's a micro ATX board, which may not be for everybody, but it
does have three PCI expansion slots on it, plus one NVME drive slot.
So there's plenty of expansion options in there should you need it.
It also has a really very, very nice HTML5 based IPMI implementation, which is
really nice.
So I've got OpenSense running on an APU2 at my dad's, and then I use that as my
WireGuard endpoint.
So once I've got the site to site VPN up and running, or just connect through the
client on my laptop to that site, I can then just access it through an IP address
directly in the browser.
There's no Java crap needed.
It's really, really nice.
Oh, that's going to be great, Alex.
I mean, does it mean it really sounds like, you know, it's going to be a
great ideal board and setup for what you're doing?
My only knock against it would be, it's kind of a bummer it only has one NVME
slot because it would be really nice to have, you know, maybe in a mirror or
something like that, like a couple of drives and have that speed still.
Well, it would, but luckily the primary PCIe port supports bifurcation.
So what I've been able to do is buy an M.2 NVME PCIe card that has four NVME
slots on it and split that up, split that port up essentially into not four,
unfortunately, but three extra NVME slots.
So I don't need it for this server in the UK, but for my server back at home
in the US, I'm going to do this.
I'm going to, I've been testing it for the last few weeks and it works pretty
well.
The main slot supports eight by four by four.
So what that means is it splits that 16X link into three segments.
So I can just have effectively three of the four slots on that NVME card will
work just as if they were plugged directly in through the motherboard.
All right.
That's pretty cool.
I'll toss a link to that, although it might be sold out on Amazon right now,
but I'll put a link to it in the show notes if people want to see this ASUS.
Yeah, what isn't?
Yeah, really.
That's part of why it was nice that you could use a board you already had
really.
Oh, I didn't, I didn't already have the motherboard.
I had the CPU.
Um, I think I bought the boards through Newegg, um, because, you know, in the
US and brought them over with me.
I see much cheaper that way.
Also, I could do all the testing at home where I have all my gear.
So you brought this motherboard through TSA.
Yes.
I also brought a Synology NAS, which I'll come on to later.
Oh, okay.
The guys in Raleigh didn't care about the Synology, but the guys in Chicago gave
me the, uh, 20 questions about it.
It's a bomb and an ass.
Well, they were, they were saying, so what is this thing?
What do you need it for?
I'm like, it's a computer.
And they said, what does it do?
And I said, it stores data.
And they went, what data?
And I said, movies, TV shows.
And they looked at me, looked at each other and just went, yeah, whatever.
And just let me go.
Thank goodness they didn't ask any more questions.
Yeah.
Like I was kind of thinking, so where'd you get these movies and TV shows from, sir?
I'll be like, hmm, uh, yes, I legally rip all of these things.
Wink, wink, uh, that's all creative commons content.
Actually, let me tell you about, yeah, it's all big, but bunny and then go into, yeah,
yeah, right.
Just lots of different rips of big bunny.
And then you just go into like a whole explanation of creative commons and hope
they just glaze over.
Yeah.
Uh, so going back to the motherboard briefly, one other thing that was really
difficult to find out before I purchased, that's actually really important is this
motherboard is one of the only, or one of the few that I could find that actually
supports IPMI and IGPU at the same time.
So what that means is the graphics card that's built into the CPU, which is where
quick sync lives, some IPMI implementations grab that monitor and then don't let you
use it for quick sync.
Basically, you need to go into a secret BIOS menu on this ASRock board and enable
IGPU multi-monitor support.
Once you've done that, it just works.
You get a BIOS screen through the terminal window in the browser, and you also get
quick sync support, hardware transcoding support through Plex and Intel GPU top as
well.
Oh, I could really use something like that here in the studio.
You know, the server went down, um, the studio server went down about a week and
a half, two weeks, three weeks into the trip.
I can't remember, but I basically used it for quick sync.
But I basically, the last two weeks of the trip, I didn't have the server and it
drove me crazy not to be able to see the console.
Yeah.
I love that it supports IGPU and IPMI at the same time.
I mean, when you're looking at all the stuff this thing does, especially if you
add that ASUS PCI MVME expansion card in there, I mean, it's 260 bucks for this
board on Newegg.
Yeah.
I mean, that's kind of, it's expensive, but a good motherboard right now during
a part shortage, not that bad really.
260 bucks.
Exactly.
COVID has me reframing what is expensive.
And if it's $50 more than what I'm comfortable spending, I mean, I was
looking for something under 200 ideally, but if it's in stock at this point in
history, that extra $60 is kind of worth it, right?
Well, and it really kind of, it depends on how you frame it too.
If you think of it as a server motherboard, it's a pretty good price.
If you think of it as like a gaming PC desktop motherboard, that's just sort of
an average motherboard.
It's expensive, but it doesn't have any LEDs.
So gamers aren't interested.
I mean, it's not like it's, it's not like it's the be all end all server
solution, especially because it's a, you know, it's a micro ATX, but.
Geez, it's pretty great.
And the fact that you have IGPU, you get quick sync and you have IPMI.
That's a great choice, Alex.
I mean, that seems like a board that's going to run a box for you for years.
And that if you ever have any troubles, you're going to be able to remotely
figure out what's going on through IPMI.
Yeah.
And the nice thing is I think I'm going to have that board in the UK and the
US, so I'm going to have hardware parity between two systems.
32 gigs of RAM in the UK and 64 in the US, just because, you know, at home,
I do a lot more stuff than I will do with a remote backup box.
And then are you doing Proxmox as the host OS?
I am actually in both places.
Yes.
And the reason being is I've run into a couple of issues and I do only mean a
couple where I use ZFS, as you all know, to do my remote backups and Jim Salter's
Syncoid tool to kind of manage the snapshot replication.
I've run into a couple of issues where when I had the old server set up, it was
running Ubuntu and therefore the version of ZFS that was shipping in there wasn't
exactly the same as the version that was running on Proxmox on my US server.
And so I ran into a couple of issues where Syncoid failed because it was
trying to send across a dataset with feature flags that didn't exist on the
target system.
And so just having Proxmox in both places means that I'm a lot less likely
to run into any idiosyncrasies like that between the two systems.
The other thing as well is that I've been trying to get my dad on the home
automation train for a long, long, long time. And I think when I arrived, he
gave me a whole rundown of how to turn off all the lamps in his kitchen, which
is where we all hang out in his house.
You mean like for all the switches?
Yeah, there were six individually switched lamps I'd have to walk around
and turn off one by one.
You know, having to walk somebody through how to use physical switches makes me
feel a little bit better about walking people through how to use the automated
home assistant system.
Yeah, I mean, we're talking, I would have to walk to each different corner of
the room. It's not even like it's six switches on a single panel next to each
other. So as you can imagine, I was like, hmm, I can do better than this.
So I went on to our sponsor, My Local Bytes, and hit him up and he gave me a
discount code, self-hosted, by the way, it's a discount code on that. And I
ordered some some gear from him. I ordered six smart plugs, a ZigBee
transmitter and a couple of ZigBee buttons. And my dad now has all of his
lights in his kitchen, well, the lamps anyway, turn on 45 minutes before
sunset automatically, and they turn off at midnight. But I also thought it
would be nice to give them a button to control these things. So I'm running
the VM for home assistant on the UK server on Proxmox, much like I do
back in the US.
And running their whole OS stack?
Yeah, yeah, I actually really like it. I know conceptually and fundamentally,
I have some issues with people making their own operating systems. But damn,
is it convenient.
Right, the supervisor, the snapshots, all of that is it's really great. And
it makes it super easy to like restore if something goes wrong. I get it. I
think I think running in a VM is the way to go.
And so now he has a couple of ZigBee buttons that are magnetic. I went to
Ikea actually just down the road from where he lives and bought a couple of
the trad free Ikea ZigBee buttons, paired them up with the ZigBee stick
that I got from my local bytes. And it just worked. You kind of pick out
this. It's like a Mac address, but it's like an ID that looks like a Mac
address on the ZigBee network that's created. And the ZHA plugin that's
built into home assistant picks up the ZigBee device, and then you just
create an automation that is triggered by that button press.
And you went ZigBee, not Z-Wave. I think that's a good call. Was it just
because that's what was available? Or did you actually actively choose
ZigBee over Z-Wave or Wi-Fi devices? Well, I guess I did actively choose
it, but not through much research. I was just speaking to the guy behind
my local bytes and he said, you know, we sell ZigBee buttons, right?
Yeah, I think ZigBee is the way to go. And I think they're more reliable
than Wi-Fi devices and you can take down your Wi-Fi network and that stuff
all still works. And of course, I'm a fan of ZigBee because it's an open
protocol and it's what they use on Mars to communicate between the rover
and the helicopter. It is absolutely, yeah. It's, you know, those
those trad free buttons from IKEA, they're six pounds a pop. I think
they're about eight or nine dollars in the US each. Yeah, you know, for
that price, I could have 20 in my house without really much thought.
I think there's two philosophies when it comes to home automation. And I
think one philosophy is design it in such a way that you never have to
touch it. Like the whole thing's automated and you should really never
need to interfere with it. If you ever do, there's a dashboard. But then
the other, I think, very valid approach to home automation is using
buttons for stuff. And I think that's why there are some brands out
there that specifically sell solutions where there's still switches. And
that's why you and I have looked into devices that we can install on
the wall so we can still use switches. Because when you have physical
controls, it adds a whole nother dimension of what you can do with
these buttons. Like you can set things so that if you three tap that
button, it could do a totally different set of functions. And you
have all of this kind of flexibility when you add physical buttons and
people people have written into the show and laugh like you guys who
automate all this stuff. And then you add buttons back in there because
I've talked about this in Lady Joob's. And it's like, nah, man, you
add it where it makes sense and you remove it where it doesn't make
sense. And, you know, your folks are going to be used to buttons. They've
had buttons their entire life in their home. And so if you left that
place and didn't put those things in, they'd probably rip it all out and
just go back to using buttons again and turn stuff off and the
automation be screwed up. And it just wouldn't work because they're
used to it. I'm comfortable with pulling a phone out my pocket and
opening an app and swiping and swiping and tapping or shouting to an
assistant in the air, you know, you know, hey, hey, tube, turn on this
light. I mean, you could do that, too. Yeah. And also, you know, I
think about the home assistant cloud subscription. I pay that at home
out of my own pocket. I don't necessarily want to have to do that
for my parents as well to get the Google assistant support put in
there. And neither do I want to open up their firewall, even port 80
or 443, whatever would be required to make that work for for Google
that way. So whilst all those things are possible, I haven't
enabled Google support for them. I kind of don't want to either. I
want to keep it super simple. Like you push this button, your lamps
turn off. I mean, it's that simple. You know what I appreciate about
you, Chris, is that I woke up on British time to a bunch of messages
in our private J.B. chat team chat that we have. And I know your
Hollywood server has been offline for a couple of weeks. Yeah. Yeah.
You've been home for what, an hour? And you'd fix that bad boy. That's
right. We got we basically got our RV lady joops parked. We got her
hooked up to power. And then I jumped in the car. I ran down to
the studio. I'm like, what's going on? And I think, you know, I
don't know, Alex, it's like maybe it's the X server admin in me from
years past. But just knowing that my servers down drove me nuts, even
though like I had taken steps to replicate the essential
functionality, just knowing it was down and not knowing what state
it was in and was in some weird state where the fans were blasting
or what, you know? And so I very much wanted to solve it. And I
clearly have to get rid of it. And I think I have a plan. I'm still
waiting to put all the pieces together. But I feel like in the
next month or two, I'm probably going to build or buy a new
server and go through this whole process. And then I got to ask
myself, like, do I want to put Arch back on there? Do I want to do
Proxmox like you're doing? And do I want to put WireGuard on a
separate machine? So that way, when my server goes down, I can
still get into the network. A lot of things to think about. So I'm
just starting that process.
What went wrong with it?
There was a power outage at the studio. So there's two power
supplies. And one is plugged into a UPS and one is plugged into
the wall. And there's a funky old tech debt reason why. And I
think when the power went out, it got in some sort of funky
state where one power supply was down, but the other one stayed
on for a while. But then eventually, the UPS ran out of
power and it shut off. Or maybe it didn't shut off. I'm not
exactly sure because I wasn't here. But when I got back, it
was frozen. The system was locked up. And it was just a
constant beep, an error message, just a solid error message,
like a hardware error. And there was a red light on the front
of the chassis. It's a super micro. And when I turned it off,
the beep persisted. So I actually physically unplugged
the power supplies and then I plugged them back in and then
booted it back up. And it's been fine. And I just think it's
dying slow death. And so it has been unreliable for about five
to almost six months now. And so I think this is just part of
a old server's slow death. You know, what's funny is we were
talking to Matt last episode about high availability and
redundancy and all that kind of thing. And it's interesting,
you know, you've have dual power supplies in there,
presumably for that exact reason. And yet, you suspect
that might be the issue. Who knows? Don't really have like
great like Intel or information from the system logs because
everything that's happening was external to the box. But yeah,
that's going to be a project for sure. And so you mentioned
WireGuard. I'm going to walk you through what I've been
doing in a minute with WireGuard and Tailscale. But
before I do, what are you planning on doing? Or suppose I
should ask, what do you do for a firewall at the studio? Now,
we have a Comcast business router, that's the firewall,
it's nothing special. I have thought in the past about
replacing it with like a PFSense box or something like that.
However, as time has gone on, I've really found it fairly
acceptable. So I haven't replaced it yet.
You know, the only thing I would say is, go ahead and do
OpenSense or PFSense for a little bit. There is a community
plugins repository, maintained by the same guy, I think that
writes the WireGuard plugin for OpenSense, that lets you put
AddGuard home directly on the firewall as well. So that's
what I've been doing for the last few weeks. I've been
running AddGuard home on the same box as OpenSense as the
primary DNS server. So I've disabled unbound on OpenSense.
And I'm now just using AddGuard home and it, it works fine for
me. But the real advantage, the real advantage is I've got my
DNS, my DHCP, and my VPN endpoints, all on the same
box. I suppose you could argue it's a very large single point
of failure. But it's actually incredibly convenient.
Oh, for sure. And you don't need 100 boxes. I'm a little done
running a separate Raspberry Pi that has PiHole. I love it. I
think PiHole is great. I actually like it a little better
than AddGuard myself. However, it's, it's drawing power. And I
just don't need, I don't need three Raspberry Pis running 24
seven when I'm running off a battery. And I would much
prefer to consolidate that down here. Now at the studio, power
is not as much of a consideration. It's then just
more about functionality and flexibility, stability, surely,
and stability and stability for sure. I have been thinking
about moving WireGuard off on its own device. And if I did do
an OpenSense box, and it'd be pretty nice to have AddGuard on
there too, and then also do WireGuard, I'd be checking a
few boxes. So I think I may consider it. I was actually
originally planning to set up a Raspberry Pi. And I was even
thinking of trying to come up with some sort of failover
capability for the Raspberry Pis to do WireGuard, which I
think would be particularly tricky.
All right, well, here's another idea for you to bounce around
your noodle. I've been looking at something called tail scale
for the last few weeks. Now this is born out of a requirement
to run on a Synology box, which, as I'm sure you know, are
quite restrictive. And then they're not full Linux, but
they're sort of kind of Linux. And they sort of kind of do
some things. And anyway, it's a bit of a mess, to be honest, as
a Linux guy to try and come and make this system do what I
want. They run Docker, so I can run, you know, Minio to do
auto-resting backups, all that kind of stuff to Synology
remotely. But that's no good if I can't connect to the damn
thing over some kind of a secure tunnel. So I've been taking a
look at something called tail scale. And this project is
absolutely awesome. It has clients for Mac, Windows,
Android, iOS, Linux, you name it. And this thing, I got
further in about 10 minutes connecting up all of my
different devices and servers than I had in, I know, a year
plus of trying to futz around with WireGuard configs. This
thing lets you advertise different routes and different
subnets, just with one simple command on the command line. So
for example, I'm sat in Raleigh, and I want to connect to
a host that's in my dad's network in England. I don't have
a direct connection from my laptop to that host. But what I
can do is I can bounce the traffic through my UK server,
which routes through the tail scale network using something
they call Magic DNS. And then it pops out the other side, the
remote server then goes, Oh, yeah, you've allowed access to
192.168. whatever the subnet is in that LAN. And it lets the
traffic out from my local laptop to the device on the
network. In the remote side, I can also then advertise what's
called an exit node. If I want to route my traffic over the
internet to come out in England rather than the US, for
example, for iPlayer, I can just with a click of one button
in the tail scale client on my laptop, change between the
different endpoints that I'm exiting at. It's really, really
simple and really slick. You should give it a look.
So is it essentially then creating a mesh network between
your machines? Yep. Uh huh. And do they have a server
component that they're running that is involved? It uses
WireGuard under the hood. This sounds pretty slick. So they
must have a component that is doing some of the client
negotiation, maybe key exchange, like they must have a server
side to this that's involved to help coordinate all of this.
They do. It runs on their servers. And it's, you know, an
intermediary that you have to trust, I suppose, as part of
the, you know, product that comes out of the box. However,
there is an open source, self hosted implementation of these
third party witness nodes, whatever you want to call them,
called headscale. We'll put a link to that in the show notes.
And you can self host this thing. And this will become
something you would, for example, run on Linode. And
then all of your different devices would talk back to that
central host for discovery. And then from there, they do all
that clever routing between each other. And it looks like the
way the system works is the private keys are generated on
each node. So it's not like they have access to those private
keys. And then it's using WireGuard as the back end
implementation. And it looks like on some operating systems,
or maybe all they're using the WireGuard go client. I mean,
all that's really solid night, I find WireGuard to be extremely
trustworthy and very performant as well. So that's kind of a
win win. So it's tailscale.com. To see more, I would have
accidentally locked myself out of my US network a few days
ago, I was working on the site to site WireGuard VPN. And for
some reason, when I brought up the interface in Raleigh on
open sense, the second WireGuard interface would cause the
primary WireGuard interface to go down, I still haven't
figured out why. But without tailscale running on a VM
inside my network, I would have been totally locked out. There
would have been nothing I could have done. Luckily, I was able
to read all my traffic through the tailscale system, get shell
access back to open sense and then fix it from there.
Nicely done. That's a good little score, Alex. Tailscale
have a link to that in the show notes. And I think I'm going to
try it out after the show today because they have a ARM
version for Linux on the Raspberry Pi. I knew you'd like
it just because it has Raspberry Pi support, you know, you're a
you're a cheap date. You do know me well. That's very true.
Linode.com slash SSH. Go there to get $100 in 60 day credit on
a new account. And of course, you go there to support the
show. And we love using the cloud where it makes sense.
We're all about self hosting on the show. But there's clearly
a role for cloud. And we just practically make use of that
whenever it seems like the way to go. And Linode is always the
place we deploy. They have super fast infrastructure. In fact,
they've just recently invested more in the infrastructure and
in their block storage. They've put in brand new screaming fast
MBME drives. They are their own ISP. So they own the links
between their 11 data centers around the world on their
dedicated CPU rigs. They have super high end AMD epic
processors that kick the butts of all the other cloud
providers. I mean, they take the infrastructure really
seriously. And I had a server outage here at the studio, our
physical server here in the garage. And I knew things were
looking kind of bad. So I just set up a Linode with the very
bare essentials that this box does. I just set it up ready to
go powered off. And sure enough, turned out like it's out there.
It's out there for a few weeks. And I thought, oh, maybe I'll
go through this whole road trip and I'll never need to fire it
up. But no, the last two weeks of the road trip, I ended up
signing into my Linode dashboard and firing up that backup
machine. And I was so thankful I had it. And when you look at
Linode's pricing, 30 to 50% cheaper than like the big
duopoly hyperscalers. That's a great value. And if you want to
deploy Nextcloud, for example, and you want to see if it works
for you, and maybe you don't want to spend several days
learning how to set up the entire Nextcloud stack. Well,
if you go to linode.com slash SSH and you create account, you
get that $100 credit, you could deploy Nextcloud in seconds.
They have like a one click deployment for Nextcloud. They
have one click deployment for discourse if you want to go
build a community. Or maybe you're looking at replacing
Zoom with something self-hosted. They have a one
click deployment for Jitsi as well. And I think you'd be
shocked at how great a self-hosted Jitsi instance is
and how much better it can be than using Zoom. And it's way
cheaper if you want like the pro Zoom stuff and you're in
control. They have a lot, way more than I could ever list,
just one click stacks, or you can go the DIY route. It's up to
you. Development tools, game servers, Linode makes it easy
to get going. And then they have a bunch of great services
like S3 compatible object storage, which is fantastic for
backups, DDoS protection, VLAN support, a powerful DNS
manager. I mean, on and on and on, you guys. So I'll just
leave it to you to go figure it out to go try it for yourself
because I know that's how I learned. So go to linode.com
slash SSH, get that $100 in 60 day credit on your new account
and you support the show. Linode.com slash SSH. So after
road trips, I always like to ask you what your learnings have
been and stuff like that. And I would imagine the primary theme
from this trip was managing heat. Oh my goodness. Yes. When
you were on your way to Chicago, I was trapped in Tucson
where I think every day was at least 105 degrees. It just,
you know, maybe we get down to 88 Fahrenheit at night. It was
so brutal, Alex, that we would go 5000 feet up. We would drive
up Mount Lemmon and we would stay at the top of Mount Lemmon
where it would be about the temperature of the Pacific
Northwest and we would just sit there and wait for the data
pass. Um, it was really hot. How tall is that sucker? I think
it goes all the way up to 8,000 feet. Oh, I bet that was
really nice in that climate too. Yeah. Oh man. Cause at the
bottom it would literally be 105 and at the top it'd be like
66 degrees. Did you do that thing where you got in the car
at the top of the mountain with the AC running? And then when
you get out at the bottom of the mountain, you're like, oh my
God, what is this? Boom. Hits you in the face too. And they
were also experiencing record humidity as well. So it was
just gross. And all of my automations around heating had
to be disabled. Everything had to go. And um, I realized this
was an opportunity to kind of redo how I automate heat with
home assistant. So traditionally I've had a series
of automations that would have conditions like sunset and
sunrise. And then depending on the state of the sun, they
would either kick on or they would kick off. And this also
kind of fell apart because I don't yet actively update home
assistance location when I'm going down the road. I need to
do that. I have a couple of different ways I could solve
that problem. But right now when I'm, when I'm in Denver,
Home Assistant still thinks I'm in the Pacific Northwest. And
when I'm in Tucson, it thinks I'm in the Pacific Northwest.
So it is going by the state of the sun in the Pacific
Northwest. And so all of my automations were offset around
heating for that reason as well. I realized I needed more
control. And over time, my wife has said, sometimes she's like,
you know, the automations work really well, but sometimes I'm
just in a mood where I just want it really toasty in here.
And I find it hard to do that because the system will turn
off the heaters. Once it reaches, I have like a 70
degree cutoff where all the heat turns off an automation for
that. So I decided to take this opportunity after I disabled
everything while we were on the road and definitely did not
need heat to instead of re-implement the traditional
automations I created almost two years ago now, I would instead
replace them with the Home Assistant generic thermostat
entity. And this is something the audience has written in and
told me to do for a while. I've been intending to do it and I
am so, so glad I did this. It's like I have my own homemade
Nest thermostat now. All it requires is you need a sensor to
give it an input. And I have sensors in every room. And so
you tell it which sensor to monitor and what numbers you
want, you know, when the sensor returns this number, turn it on
and turn it off. And what smart switch you want it to flip on
and flip off. So you need a sensor and a smart switch.
That's it. And then anything that you plug into that smart
switch will get cycled on and off. And so I have oil
heaters, these really nice small portable compact oil
heaters that give off this wonderful radiant heat. And
Home Assistant now monitors the temperature and it gives you an
interface that is a thermostat interface and you set what you
want the temperature to be and it will cycle the power to the
heaters to maintain that. And you can define things like make
sure the minimum cycle length is 90 seconds so they're not just
flipping on and flipping off. And then you also have a really
nice interface to just turn them off completely. Sometimes in
an RV specifically, when you're cooking and you've got a lot of
high voltage appliances going, maybe a toaster oven and a
slow, you know, an instant pot and you got a toaster that is,
you know, pulling 1000 watts. You got an instant pot that's
pulling 1000 watts. You don't necessarily want your space
heater kicking on that also pulls 1000 watts because
you'll trip a breaker. And so now in Home Assistant, we have
a tab in the dashboard that is just all of the thermostats,
which are there are four of them and you can turn them off
so they do not automatically cycle, which was never really
an option that my wife had before because she wasn't
familiar with going into the automations and turning
automations on and off manually. So now she can just
hit the little button to make sure the heaters don't
automatically cycle on, which is great. She also has a nice UI
to turn up the heat. But then the brilliant thing about Home
Assistant is if you connect it with HomeKit, you really take
things up to the next level for all of the users in your home.
So now Home Assistant automatically publishes these
thermostats to HomeKit on all of our devices that are in an
iCloud family plan. So my wife, the moment I turned these on
had those buttons on her iPhone. She just pulls down the
control center. There's the thermostat buttons. I mean, it
just made it crazy easy for her. Additionally, now all of
those things are verbally addressable with Siri. So she
can say, Siri, set the bedroom heater to 75 degrees or Siri,
what is the bedroom heater temperature? And Siri will read
back the sensor information to her. It's very simple and it
displays the temperature now in her control center on her
iPhone. When she pulls that down right there, she taps on
it. It gives her this really nice UI because it's a HomeKit
UI. So it's all built in to manage the thermostat
temperature with colors for when it's getting hot and all
that kind of stuff. And she doesn't even have to touch the
Home Assistant dashboard if she doesn't want to. And anyone
now in the family can ask the Siri tube to make it warmer
for them. I didn't even consider that when I set up this
generic thermostat, but it's great. But then I capped it all
off and I would love the audience's feedback on how they
do this with two automations that monitor the sunset and
sunrise. And so two hours after the sun rises, the
automation sets all of the thermostats to 65 degrees. And
then an hour before the sun sets, the automation sets all
the thermostats to 71 degrees. So that way during the day,
we're not running the heat more than we need to. And I'm
thinking about layering on top of that once I get accurate
location information. I'm thinking about layering on top
of that when we're away, just turn them off, those kinds of
conditions. But Alex, there's lots of thermostats. There's
lots, lots of different integration options, lots with
thermostats and Home Assistant. But this generic thermostat is
so flipping brilliant because all you need is a switch, a
smart switch and a temperature sensor. That's all you need.
And you can turn anything into essentially like a nest like
here. So my thermostat already has an API that I could call
via curl. Can I use the generic thermostat thing paired with
those Xiaomi sensors that I have? Sure. If you, when you
curl it, if you get the temperature and you can parse
that and pass that through as sensor data, you absolutely
could. Interesting. Well, I will give that a try when I get
back home. I'm going to do this in the studio for the smart,
I have fans in the windows that are connected to smart plugs
and I just manually turn them on and off with Home Assistant,
but I can manually turn them on and off. This would be great
to have a temperature. Just swipe down from your control
center and using the HomeKit, darling, right? Yeah.
Now, if you're looking for a great place to go and get some
self-hosting smart gear pre-flashed with Tasmota, check
out our sponsors, cloudfree.shop and mylocalbytes.com.
Both of these guys are listeners of the show who have
started small businesses and we want to help support them
running these small businesses. They have a whole bunch of
gear pre-flashed with Tasmota. Like I said earlier in the
show, I actually this week bought a bunch of stuff from
mylocalbytes.com to kickstart my father's home automation
desires. Spent less than a hundred pounds and I was able
to automate a good chunk of his kitchen lighting experience.
It's well worth taking a look at this stuff and it's running
Tasmota. So, you know, there's no setup or configuration
required out of the box. It's broadcasting a Wi-Fi access
point. You connect to that, you put in your Wi-Fi information,
your MQTT broker information and boom, you're off to the races.
So go over to mylocalbytes.com and cloudfree.shop and check
out what those guys have to offer. Don't forget to use the
coupon code self-hosted so that you get a simple discount off
your order and that they know that we sent you.
You mentioned it earlier, but it sounds like you were doing
some work on that Synology to get ready for the trip too.
What'd you do there?
The Synology box is going to my mom's house, which will be
yet another offsite backup. But the reason I wanted to do this
was I have ZFS doing its thing, you know, snapshots and
replicating to the UK. If for some reason that whole ZFS
system goes tits up, I thought to myself, it would be nice if
I had a completely separate versioned backup that's in a
totally separate ecosystem. And so I've been looking at the
project AutoRestic. Well, actually, technically AutoRestic
is a wrapper around Restic, which is a tool to do remote
backups and versioned backups to a whole bunch of different
endpoints. But the one that I'm going to be using is called
Minio, which is a local S3 API server, effectively. So I'm
sure you've all heard of S3 storage on Amazon. It's, you
know, what Linode calls, I forgot the name.
S3 compatible object storage.
Oh, well, that's a good name, isn't it? Yeah. I wonder where
they came up with that. DigitalOcean, all the rest of
them have that kind of thing as well. So most people offer some
kind of S3 compatible API. Essentially what it means is it
stores data in objects, small little blocks of data. Now, I
wanted this data to be encrypted on the remote endpoint
and Restic handles that totally transparently. But the really
nice thing about AutoRestic is using a simple, probably about
20 line YAML file, I've been able to configure the rotation
policies, the pruning policies, all the different data sets that
I want backed up and where it's not a data set in Restic land,
it's just a directory that I wanted backed up to the remote
system. And then I'm running Minio as a container behind
traffic on the Synology, which is running DSM 7. And I've
written a blog post, which I'll put in the show notes about how
to configure traffic to do a whole bunch of stuff with
Synology DSM 7. So I've got Minio running through traffic
on the Synology, which I then have a DNS entry on my US
server through tail scale, which is then able to route all
the traffic and punch holes through NAT, all the way
through to the Synology box that's living at my mom's house
now. And so I just have two separate totally separate UK
backup systems on totally different paradigms. Alex, that
might be the ultimate offsite setup with when you consider
you have both locations and one location is like an exact
hardware match. And so you can do AB testing and another
location is a totally different ecosystem that still well
managed, gonna run forever. Like, yeah, you are set for
years. I think it's one of those things. I think I'm
probably over egging the pudding at the likelihood of
Basingstoke and Lancaster and Raleigh all going, you know,
south at the same time is probably very unlikely. But if
it happens, I'll be okay now. You can go find our friends at
Cloud Guru on social media. They're just slash a cloud
guru everywhere, like YouTube and Twitter and the Facebook
and pretty much anything that's a social network. Go find
them. Social network slash a cloud guru. Now I know I've been
banging on about it all episode, but I'm back in the UK
this week, and it is glorious. So I'm actually gonna be
meeting up with a couple of listeners in the Norwich area,
a place called Brecklund Lodge on the A11 just outside
Attleboro near Norwich. We're gonna be doing that on Tuesday
the 28th of September at 6 PM UK time. So if you wanna come
say hi to me, Gary, who was on late night Linux a couple of
weeks ago and a couple of other people said they were already
gonna be there. It's a bit of an impromptu meet up. We hope
it be nice and small just for COVID safety, that kind of
thing. But if you wanna come say hi, I'll be there and I'll
be wearing my Chris and the Badger T shirt. Nice boy. You
guys have the best names for places over there. They're so
adorable. We'd love to hear your feedback and your ideas
anything that caught your attention self hosted dot show
slash contact. That's the place to get in touch with us and of
course, you can find me on Twitter. I'm at Chris LAS and
I'm there at ironic Badger and as always, thanks for
listening everybody. That was self hosted dot show slash 54.
