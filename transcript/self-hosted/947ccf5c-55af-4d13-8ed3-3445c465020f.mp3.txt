Coming up on the show with rage in our hearts. We proclaim a self-hosted Google Photos replacement and
The only way to conceivably self-host your own email with a caveat. I'm Chris and I'm Alex and this is self-hosted
I've been looking at buying my wife a Nintendo switch now
I know that you've got one
But I can't find them in stock anywhere and I'm trying to decide between the switch light and the switch like full
Version talk me through these options. This is perpetually the problem with Nintendo. I can't believe they still are having stock issues
I know they sell very well
But I always wonder if this is like part of Nintendo's marketing strategy to intentionally always leave high demand
so yeah, we own a few switches in the family because
You know, sometimes it's more fun when you have multiple switches
It really comes down to this if she's gonna have a dock most the time
I don't think it matters if she's gonna carry it around and use it and actually play on the screen. The light looks kind of nice
I don't have the light. I have the regular sized one because I wanted to install Linux on it
Of course
So do that, I think you can with the older ones
I so there was a hardware fix that Nintendo had to issue so I bought right before the hardware fix made it out
You know, like I was watching the news and this hardware vulnerability was discovered and I knew it would be a matter of months
and so I ordered one and then
Surely like that that week almost they had had announced that a new
revised model
How's that going? Is it your portable Linux system your go-to? Oh, yeah all the time
No, never even tried because the games are great
You're so funny
Yeah, it turns out so I say whichever one you can get your hands on you're gonna be happy with you may try eBay, man
Maybe I'm sure somebody's got it on eBay. Yeah, there's a lot of scalpers though. I don't want to pay above retail
Maybe a listener has a used one. They'd sell you for a good price. Sure
Get in touch ironic badger on Twitter. Yeah, or you can hit the contact page or something
I want to mention that this episode is brought to you by the all-new a cloud guru the leader in learning for cloud Linux and other
Modern tech skills, you can get hundreds of courses thousands of hands-on labs. You can get certified get hired and get learning
You just have to go to a cloud guru calm
Well Alex, we have several cool topics to talk about cool
I'm dating myself there when I say that we have some some cool topics Alex. Um, we thought maybe we'd discuss two big
areas of self-hosting for the home and
Photos being one of them, especially with the news about Google photos
which we'll get in get into later and Audiobooks which you and I are both pretty passionate about and there's a couple of different options a
couple of different self-hosted solutions you can throw at these problems and
It kind of I think maybe is best to start with like the awkward
Elephant in the room that we just kind of have to address getting hold of the audiobooks now
one of the goals of this show was to
Showcase all the things you can do a self-hosting and avoid piracy. Obviously, that's a hot topic
and it's it's not something that I really condone or anything like that, but you know
for me, I think audiobooks are
straddling a fine line because
Let's say we're using audible and I certainly think that's what you and I both are using
You pay for credits every month. I think they're about 10 bucks or 15 bucks a month
for a credit that credit allows you to buy in their terminology buy a book
Except for the fact that that book is locked into the Amazon audible ecosystem
Until the end of time and we've actually had this happen
that
Audible have decided to remove a book from our account because the publisher has changed
The terms of the agreement or something and you know, this is fairly common and pervasive among streaming providers with
Licensing deals changing all the time and stuff like that. So this isn't you know, it's not a new problem
But one of the things I really like to do is download the book from audible that I've purchased
And strip the DRM from it and then I own it forever. And um, i've been an audible customer for I think 13 years
It was something like that. It's been a long time. I still have an active subscription
And about once a quarter I just download my latest purchased books and I store them offline myself
And I use a tool called open audible to do that open audible is a 12 shareware
product and
It requires that you have an audible sign-in a valid audible account that you log in you sync your library down
And then it will identify each of the books. It'll pull down the information about the title the description
Album art and if that's what you call it on a book cover art, I suppose and then it it begins the cpc
You intensive process of removing the DRM and saving you a playable
Audiobook that you can use in anything that that plays back essentially m4a's or mp3s
I use another option and this is a windows option called inaudible
And this one lets you divide things up into you know, separate files per chapter
as well as embedding cover art and stuff like that, uh removing the
This is audible in the first place
removing the this is audible, you know intro
Uh and that kind of thing. It's pretty nice. Um, I don't know where I got it from
I think a friend on discord somewhere a few years ago, but it works pretty well
That's like the modern version of in an alley from a shady dude with a van. Yeah, it is but uh, you know
laws will differ
Based on where you live as to as to the legality of doing this and I think there's there is um, other
Outlets besides audible where you can get audiobooks. In fact, I have a batch from core doctora that I just bought directly from him
So there's multiple ways of course to get audiobooks. So once you have these audiobooks
you have to be able to play them back and
Playing back an audiobook is it's a special beast
It's not like playing back music you want to be able to play back and resume your position. You maybe want something that supports chapters
Perhaps you'd even like something that has a sleep timer
If you have some books you go to sleep with like I do I like all these features to be built in
Uh to my to my audiobook player and i've managed to get that to some degree of success
I'm curious what you've employed in this area for playing your own self-hosted audiobooks
Well, the primary consumer of audiobooks in this house is my wife. She is a vociferous reader
And that extends to listening to books as well because obviously you can
Listen to audiobooks whilst you're doing the washing up or or anything else, you know
And she uh has been using now for several years book sonic
So I I host a book sonic server out of a docker container and this is based around the old subsonic
code base, but there have been some tweaks as you say, you know to provide support for
Remembering last playback position also supporting the chapters and that kind of thing and and the offline caching
Aspect of audiobooks, which is which is really important particularly on mobile devices
So my wife is a google fi subscriber. So every gigabyte she uses when she's out and about she has to pay for
So it makes a lot of sense for her to cash an entire book at once listen to the book
And then no matter what wi-fi network she's on when she's driving or or anything like that
There's no data cost associated with that. So there are book sonic apps available for android and ios
They're a little bit basic in terms of the ui, but their functionality is is top notch and very reliable
and uh being based on subsonic
there is a
Web ui to the container as well, which you just access in a browser and you can play your books back that way as well
Well, that sounds like a winner book sonic right there
Um, i'd say a low hanging but not ideal
Approach might be to integrate it into plex if you already have something like plex set up. I don't like it a lot
It doesn't have a sleep timer for one thing. There's other issues along with playback, but it does does remember the position
And it is nice to have all of my books displayed up on the tv. I do enjoy that
I voted for audiobook support in plex as a plex pass subscriber
The best part of a decade ago on their forums and it's just gone nowhere
There are some threads, uh on reddit, which if I can find them i'll put them in the show notes, but
There are threads of people that have gone to a lot of effort to shoehorn audiobook support
Uh into plex which includes stuff like a metadata agent
The nuances come in when you want to start marking chapters as played
That sounds a really simple thing, but the way plex marks things as played is once you get over a certain percentage
I think it's like 90 or 95 percent. It marks the episode
Or track as played which if you are, you know watching a tv show and you just turn it off before the credits are done
Or a movie, you know that five percent is is within the margin of error where most of the time that just works
So you've got a few different ways to slice up an audiobook. You can have one monolithic file. That could be 20
30 hours long
Or the chapters could be a few minutes long
And so that margin of error suddenly goes from being you know on a multi-hour file from being a big margin to being
You know 30 seconds, which if you pause your your playback within that percentage
Plex will mark that chapter as played and you'll miss that percentage of that chapter and it'll take you straight to the next one. So
It's not perfect. Nope, not so much
Um, you can you can do it you can get by but I don't think either one of us really recommend it
But staying on the topic of mobile just for a moment on the ios side. I really like and recommend book player
It plays most audiobook formats and mp3 audiobooks, obviously
It's an ios app that has multiple ways to import the audio files into the app
It has some basic functionality like you'd expect like changing the playback speed
Sleep timer then it has some quality of life features, too that I like it has volume boost. It has smart rewind
And it has carplay support and I really appreciate that
It's just called book player one word on ios and something else that I think is really great about it is it is gpl3
So it's open source. It's on github
And um, I think that's just nice to see on the ios platform as well book player
one word and um, geez, it's got a pretty
Pretty good for 4.8 rating. I hadn't really uh to pay attention to I was looking at it for the show
But that's pretty good almost a five-star rating for an app is pretty rare book player if you're on ios check that one out
I'm, looking at another one and this one does plug into plex and it's called prologue. Oh, yeah, which
Advertises itself and this is ios only unfortunately for me being an android kiddie
Uh, this one advertises itself as the ultimate audiobook player for plex on uh on ios
So a couple of options. Yeah, and I have this one
Um, actually haven't used it very much because I kind of just cooled on the old
Uh using plex for audiobooks approach anyways, but I I think uh, you know, maybe after the show i'll give prologue a
Another shot because I actually have the app already installed
Just hadn't really given it a shot yet, but it looks really good. The ui is pretty tight
um, and it
Claims and this is why I got it alex is it claims to solve that playback percentage issue that you were talking about?
Yeah, that's good. It's if it solves that problem. That is the biggest problem with plex and uh,
an audiobook playback, but what about on the linux desktop? Is there anything there? I like cozy
I'll link to the flathub installer if you want to give it a try. It's a minimal modern looking
Audiobook player so go in with expectations set to
minimal
But it does the basics right it listens to your drm free books. It has a sleep timer
It has playback controls for each book so you can set them per book. I like that
And uh, oh, it also allows you to do multiple storage location support. That's kind of nice
I have had scenarios where i've needed that before and you know, I like this offline mode
So you can just store something on internal storage this I think will also be a good mobile app for like the future
convergence where you have
posh
driven
pine 64 mobile devices, I think this is going to be a really good
pine 64 mobile devices. I think this may actually end up being a
A mobile audiobook player in the future as well. I'm sure those three people that do that will be really happy
Yeah, well
Yeah, and then their audiobook player will work on their desktop and their phone because it's the same one
Oh, i'm sorry to those three people if i've upset you
Linode.com
Ssh go there to get a 100 68 credit towards a new account at linode and you support your boys here at the self-hosted podcast
Linode is our cloud hosting provider
We spin infrastructure up to test on the show
But it also runs the back end cloud infrastructure of jupiter broadcasting and all my personal stuff is on linode
I started using them just over two years ago. And when it was time to take jupiter broadcasting independent
I said let's build it on linode and it's been fantastic
And you know, one of the things I love about them is they're independently owned
They were founded on a love for linux and open source technologies back then it was user mode linux
But of course they've evolved their system over the years to take advantage of the latest virtualization and container technologies in linux
They give you full back end access to your linodes when you spin something up
I used that recently to actually re-image the os drive of one of my linux linodes using their official how-to guide
And they have the tools that make all of that possible
I love that kind of stuff on top of the virtual servers though
They have object storage now if you're thinking about building yourself a super fast static website
Maybe for a resume for yourself for family for the holidays check out their object storage
I use their s3 compatible object storage to host the clips that I play on shows
So we will integrate the clips right into our show notes because our show notes are all written in markdown
I can embed audio files in line that actually are hosted on the node's object storage
You can use that for website assets. You could even use it as a quick cdn for your for your projects
Distribution. I mean think about it
There's a lot you can do with s3 compatible object storage when you're not paying amazon's prices
Linode costs 30 to 50 less than major cloud providers like aws
So there's a lot of advantage to going over to linode plus when you go to linode.com
Go to linode.com slash ssh you get that one hundred dollar credit
One hundred dollars and you also support the show. I mean it's like a win-win so check them out
Linode is dedicated to offering the best virtualized cloud computing if it runs on linux
It runs on linode and there's a lot you can do with that
You know, you know just go check it out and then tell me what you do
I've been asking people to tweet me at chris las or you can hit me up on the telegram
What are you doing with your linode once you spin it up linode.com slash ssh
Thanks to everybody who supports the show and supports our sponsor by going to linode.com slash ssh
Time for some feedback. Don't forget you can send in yours at selfosted.show slash contact
Our first one comes from jeff. Yeah friend of the show jeff
He writes and he says I have an ubuntu machine serving dual purposes as my home server and htpc
This is a chris side note. This seems to be a really super common setup
And if you think about it, if you really only have budget or space or whatever for one computer, why not make it?
Like a cody playback or a plex playback machine and a server or he lives in california where electricity isn't cheap
Yeah, although he does mess around with some solar so he might be able to figure that out
Uh, but uh
He goes on to say i'm running the next cloud snap in the background with plasma 5 as my tv front end
Since ubuntu's app completely breaks on me every time I use
use ubuntu seriously
Is i'm looking to rebase my system on something else I would like to move to next cloud to a containerized setup
But I failed to properly even set up the most basic docker images in the past
My biggest hurdle is understanding the database stuff and how they can connect not being able to just navigate file structure and see the files
Well, it breaks my brain and plus i'm using the next cloud snap
I'm going to have issues moving the files out of the bear of the database buried in the snap itself
Well by default next cloud does use sql lite for data storage. So that's kind of built into the container
You can also link a database of mysql as well. So maybe that's what you're thinking of
I I wonder if it's only him and a couple of family members like he says here in the email
Does he need to have a more robust database? I appreciate there's a performance difference
But there's also the simplicity. I mean this must be what the snap is using already now that I think about it
Yeah, it must be and and to be honest with you. This is uh,
This is one of my issues with snaps as a whole on the server
Right. I appreciate that snap install next cloud is very easy, but it's also
Dare I say I don't want to sound like gatekeeper here, but it's almost too easy. But couldn't you make that argument for docker? Well, uh,
Maybe maybe you could um
But I think there is a difference right with a with a snap. The the data is kind of
Baked in and it's a it's a not as much of an industry standard as docker is
Oh and with docker you have the data external of the image
And so you could blow away the container, but the data remains and also there is an official next cloud docker image with decent
Documentation that talks about volumes right from the get-go
whereas a snap is this kind of
And I i'm really reluctant to to to bash on snaps so hard
But they're just a black box and i've had to help several people extract data from snaps that got things up and running
That they didn't really understand what was going on under the hood, which is great
And I think in terms of enabling people to to do stuff that they wouldn't otherwise do is is a good thing
But the flip side of that is that you don't necessarily plan well enough to you know a data storage strategy
Which volume is going to go explicitly where all that kind of stuff. Yeah, and with docker compose you kind of have this
Reference guide you can go back to to see how you built things and where you specified the that the data volume was
And if you build a snap and you create the yaml file that does all that you would have that those same insights
But it's just a different workflow
He goes on to ask a question that I think maybe we could we could kind of help him with here. He says
Do you guys have any tips or resources to learn about this stuff as a home user level? I am no sysadmin
He doesn't do it for his day job
And he doesn't have a lot of database and container experience. A lot of it goes over his head
He's wondering if we have any tips to migrate his snap next cloud to a proper database
and
I kind of felt like the solution here would be to keep it simple
And start fresh with a next cloud container that uses an internal sqlite database
And manually migrate your data over because a lot of the like if you think about it the cal dev stuff
The the ical stuff all of that will just export just fine if you can do that
Just export it set it up fresh
In the container and then when you're ready move to a to a separate database as a separate project
Another option is to install an xcal client on a system
Sync sync down all your data
sign out of server a the snap server and then sign into server b and point server b at that directory and
It will just re-upload the stuff to the new instance
yeah, absolutely and the next cloud cli client is
The trick that i've used before to move next cloud server. So that is a good way to go and that's
Not bad jeff, and I don't think you need to solve it all in one go either. Uh, if you're talking
10 users or less you may find that the server is not going to be able to do that
10 users or less you may find that the sql light
performance is
perfectly adequate especially because he talks in here about maybe
Using a linode credit to build something and maybe set it up there
That instance is probably going to be so much faster than your htpc
That you'll never run into performance issues with the sql light database. It's super handy to have a uh
a next cloud instance running in the cloud on a linode or something like that because
it
It means if your power goes out at your house
It's still up if you don't want to punch holes in your firewall. It's available nice and easily
Outside the downside of that is it means it's outside your firewall, which means that people might be
You know port scanning you and bashing on it and trying to break into it. So
Linode has this kind of firewall feature where you can disable and enable certain ports and stuff like that
You know like you would in your home firewall
Um, so i'd recommend using that if you're going to put it in linode just to lock down the attack surface as much as possible
and then also consider from a data strategy standpoint now now you have
Your home system and you'll have an offsite system and now you can sync between them
So you could you could back up your next cloud linode instance locally to your htpc
And if you have some really valuable stuff on that htpc like configs or whatever
You could now back that up offsite to linode
So there's some data security advantages you could now also employ. So that's a probably not a bad way to go
Speaking of self-hosting. Do you want to take our next email do jit code is am I i'm butchering that do guys go?
Do you get code writes in I was listening to episode 31 and I want to disagree whilst still agreeing
With your opinion on the difficulty of self-hosting an email server
Uh too long didn't read you can still partially hybrid self-host your emails and gain benefit
Emails a wonderful stack of tech that's often built with the unix mindset of do one thing and do it
Well, and this is why I often encourage people to at least self-host a receiving email server
Whilst farming out the sending portion to an smtp relay like mailgun or amazon's ses
Yes, you know, this is why I actually did contact mail route and I said you guys should become sponsors of our shows
Because I really believe this setup is actually solid and every time we fail to mention it
I think about it after the show because if I was going to host my email and i've been thinking about it
Sometimes I would do it exactly like this. I would have mail route
sponsor our show guys right in front of
My email server and that would do all of the nitty-gritty sending and receiving and the spam checking and all of that
It would be up when my home system is down. It could do a queue
It would deal with all of the domain blacklist issues. And of course, they're a known good provider at this point
So they've been around forever
So if I were going to build email today
I would set up a LAN server that only receives email from the mail route service
Let's see. It doesn't receive email and the LAN it could receive email from the LAN
You've got to wonder how long it is before google cancelled gmail, don't you? No
Never never going to happen from an advertising perspective. I I know that but no, you know what?
You know what? I've been thinking about gmail
It's really about it's about the mining because you who doesn't have their receipt sent to their gmail account everything you purchase
That even if it's not through a google pay app or anything like that if your email
Goes to your inbox google knows what you've been buying
That's so valuable. There's no way they'll ever turn that off
It's true. I'll tell you what my mother-in-law's computer broke last week and I
Reconstructed what computer I built for her four years ago through my gmail inbox. So
It's useful. Yeah, so, uh, I I really like this hybrid email approach and I actually feel like maybe I may start adjusting
My future answer about self-hosting email is do it but just don't
don't be responsible for directly sending and receiving email and I
I I can't believe I didn't think of saying this the last couple times has come up on the show because
This is how I have built it for my clients in the past
This is just it's it's how I would it's it's how I would do it
And if you're willing to self-host your email, then you need to consider a good intermediary. There's mail routes one of them
There's other of there's like postini used to be one but google bought them
There's these that these intermediary services that become trusted well-established players in the email ecosystem
And they provide the sending and receiving they provide the queuing and it's it's wonderful
That's why they should sponsor because you could you could very successfully set up a system like he's talking about at the end of the
day though
You still have users that are relying on a service that really becomes integrated with their life
You know when they're emailing attorneys or they're emailing people at their church or they're figuring out stuff for their kids school
It's all happening on email
So even if it's just a few family members when you start hosting their email you
You really discover how much email matters when it goes out and that's a responsibility that you really have to take seriously
Yeah, it's a bit more serious than I can't watch plex
yeah, or even a chat system being down right because you can still pick up the phone and call but
The thing about email is it is a box of expectations and people can just drop an expectation in there
And so you can have people outside of your world that are sending an expectation into that inbox
And if your email is down and you didn't receive it
They still expected you that you got it and that you're going to be taking action on it and it has domino effects
Very true and now brian writes in saying hey guys
I've been using home assistant for about a year now and I really enjoy the home assistant segments on the show
I've heard you mention mqtt a few times and was wondering if you could tell me more about it and its benefits with home assistant
So chris, do you use mqtt for anything? No, that's why I really like this question from brian because uh, I have like
Uh home assistant fomo a little bit, but i'm well, I mean i'm almost
Two years into using home assistant now. I can't keep track anymore. I've never actually had the need i've gotten close to setting it up
But i've never pulled the trigger. So I I know you use it quite extensively
So I thought maybe you could kind of explain it to us since i'm obviously not
As hands-on experienced I understand in the abstract, but i'd like to hear from you. I use mqtt for my tasmota devices
However, more recently I found that it's becoming less and less necessary in the home assistant world
Simply because the native home assistant api integration is becoming that much more mature
So if you know a couple of years ago when I gave that first talk at linux fest northwest about home assistant and mqtt
And that kind of thing
There weren't as many native home assistant api integrations. And so it was a it was a lot more necessary back then
And so the thing that I use it for the most is for I think my tasmota smart plugs
Whenever they are doing something
They publish, you know, they're the amount of current going through the plug their current state, you know
The the last time they were rebooted all of these things get sent to specific topics as messages
What other mqtt clients can do of which home assistant is one of them is they can subscribe to those topics?
And react when certain types of messages come in so think of it rather than you know
Like the infrared remote kind of model where you you blast out information in the hopes that somebody's going to be receiving it
mqtt is doing the blasting of
Information but it's also able to contextually figure out whether that message was received
When it gets a certain response on a different topic, so you could have different states of things
Being received like a garage door. It could say garage door is currently open by publishing to a specific topic
A certain message that kind of thing. So it's it's useful when your iot devices need a two-way
kind of contextual
Awareness of each other and I think the other nice aspect of it is it's essentially
As lightweight as it gets and it's not necessarily dependent to run over tcp
But it most commonly does and that that subscribe model means that a low-powered device
Could only subscribe to the things that the topics that it absolutely needs to and so it doesn't have to maybe check in as often
And run the cpu as much which saves battery life. Yeah, and a nice example would be something
In the connected world where like my car tells my house to open my garage door
And start my coffee maker or something like that. That's that series of events needs to send a bunch of messages
Across a various different number of apis and and the idea behind mqtt
Was to unify those apis behind what's called a broker
So each of those devices the car would publish a message to the broker
Under a specific topic and then another device would be subscribed to that topic and react based on that message
And the nice thing is is the car doesn't have to remain online because the broker holds that message
Correct. Yep. Mm-hmm. Also another way to save battery life. It's nice. If you have some leds, for example
You want to know what color they are, you know home assistant
And others, you know, um
Smart lighting systems are only as smart as the last message they receive
because these
Devices are publishing to the topic all the time
They can say my current rgb value is this so home assistant without having to constantly publish
So home assistant without having to constantly poll the device
Is also aware of what's happening on that device just by listening
But like you were saying at the beginning with the amount of integrations that are available now
And a lot of the devices you buy today you can buy with home assistant integration in mind
I actually haven't been compelled to set this up yet
But I I imagine there will be a future some device something I want to do that just simply works better using mqtt
Uh, maybe it's maybe it's a tasmota plug. Maybe it's a shelly something like that
I could see pushing me into using it if you need it, you'll know
Our next question is about dns. Do you want to take this one? Yeah, and uh, this is kind of this is kind of a good
Tie-in because everything on a network always runs a lot better when your dns is in good shape ben writes in and he
He says he listens religiously, but he says we mentioned in our last show about hosting our own dns
I'm wondering what you run and why so, um, I generally will I mentioned it briefly
I'll generally self-host dns on any land that I run anywhere for performance reasons mostly because local dns lookups
That happen over your lan are faster than going out to your isp or even all the way out to google or open dns
It's just a simpler
Straighter shot doesn't even have to go out through a router
So that's one reason is performance
The other aspect of that of course is is everything caches that means that it has a lot of records
So if I go to a lot of the same places on my machines once one machine's gone there. I have those records locally
which also improves performance and
Additionally, I like to be able to resolve all of my uh machines by name if possible
So a lot of times i'll use whatever solution ties and integrates in with dhcp
So that way when the dhcp server issues a lease
It also then dynamically updates my dns server with that new client's
host name
Not all dhcp and dns
So systems do this but if there's like a if there's an option in the land i'm using that's straightforward
I go that route
There's a lot of ways you can do this. Sometimes it's dns mass
Sometimes it's just something built into a router. It sort of depends on the hardware and equipment you're using
I don't have any religious like devotion to bind or
Or anything like that alex. Do you have a specific like dns religion on your lands? I wouldn't go as far as a religion
I mean I I run
Open sense, uh, and I run pf sense for a long time
Open sense uses unbound as its built-in dns server
But to complicate matters, I also run
ad guard home
Which does dns level ad filtering across my entire network
So the way I handle this is my dhcp leases
Is hand out the ip address of the vm that's running ad guard home
ad guard home is then
Asked to forward any queries that it doesn't know the answer to to open sense and then open sense forwards any queries
It doesn't know the answer to
to
Cloudflare or google or whoever
And the reason I have to do that is because i'm running open shift and kubernetes clusters on my lan and I want to configure
the dns overrides in
unbound because they know because the router has the
The firewall has the knowledge of which ip address is belonging to which vm and mac address and that kind of stuff
But I also want the ad blocking capabilities of ad guard as well because mobile browsing is just a dumpster fire without it
so
There's lots of different ways. There's no right or wrong way to skin this particular cat. I actually wrote a blog post
on how to do this with
Unbound and pie hole a little while ago, which i'll put a link to in the show notes
Yeah, and to directly answer your question ben I at home am presently using pie hole and have been
Very happy with it. If you use it as your ghcp server. It also does that handy update of the dynamic dns
Datadog.com slash self hosted today's episode of self hosted is sponsored by datadog
They're the unified monitoring platform that gives you real-time observability and detailed insights into your docker performance as well
Why not enhance your visibility into container orchestration with a live container view and you can easily detect clusters that are consuming excessive
Resources and you get an auto generated map that shows you how everything connects together out of the box datadog collects critical metrics from each
Of your containers so you get immediate visibility into aggregated and even disaggregated service level traffic
This is beautiful insights when you're developing an application or when you need to troubleshoot something and it all gets displayed elegantly
try datadog today by starting a free 14-day trial and
You'll receive a datadog t-shirt after you create just one dashboard
You have to go to datadog.com slash self hosted to get started and get that 14-day free trial
If you're a sys admin or your developer
I think you're going to be really drawn to datadog because it was created initially to solve that problem between communicating between sys admins
And developers but now it's really grown over the years into quite the unified metrics platform
And just a couple of years ago, they rewrote their agent into go that makes it really efficient and easy to get an agent
Running on a machine that needs it. So get started go to datadog.com slash self hosted get that 14-day free trial and
Get a free t-shirt when you set up a dashboard datadog.com slash self hosted
We may as well call this episode google turning the screw hey, yeah, really? Yeah and google photos
This one hurts because I got sucked into google photos. I tried to divorce google photos
And then I was pulled right back in and I was promised
Free storage forever. Well, don't you still get it because you've got a pixel, right?
Does that only count if you take photos on the pixel because that's probably the phone I use the least these days to take photos
Yeah, nothing really changes for me though alex because I paid for two terabytes of google drive storage
And then they're emailed to me telling me that they're discontinuing the unlimited storage
They said but by our estimations you're gonna have four years before you have to worry about it
And nothing's changing until june the 1st 2021. It's worth saying so
Google photos will end its free unlimited storage
in 2021
And the verge writes that you will have to start paying after you hit the 15 gigabyte cap
Google already counts original quality photo uploads against the storage cap
But by taking away unlimited backup for high quality photos and video
Which by the way are horribly compressed if you've ever gone back and looked at any of those high quality
Pictures they are like youtube bad compressed. They they can be really bad sometimes
But I think they're taking away
One of the service's single biggest selling points, honestly
There is one law that seems to be true on the internet is unlimited storage never lasts never lasts. How can it?
It's not sustainable, is it?
I mean if you think about how much just a single 10 terabyte drive costs you or me
okay, we're not buying it anywhere near the scale google are so they're not paying what we're paying but
I've got three or four terabytes up in the cloud and I expect that to be highly available
replicated across multiple regions and
I mean that's all transparent to me
But these are the assumptions i'm making about what google are doing on the back end with the storage
It's not just one disk that I have to pay for the lifespan of
And so there'll be some people that are using way way way more than that 15 gig. Some people will be using
Terabytes video production studios that kind of stuff. Yeah, I have I have a two terabyte google disk myself
Just for that, you know a little extra space on you know, and I don't want to worry about it for a while
but seeing this news and
Just always kind of staying
Google aware, you know, like you have to stay bear aware when you're in the woods
Well when you're on the internet you have to you need to stay google aware and it has this issue coming up again has reminded
Me that I should probably start planning an exit strategy from google photos
Yeah
But you know in some point in the future you're going to want to just open a photos app and type the word mountain
And just get all the mountain machine learning pictures that they found or let's be real. I want to find pictures of levi really quick
He's a cute dog, I think it would be quicker for you to find pictures that aren't at levi probably
Fair play to you. Yeah, it's very true
That's the holy grail of self-hosting photo managers is can you have search and object recognition?
That's competitive with google photos. That's something we've been asked with the from the audience
It's something we've asked ourselves and it appears that a project called photo prism is promising to deliver just that
Actual object recognition automatically tagged and then available via search in a web ui
Similar but maybe even superior to the google photos web ui and alexander you had a chance to try it out
so it does machine learning based on the tensorflow library and uh, I don't know it's
It's fine. It's it's no google photos, but it's certainly promising
They have a demo available if people want to try it out
I'll see if I can't get that linked in the show notes, but it's demo.photoprism.org
And you could go get a sense of how usable this thing is and it worked
You can search for mountain and it will find all of the pictures of mountain or you can search for dog
And it will find all the pictures of dog
Does this I assume just sit on top of a directory that you have passed through in docker compose?
Yeah, so the first time you add a directory in through docker compose
You have to put it in a very specific place in order for photoprism to pick it up
so
Photoprism expects it to be in slash photoprism
slash originals
And once it's given that path so through a volume by matt in a container
you can obviously make that any host path on your
Pi or whatever else is is running this but you're going to need some horsepower
I've got a dual socket zeon system running my server and i've been importing my
50 000 images
All morning and it's now mid afternoon. We're still going and we're only about 20 of the way through
Wow, it's pegged every single cpu core
So my I have 16 cpu cores passed through to this vm. My load average is at 18
I thought it would be on the gpu to tell you the truth. This is going to take quite a while on the cpu
I don't have a gpu in that system. So maybe that's the problem. Okay, okay, huh?
So you throw a box with a lot of resources at it if you want to try out photoprism
But you know, this is what you're paying google photos for right or what you're paying the storage
You're not even having to pay for this aspect, but you know google's doing something very similar
Of course, they're also collecting the data
What kind of appeals to me about photoprism is it means but in a good way I go back to
To like the early aughts where I self-managed my photo library and I self-organized it in what's called a directory
and and then I just then I just throw something on top of it that does the image recognition and
I'll tell you why i'm kind of burned about the google photos pricing change
Google photos came along and it was really good at the object recognition and the search
But alex, it was not the only game in the town. I was paying for a commercial service
Where this small team of developers who I knew them?
So I was I was comfortable with it. They had created a product that took your photos and created the search index for you
And they were put out of business by google photos because google photos was free
And they could not charge eight dollars a month for what google photos did for free and they had to shut down
And they weren't the only shop that had to do that
So google came along and they dumped their google photos product on the market and then after they killed all of the competition
They're now charging for the storage after telling you you'd have a lifetime of storage. It's the walmart effect, isn't it?
And so that's why I think it is maybe worth
A few steps back in features and functionality. Like I don't think photoprism is going to like automatically generate
Those movies for you and suggest a book for you like google photos does
But it will give you a ui that sits on top of a directory of photos and searches and tags them
And of course your mileage will vary depending on what computational method you use and how many photos are involved
Nice thing is is that we've got both options available to us. One is we pay for it with our privacy and
You know that that kind of thing and the other one is a completely free and open freedom respecting solution
So I really hope that this project continues to improve and i'm going to see if I can contribute to it because photos really is
one of the biggest
pieces of of uh
Our digital lives and um, and it's about you know, it's it's about really capturing your memories
It's about capturing some of the most important moments of your life. So as life goes on you you you value those photos even more
Right, so they become more precious over time not less very true. Yeah, so, you know alex
so, you know alex, I could see a future blog post and then a segment on the show where you or I have combined a
auto backup from our phone to the file server that then
Goes into photoprism that then also does a secure offsite backup. Like I could see a whole photo workflow
future
And so if anybody has any insights if they're doing something like this
Why not start collecting intel from the audience go to self-hosted dot show slash contact
What's really interesting is i'm just watching the the processes in htop running running around
photoprism is
Multi-threaded and it's taking up most of the space but every so often I see dark table cli applying custom presets coming through
So I think it's using other open source software under the hood dark table to render the previews and stuff like that
So it's I think that's pretty cool. That is really cool. That would be a combo. I would use that's so awesome
All right. I think i'm going to try it out. So the only reason I didn't try it before the show
is docker sucks at packaging up for the latest linux distributions and so i'm in this no man's zone right now where
Docker hasn't been officially packaged for the distribution i'm using and it drives me crazy and it's
Actually making me want to switch to podman but that is a topic for another show
that's a hangover from several years ago when uh
Docker changed their semantic versioning to be monthly based instead
And then they decided oh, we're going to create our own yum or apt repos
And then we're going to maintain them except for the fact that new distros come out every six months
And then you need to create a whole new repo
For that distro and it's it's a perennial problem with ubuntu and fedora that uh, yes
They just don't solve and it really annoys me and I thought you know, I could I could use the the distributions packages
But I don't really like doing that. Um, I could swat I could try switching to podman
But I decided you know what? I'm just i'm just gonna wait. I'll just wait, you know, Chris
Have you uh, have you have you heard of this thing called, uh arch?
By the way, alex runs arch it's just not a problem on arch, you know, no, you're right you're right
You're right. You're absolutely right. The funny thing is is I i'm using the distribution of your employer and you're using some hippie distribution
Because i'm on fedora 33 hey now
Hey now my server's ubuntu. My desktop is arch. Yep. My laptop is fedora
so
I don't care. You're not only a multi distro guy. You're a multi os guy
You you really hold no platform allegiance as you just use what's best and that's what I like about you
I I try to uh, I want to mention our sponsor a cloud guru has a python 3 scripting course for system administrators
If you need to develop some skills to write effective and powerful python scripts
A cloud guru has a course that will have you completely covered and beyond just the language itself
You'll go through full development processes including project setup planning and automated testing to build different command line tools
all with python 3
So go check out a cloud guru for that
We have a link in the show notes if you want to go directly to this python 3 scripting for system administrator courses
I think you're gonna like it. So we'll have a link in the show notes over at a cloud guru
It's python 3 scripting for system administrators definitely worth checking out if you're getting in the python game
Also, I want to mention our members self-hosted dot show slash sre
That is our site reliability engineers that support the show and keep us on there. You get a limited ad feed. So it's
Just limited ads just the ones we're contractually obligated to include but you also get extra content
You get the post show
And uh, it's a great way to support the show self-hosted dot show slash sre
I think we're going to be talking about your new smoker this week. Can we oh, are we okay?
I'm, totally down and it actually has a self-hosted component to it as well. So that's perfect. Yeah, very good
Well, uh, we've mentioned it earlier in the show, but it's worth mentioning again
There is a way to get get a hold of the of this here humble podcast
Self-hosted dot show slash contact is the place to go to get in touch with us
And you can find me on twitter at ironic badger. Yeah, i'm there too at chris las and the show is at self-hosted show
Thanks for listening everyone. That was self-hosted dot show slash 32
