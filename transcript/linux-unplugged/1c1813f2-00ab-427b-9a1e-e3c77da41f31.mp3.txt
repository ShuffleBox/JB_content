The internet cannot figure out how to quit them. How do you get out of him? Well friends
How about a simple tool West pain brings us the Vim killer?
I mean I was thinking of you here Chris because as you know, I'd like to alias
Nano-2 Vim on really any system that you're gonna come across. So why not install a hardware kill switch?
You're familiar with the mute pedal you've got down below you for taking a cough
But what about when you run into trouble with your least favorite editor? I can never get out of it
It's just too darn hard. If only there was an easier way
Well Vim killer is a button on top of an Arduino wrapped in a 3d printed enclosure
It's expertly crafted and with one button click you can finally quit them. What could be easier?
I just 3d print a case build a tiny computer
Install software develop that software connect it to my host system and set up software on that side
And then when I'm all done one button press to end Vim, it's easy and yet it's still easier than learning Vim
Hello friends, welcome to Linux unplugged episode
355 my name is Chris. My name is Wes. There's no kill button for this show Wes
This is just too much show. I'm a wounded soldier. I'll tell you my tale of whoa
I'm how I managed to completely bork up my home server last night and Wes discovered a rogue device on his network
We'll tell you how he managed to track that down
We have a bunch of community news and some feedback, but before we get into that we have some pleasantries
I'd like to say hello to mr. Cheese bacon and drew. Hello, gentlemen. Thanks for joining me. Hello internet. Hello. Hello guys
Hello, you know, this is nice you me and Wes here could just have a little picnic while we do this
We should do that sometime a podcast picnic. We'll all order the same meal have it right here snacking, but don't get it on Mike
Yeah, although we'd have to figure out a way to include that virtual log time appropriate greetings bumble room
Hello did a bunch of you sneak in during the intro
I feel like I feel like that's a lot of people that weren't in there before but it's good to see all of you
Welcome into the show. I
Apologize. I'm a little sad today because of a data loss situation that happened last night
And of course, I spent the morning refusing to accept what happened trying to recover the file system data loss. You said data loss
Yeah, I am so sorry before we get there. This actually is really cool. We were joking around in the pre-show
I mean, it's silly but this VIM killer button on top of an Arduino wrapped in a 3d printed enclosure
I kind of like this idea for just a general close the application function if you could expand it beyond VIM
So it supported any application and you just hit that red button and we'll put a link in the show notes
You guys can see this you just hit that red button and it just closes whatever app you're using right there
Maybe it just kills it even how great would that be kill it?
What if I told you that you could easily do that with a few buttons and like an Arduino Pro Micro?
What is it the El Gato that all the streamers use these days? Yeah, right
you can do the same thing with just a little Arduino Pro Micro which can act as a
Hit device and boom that should be kind of a fun segment
You know, what else would be fun is to make a homemade OBS
Streamer rig switcher kind of thing that is way cheaper than that El Gato because that El Gato
OLED or whatever it is panel is like $300 and I don't even think it works with Linux. I might be wrong
I've never tried it because it's so expensive. That's why you got to go with cheese brand products. That's right. I got you fam
Cheese printed and approved. Yeah, I think the El Gato works with Linux under OBS
But I think to program the buttons you need Mac or Windows. I've never really tried it
I'd be curious to know if anybody has this is the streamers life. So anyways, let's talk about a little community news
We really just have one story. We wanted to dig into although
There are many maybe next week
We'll cover what happened with the gnome foundation and their patent suit, but I'm waiting to get a little more details on that
I'm hoping to get more information. So let's talk about this Raspberry Pi firmware update
I got a lot of people telling me about this one people knew I was looking out for this. This is an update
That will be official eventually right now
It's in beta that enables the Raspberry Pi 4 to boot from a USB SSD
No SD card required at all, which we were just recently talking about Wes
Yeah, that's maybe where it's a little bit confusing because I mean you and I have already been talking about using a you know
USB mass storage device for your root file system
But you've still got to have the bootloader and all the requisite files sitting on that SD
But really since launch Raspberry Pi 4, I mean there's been promised functionality around the booting
Directly, you know right off with no SD card required right from USB
Finally as of I think May 15th, there's a firmware out that lets you do just that
Well that is if you can get that firmware installed. So in theory a very simple process you edit a
Raspberry Pi EEPROM update file and there's just one line in there about firmware release status
and you change it from critical to beta and
Then you do an apt-get update and there's a package that gets updated and they're called rpi-eprom and that package
Will pull down the latest firmware and put it on the file system
And then there's a pretty easy rpi-eprom update command where you just point it at that bin file
That's now sitting on your file system and it writes it to the Raspberry Pi's firmware
You reboot and then in theory from that point forward it will boot from a USB device
For us on my test Pi because I've got one
Just on the bench here at the studio that I use for testing these kinds of things now
This is how you know that you're using these pies in production is you've got a whole staging environment set up for your pie
You're dang right Wes. I'm taking this serious here. I'm not gonna deploy beta firmware on my production devices
That's what operating systems are for I admit
I did put it Ubuntu 20.04 on my pies before it was released, but that was different several weeks before
Okay. Yeah, but I'm not doing this firmware, but I will put it on this test device and this is kind of a nice candidate
I got it
Two three weeks ago, and I have a fresh Raspbian
SD card on there and I got a fresh SSD on there
so it's like the perfect candidate to try this firmware and you and I both gave it a go and
No matter what we did it would write the new firmware in theory
It would seem to and then it would say okay reboot for it to take effect and you would reboot or power off power cycle
And it would still be the old firmware. Yeah, I'm not quite sure what's going on
I mean, I think to the best of our knowledge
We followed both the official advice and there's a handy article that sort of summarizes things skip some of the intermediate steps over at Tom's
Hardware and in theory the new firmware includes a bunch of defaults that you know
Sort of do exactly what you want. They try the SD card and then well if there's no SD card boot from USB
so all you have to do is
Install the new firmware and let it use its defaults to overwrite any sort of bootloader customizations. You've got installed
That's one command
But after rebooting we got nothing nada. Yeah, and I'm not
really urgently trying to fix this because for me having just slash boot on the SD card and then the
rest of the file system on a USB SSD is
Perfectly functional, you know, that's one of the things that's using Linux
Like that's that's a behavior that's entirely supported in all of the models we have
So like just having this separate little boot drive is really not a big deal
It's just sort of they mentioned that this support would exist and you know, therefore we want it now
I have a tale of woe about my Raspberry Pi home server last night if you want the full like
Multi-pi setup all of that. It's well documented in the self-hosted podcast. So I'll just make that disclaimer
So some of this is a shortened version. Oh
God, I'm so sad about this is actually still hard to talk about
So some context is soon I'm heading out in Lady Choups my RV to go to Austin
it'll be about a nine-day drive down there because we'll be stopping a bit along the way and
Then I'll be there for about a week and then I'm driving back
And so that's a long time and I'm bringing my three kids with me. You've got a full load. Yeah
seriously and
Including production gear wife and dog and that's food and clothes for all of us
I mean it really is a full load and it's a lot of time on the road and I wanted to
Sort of re-engineer my home storage setup. So that way I could get it ready for this and during the luck lug
Neal convinced me I should try butter fs
I was gonna use merger fs for my cousin and I thought if it worked out well for him
I'd use merger fs at home to accomplish this
Okay, but there's a way to do with butter fs and it seemed like a superior route to go and it probably is I'm going
To still try to do it
I
Come into the situation kind of in a rush
because I'm trying to get everything ready to go and get more storage copied over and trying to just get it done really fast and
So I ended up doing it late at night
But I probably shouldn't have because I had that thought crossed my mind like I'm not feeling my sharpest right now
Been a long day been on you know, some zoom meetings during the workday, and this is probably about 930 at night
So that's late for me. I mean that's the only time you have right where you're just like I'm sitting here
I'm thinking about the problem. I should just fix it right now. I have to drop the RV off for some work before we leave so
I only have it for a couple of more days before we're gone. So I really only have like like last night to do it
Although it's gonna be tonight, too
So I'm doing it later than I should but my idea was is I need to shut down a couple of my raspberry pies
They're producing too much heat and I want to shut down two of them and consolidate the functionality onto one
I'll shut down one of them
I removed the hard drive and on this hard drive contained all of my media for home like
movies and television and all of that and my Docker containers and
You know all their data
All my other like my compose stuff and really there's nothing else installed on the host OS that I have separately
And of course, I have backups going for all of this. I'll make that disclaimer up here
so I disconnect the drive hook it up to the new Raspberry Pi that I'm going to be consolidating to and
I'm doing all of this through an SSH session on my laptop and it's about a
45 to
50-minute conversion process when you run the butter FS convert from extended for so I sit down to run this because I know it's gonna
Be a bit. Oh you're converting
Hmm. I mean that's a feature that is advertised, right?
Yeah, and it in theory is a fairly straightforward process unless you manage to screw it up in the dumbest way possible like I did
Interestingly enough no matter what I did the new USB device
I hooked up would show up as dev SDA and my root now became dev SDB
But because I'm using labels for all my mounts and for my bootloader
Everything was fine. I tried changing different USB ports and I moved the new disk to a hub and
The the main root disk to the still plugged into the back of the Raspberry Pi
So it should be like directly connected to the pie and it still shows up as dev SDB
It's fine
So I had to verify I was working with the right disk and I was it I verified it was dev SDA
So I set off to do the butter fest conversion. Step one is I did a full check disk, you know fsdk, whatever
Made sure that the extended for system was in good shape
Verified everything was right made sure everything was unmounted. This sounds so responsible
I kick off the butter a fast conversion and you know, it's going it's going it's on a Raspberry Pi over USB
So it's gonna take quite a while. So I decide I
Should probably start working on luck, you know, it's gonna be tomorrow morning. I'm gonna need to have a show ready to go
I should probably work on it. I start opening him up the dock
I start working on and things are just they're going real slow with and this is where
impatience and
time crunch and
Sleepiness came together and I made a horrible mistake
Oh, no, and then that was compounded by another failure
so first stupid thing I did is I was trying to load some web pages to do some show research and just the internet was
So throttled up where I'm at at this campsite that I just couldn't even get a web page to load literally could not even load
Web pages so I decided yeah screw this I'm going to tether from my phone
Yeah, you've got this LTE plan you pay for yeah, and the Wi-Fi is running on my phone all the time
So I just jump Wi-Fi networks
Boom pages start loading. I immediately start filling out information in the dock about a minute or two into it
I don't know. I lost track of time
All of a sudden I just stopped. I have this realization. Oh
No, I've just just connected from my SSH session in which I was running a file system conversion
What have I just done the heaviness of that hits me? No screen or team X session in play
No, I have and this is something I'm going to work on now. I have developed a habit of
Always using in the past it was screen and now it's been team X or even teammates sometimes
I think teammates pretty great too for when I'm trying to share whenever I'm in a remote session
I at least have mosh and I'm almost always using screen or team X now
That's just a habit
I've built up anytime I'm remote because I'm on this my fi so often that connections are are unreliable
But for whatever reason when I'm on the LAN and it doesn't matter if it's a box here at the studio or if it's at
lady jupes when I'm on the LAN I
Just don't think to use those tools because I'm on the LAN. It's not going anywhere. It's steady. It's stable, right?
You're not leaving. So your session won't break, right? I
Realized the mistakes that are stacking at the moment. So I switch back over to the local LAN
Bring the terminal up then I just sit there
Does it say anything does anything happen? Do I get dropped back to my local box?
So I hit enter and it returns to the command prompt with no air
But I'm still logged in like it resumed the session. I'm not using mosh. It just resumed the session
I don't know like if it timed out or what because it might it be
I don't know. It's all happened really fast in this point because I was beginning to freak out
You know calmly freak out, but I was really starting to worry. And so I
I immediately thought well, I believe the way the conversion works is it really doesn't do
The final stuff until the end and if I interrupted it mid conversion
It's building that tree
But it hasn't switched over to the butter FS file system yet. And so perhaps the extended file system is still fine
So I run another check. I run an extended for file system check comes back clean
Oh, did you see any processes still running from your previous command Wes?
I was in a fugue state. I was in a fugue state Wes. I was like, oh no, what's happening, right?
And plus it's like 10 o'clock at night now and I'm exhausted because it's been a long day and I it was Memorial Day
And so I was I did a bunch of chores which I felt really awesome about
Reorganized a bunch of our storage to get it road ready felt awesome
Have like a two-hour power hour meeting felt drained as hell from that
like just you know, one of those big days and then I'm working on this after a big big meal, which was
Delicious, but also draining. This is where I should have stopped
Because the extended for check came back clean, but I thought to myself I got to get this done
I'll run butter if s convert again, and I'm sure if something screwed up the tooling will give me some kind of air
This doesn't sound good you can tell I was exhausted so I set it up to go I said
You know caffeine the little gnome extension caffeine I click that so that way my laptop stays awake all night long
You got it running this time
in T mugs
Ready to go Ethernet with into the into the cabinet like I am dialed in man
I am NOT letting anything happen again, right my head enter and it's going and I'm sitting there. I'm
They and it's just sitting there clock just no feedback cuz it's just creating image or whatever
It says and I decided I'm going to bed and I set my alarm for 545 a.m
Because I figure I'll get up
Try to finish the work and then run into the studio for the show because you know
It's quite a bit of a long drive. So I gotta like get up early
So I set the alarm clock I wake up before the alarm goes off a half hour before my alarm goes off
I'm up and I'm working on this thing
I'm sitting there chugging a Red Bull while I'm like one hand on the keyboard the other hand slamming a Red Bull
I'm down to clown like getting this thing going look at the output of the butter FS convert
Completed successfully. It's got all the stuff on there that all the guides say should have
Looks good to go. I'm thinking at this point. Oh my god, it worked
It didn't do it until the very end which I interrupted so that way it just started over from scratch and it took hours
So I you know, I assumed it must have it's gotta be good. So I think okay now it comes down to this
Mount file system. I get an error that it can't be mounted
I checked the logs a bunch of layers are in there
But one of the ones that I've pulled out now after running butter FS repair and check is could not find extended items for root
256 that just keeps coming up every time I do a check
So I brought it into the studio. I ran like all the rescue things against it. I ran all the different stuff
I cannot get this file system back up. It's there. You can see the size of it
You can see how much is used, but you can't get to the data. It's infuriating and it starts to dawn on me
I'm gonna need to recover. All right, let's start that process. I've got backups. Oh, what a mental shift though, right?
You're like, okay. Well this system is lost
What do I have in backups and maybe you know, I still I have all my docker compose files
I've I've got the configuration and backup and the media files. I have other copies of then
These are not my only copies of them
So I can recover so I go to login to Google Drive
Download my last duplicati backup, which happens every night at 3 a.m. So I was just gonna go get the previous night's backup and
I see a red bar
at the bottom of my Google Drive
Where it says I am using eight hundred and eighty six gigabytes of 15 gigabytes allocated
Yeah, you see back in March
My debit card expired and the way Google works is you can go add your new form of payment
Maybe you have a YouTube bread or a YouTube television or Google Play subscription
You can go add it back to one of those services
But it will not add the payment information to all of the services
So my Google Photos, for example like that stuff in there, which I still have those old photos on there
I want I still want them stored on there. That's why that number is so large
My YouTube premium my YouTube TV each one of them. I had to reactivate individually
I guess I just didn't think that I would need to go manually check on Drive
I thought I would get some sort of email saying hey, man
your Google Drive storage subscription is up and
You're using eight hundred and fifty gigabytes or eight hundred and seventy almost gigabytes of space and you're only you're only getting 15 right now
Can we do something about this? None of that. I didn't get none of that
I had no indication that duplicati wasn't saving to drive lesson
What we learned here never using Google Drive again. I was simply using it because I'd already paid for it ages ago
So why pay for something else? I thought so my backups are basically
Beginning of March for all of my configuration my plex history my smoke ping history
Configuration all of it is basically
March because nothing was generating errors neither duplicati nor Google Drive
So I don't have anything current so I'm gonna have to re stand up all the applications and
Recopy over all the media files
while I'm trying to get out of town and
it stinks because it's months and months and months and months of tweaking and perfecting and
Also kind of a blow to this is all of my documentation
Was on that system. Oh, no. Yeah, and I could restore like the March backups, which I will but anything you've done
You know all the helpful hints you've added. Mm-hmm. Mm-hmm. Mm-hmm
Ironically, I needed that documentation this morning and I had written it locally on on my desktop. So I just had it
But it was like here I was this morning
I already needed that documentation because I was installing software on Dylan's laptop remotely
and I you know needed my credentials and all that it's just such a shame because
it was such a dumb mistake ultimately my mistake was not using something like screen and
Then switching networks like that
And then I think you could back it up one level and saying I even had that moment of I'm not really at my best
Right now I can tell I'm a little tired a little punchy
but I had thought this through for days and I had it all written out all the steps that I was going to take and
I had it all just sort of by the numbers at this point that I thought I
Mean all I have to do is just follow my list of procedures
like I'd already kind of gone through and looked at all the commands I was gonna run and how I was gonna structure it on this
New machine and kind of just made notes for myself to follow. So I thought I'm good to go
But what happened was is I was that impatience and being under too much of a time constraint
And the slowness of the internet where I was at because I'm out of my fight. It was way throttled
I thought you know, I'll just switch over. I'll do show prep while this conversion goes for an hour or so
You were trying to optimize. Yeah, and I think the lesson learned there too is when you're doing something at the file system level is
Excruciating as it might be just I got other systems. I could have used I could have used other computers
I just that's a unit asker at that point
I think it's hard because we've done so much to move things off that sort of unit asker model and
Most of the operations you do I'm especially if you have backups, you know, they're not unreplayable
you can go back in time or you've you've got the backups for it, but a
Giant media filled file system is one of those. It's too expensive. You know, so you you have fewer copies of it
Yeah, I think I'm still going to go this route that I was set it out
I'm still gonna go with butter FS on this disk
because as Neil pointed out when I was comparing it to possibly using merger FS is it's pretty straightforward to take a new disc
Add it to the system and then just add that storage to an existing mount point
and you can do that with rate or without and
that to me is a very compelling way to just grow and grow a
Media storage pool by doing this butter fs volume ad or disk ad whatever it is when you look at
What is feasible on an ARM device like a Raspberry Pi or a pine 64?
the overhead of a file system like ZFS doesn't seem very reasonable and
Extended for an XFS are absolutely totally great and usable
But maybe you want something a little more like maybe you want snapshots
Or maybe you want this ability to just add additional disk storage and you want to integrate it at the file system level
Then butter fs becomes a pretty compelling option on something like the Raspberry Pi. And so I think
Even with this experience
I think I would I'm still gonna move forward if there was one thing that I wish butter fs could have done for me
Because this was really all 100% my fault
But if there's one thing is maybe that file system conversion tool could have had some
Checking because the file system was never usable like when it said all done everything good to go
It what it didn't leave me with a usable file system and maybe there could have been some kind of error checking or butter
Fs repair scan that happens in there or something to give the user feedback saying this isn't a functional file system
I just gave you it wouldn't have changed anything
But it seemed like an opportunity for the tooling to be slightly better in that regard right you were left thinking
Oh, yeah
I I have a usable file system that I can just go go work with now
Instead of having some sort of universal way to query like is there still a conversion in progress?
What's happening with my file system and should I touch it yet? Yeah
It's just oh, oh Wes. I'm so sorry, but that's enough
File system talk. Let's do a little housekeeping
Remember we're live every Tuesday although I'll be traveling like I mentioned earlier to Austin
So I there will be some time in there where we are not live, but we'll still have a show for you
In fact, there's a website you can use to find out more. That's right Jupiter broadcasting.com slash calendar
Where they'll be robots to convert it in your local time
How about that robots Wes and we didn't make them do what we asked and they said they'd be happy to because they are far
Superior to our limited human minds. Yeah, they've got plenty of time. So they figured why not what else we gonna do and
Little pay it for going on over at a cloud guru. They're giving away
1000 subscriptions, how about that link to that in the show notes go check that out
You can find out more information and I believe it's running until June. So for the end of June
Anyways, details are over there. They're awarding an annual subscription to those applying they'll receive a free ACG subscription
That's pretty awesome. What a great opportunity to skill up and link in the show notes to pay it forward at linux unplug.com slash
355 also a mention for the love plug happens every Sunday
Same bat time at noon Pacific just a different bat day. There's a chat room to on geek shed at IRC geekshed.net
pound love plug and
You can jump in there. We do it every Sunday, and that's when I decided
Well, I was gonna convert my cousin systems butter fest and I'd start with my own before I did his
Now I'm not so sure he'll be down for it, but stay tuned in the love plug for more and that my friends is the housekeeping
So as we had a discussion recently about different network troubleshooting techniques that we had been both recently employing
You've actually had opportunity to go through and fix up the home network and we thought well
What a great opportunity to share our recent experiences here on the show and this is one of those times
Where we get to go with Wes
Into his home on a weekend. I
Imagine it's a rainy evening in Seattle. Am I right? Of course, it is. Yeah, it's just been raining. You've all seen tracer
It's pretty much true. It has been a rainy weekend and Wes discovers
Something strange. I think we've all been there. There's something strange
on my network an
Unknown device, you know, yes
We all have these projects that seem to crop up when you're trying to do something else. You're going about your day
And then you notice something's not quite right. I didn't ask for this really this all started over the weekend
But I noticed I was having some internet problems. I
Was trying to download a new steam game to well let off some steam with some friends
And I was pretty embarrassed when I found I was only getting about two mags down
Now sadly, I'm not on fiber at my current place
But I do have a pretty decent Comcast business connection that I can use to get to my network
But I do have a pretty decent Comcast business connection that reliably performs well above that
Now I should be the first to admit that my network. Well, it's not in the most pristine state
It's ever been I move more than I'd like and unfortunately that means things sometimes get messy
I'm well overdue for some firmware updates. I handed some password rotations
Since I was already over there and giving the modem a reboot. I thought
Well, I won't be playing this game anytime soon. I think it's time for a home network checkup
So he's a little embarrassing when you get all set with friends and then technical issues
Yeah, right like come on. I'm supposed to be a computer person and I can't make this work. Yep, and tip one in Wes's quest is
Check your logs. You may be surprised by what you find as I sat there doing the usual updates. I
Decided well, let's take a look at the log files
That's when I started noticing something wasn't right
They're right in the DHCP leases was a device. I didn't recognize
Now as I said, my network is messy and there's plenty of random
IOT gadgets wireless devices and just general computers plugged in
but this
Well, this was really unknown. And of course, there's only one solution
It's time to break out the networking tools perhaps the king of the networking tools to get a better sense of things
And really because at this point and I was just a little nervous
I thought I'd fire up nmap and take a look at what responded on my network
And yep, there was the same anomalous MAC address
Nmap didn't know what it was and plugging that MAC address in online. No results there either
10 dot 1 dot 10 dot 2 1 2. What are you and
Where?
Your mind must have been racing at this point. Yeah, I mean come on. This is my home network
I've got VPN set up to several the key secure or supposedly secure locations. I can't have that
Did you go through like various ideas on what are my options on how to track this thing down now?
Yeah, you know, I was kind of just thinking like well, what can I find out about it?
what do I have that I can sort of eliminate from the list, but I was
Roving around my house looking at devices thinking like okay. Is there anything else I can unplug to try to discover if that's it
But no if you're in a situation now where maybe you're working from home
I've noticed this with a lot of the meetings that I've been in people that are working from home
Now all of a sudden they're a lot more reliant on that home network than they were before
And so you also wonder about the security of it
So these kinds of things really kind of can kind of nag at you. So I like I like the Westpain drastic action approach
Then map revealed the port 9080 was open
But unfortunately, it didn't respond to HTTP requests or anything over TCP
At this point I was getting desperate. I'd have to do something dramatic
It was time
to change my Wi-Fi
ssid
No going back
Having to manually set up all my connected devices again. It's the real scorched-earth approach there Wes
Yeah, right burn it all down. We'll start fresh and only the things I want will be at it
That's definitely a way to just guarantee that it's a it's a clean setup
Did you ever get a sense of what device it was after you did this?
Did you go around and find that something wasn't working? Oh my gosh. Yes. Okay, so this is also pretty funny here
I was frantically searching my house, you know for IOT devices rogue Google devices plugged in which let me just say
So many ports open. I'm a little disturbed, but I never thought to check the thermostat sitting behind the fridge
I mean, it's not plugged in I didn't plug it in. It's just a little wall ward, but of course it has Wi-Fi
So useful obviously too, you know, I actually I am glad that it supports Wi-Fi and there's a home assistant module for it
So honestly, that is something I will be playing with because well, I'm just curious even if I didn't need it over the winter
Yeah, and now you can put it on the Wi-Fi when you're ready. That is the one nice thing about changing the SSID
I've played around with like trying to do MAC address and matching it to a vendor
But I agree with past West from the weekend. This is his bit of advice. Don't let this happen to you
so there's a couple of tools and whatnot that I think could help in a situation like that a
Tried and true one that I know our friends at the Ubuntu podcast also love is net discover
Which is a really handy tool to take a look around your land and see what's going on
Yeah, that makes it so easy and it's a handy sort of, you know, just a little end curses interface
So it interactively keeps pinging out to your network and then updating with whatever it finds. I like that
So that's a really good one to get a lay of the land also nmap. You heard West use that tool in there
You could read a book on nmap there because there are several and it is totally worth it
but a really simple command is pseudo nmap tack lowercase s
uppercase s and then your IP space slash 24 or whatever your subnet is and
Just let it go to town and discover all the devices and talk to them and a lot of times it can tell you the operating
System and whatnot so that can help you get your arms around what's going on. I
Want to mention if you have Android you owe it to yourself to get Wi-Fi analyzer
It's such a great tool and you can look to see if there's maybe a channel that isn't quite as busy in your neck of
The woods and move your Wi-Fi network over to that if it's not doing that automatically and that may improve your signal
So that's something to consider. There's just maybe basics like that to help improve just Wi-Fi with something like Wi-Fi analyzer
Which is on f-droid?
Then on your Linux laptop take a look at wavemon and then cursors based monitoring applications for wireless devices and your network
Which is really useful and again another beautiful and curses interface. That's right. We love that end curses up in here
I use a W LAN scanner and that one also gives a nice overview of your
2.4 and 5 gigahertz on your Android
I'll also give a recommendation to a tool that Weston I'd love
West may be a little more than I net data which is useful for a lot of reasons
But one of the neat things that net data will do is it will generate errors and alerts if there's something funky going on
Packet-wise on your network. I actually had this happen
Ah, maybe a year or so ago when we first started playing with net data
It was really early into it cuz I didn't even really understand what it was telling me at first
It's just spewing errors and information about how broken your setup is. Yeah, and then I realized oh
It's telling me that there's a whole crap ton of discarded UDP packets on my network
That is way beyond the normal in a one-minute period and that began a journey of troubleshooting that eventually improved
The Wi-Fi network. Thanks so much Vizio. So tools like that even that aren't necessarily for network troubleshooting can help surface interesting information
Boy, that's the story for another time
I think what we're trying to advocate though if we just it could extract away from the individual tools
trying to advocate
being aware of what is on your network and how much resources is consuming and
What that might be from a security posture standpoint?
And I think what we're kind of suggesting you might consider doing is do it West did and just say hey
let's let's do a network checkup and let's go through and check the firmware versions on the Wi-Fi or on the router or on this
IOT device and maybe it means you got to go recover a password so that way you can log into the we things portal or
Whatever the hell they need you to do so that way you can manage your light switch, but do it
you know get those updates done or or maybe take a weekend and see if you can throw a few of those things in home assistant instead and
maybe reduce some of the internet traffic and
Improve your Wi-Fi that way, too
Now as you dug out a few tips from Jim Salter over on ours technica on some simple ideas for reliable Wi-Fi
Yeah, I mean at the end of the day you've got to remember that Wi-Fi is it's a shared spectrum
So your performance is often the same or limited by the worst performing device on your network
So if you've got one AP sitting somewhere and you've got someone trying to stream YouTube across the house
That's gonna be a lot of retries and those are competing for your latency sensitive packets in your zoom call
so you've got to start thinking about things like where are your APs placed and when are you using it the most and
Who else is on your network? And what are they doing, right?
Also things like the layout of your house no more than two rooms and two walls is a pretty good rule of thumb
Also, don't necessarily get too hung up on transmit power too much transmit power can be a bug as a Jim says it and
Make sure you're really taking placement into advisement as much as possible. He suggests above your head height is
Actually the most preferable location, which I got to admit
most of my APs are down near like foot and leg level maybe knee level at best for a couple of them knee level what
Devices do you even have down there extenders that are plugged into outlets? Oh you although I will say, you know
Mesh I think gets maybe a bad name in in our circles here on Linux unplugged
but it can legitimately be useful especially in an environment where you don't want to run a bunch of Ethernet although I will say
If you can have a cabled connection, well, that's just gonna help everything. Okay now
Let's talk about the router. This is one where I think all of us have a lot of thoughts and
Wes and I are constantly debating
appliance versus hardware device versus
Build it yourself Linux box. Yeah. Well, it's a tough question because different people have different needs
How much time do you want to spend babysitting it or having to migrate from backups like you've just experienced Chris?
but at the same time
Do you want to be familiar with how your network works and do you want to know the ins and outs and thankfully?
There's a whole bunch of solutions that range from something like open sense or PF sense
All the way down to just running an IP tables commands yourself, although I'd probably recommend firehole over doing that. Hmm
Okay. Well, let's take inventory here in a moment. See what everybody's using
I had this thought when all of this went down if I had some sort of QoS or
Something that was throttling all of the other devices and maybe I had priority like my my IP or whatever
Maybe I wouldn't have had this issue to begin with maybe I wouldn't have needed to switch Wi-Fi networks
And I wouldn't have disconnected that terminal session and lost the data
Yeah, you know that's a good question and a little bit of quality of service can go a long way
Obviously it can't repair problems that you're gonna have upstream, right?
I mean if you're just hitting a limit with what you can send or receive from your provider
Well, you're kind of stuck but for optimizing what goes in and out of your home network
Yeah, those tools can be really handy, especially if you're an environment where all right
Well, the kids are there streaming a movie
It's okay if they buffer a little bit, but I'd really not like to lose my connection to this conference call
That's pretty important. Yeah, exactly
All right. So just around the horn I've recently talked about mine
So I don't need to go into it too much, but I'm using that GE slate mobile router still love it
I think it's a great little device probably will replace it someday, but I haven't decided what yet. What about you Wes?
Are you replacing your router? Do you have a new one? What's what's that area of your network like right now?
You know, I was just thinking those might make a great little sort of just standalone guest or alternative network Wi-Fi
Where you're not too concerned about performance, but you just want to connect it up with your you know
Whatever whatever you've got upstream and then share it out, especially if maybe whatever you're using for Wi-Fi doesn't support multiple networks
If it does, you know
You've probably got ways to define more than one Wi-Fi network or set up a guest network and those can be useful, too
For me. Well, I'm just still using firehole because it's a great balance of configurability and programmability
but not having to dive into all the complicated mess of IP tables and
The intricate commands to really do a good job of being secure a deny first policy and making sure that you optimize things for performance
What would make that even better though is if it was on a low power low heat kind of quiet or even totally silent device
Yeah, that's true. I am using a not super powerful
But not arm level Celeron chip at the moment which meets my performance needs but does have a big old x86 style case
Well, let's ask drew and cheese. See what see what they're using cheesy
Do you have any particular router or firewall that you've put in or you got the ISP box?
I have a Netgear Nighthawk router that's been flashed with DD WRT
You know when talking about auditing your own network
One thing that a lot of consumer routers do by default is they turn on WPS
by default, which is something you should definitely
disable because
You could possibly have your network breached using WPS. And if you're still using web, there's something wrong with you. So
All right, drew. What about you? What are you rocking for your home router? Well for my router
I am running an edge router light the ER light 3
It's a few years old now at this point actually, I think like five or six
but it's still rocking great still getting support and
firmware updates and
it's
surprisingly versatile for essentially what is a Debian based router and
Then I've got the unify access points and a couple of different spots in my house
I am very impressed that you're sitting around five plus years now with this device
I mean, I think that's the stamp of success right there
I wonder how Bruce feels about this because Bruce you've been rolling a traditional Linux firewall since
1995 yeah, I was the year I graduated high school and one of my friends had gotten me into Linux and I set up a
Free BSD run-of-the-mill bare OS firewall just to do basket rating way back when and I've evolved since then and right now
I'm running PFSense. Okay
So what did you like about running a full Linux box as a firewall and why did you switch to PFSense?
So two questions there really well originally I just didn't like any of the existing, you know
Firewall things that you would get from an ISP provider or something like that
I wanted something I have control of all that kind of stuff
So the normal kind of ideas from you know, our kind of target audience, I guess and switching to PFSense
It was more just you know, generally not having to do IP tables and all that kind of stuff
You know
I have a point-to-point connection for VPN for work
Having all the graphing tools and stuff that it has although I'm seeing in the chat that open sense
Sounds pretty good. So I might be checking that out
Haha, yes, the call of open sense. I've heard that song as well
Well, that's interesting and I I think I kind of align with your thinking
We'll have some links in the show notes to fire hole
Of course other things that you're familiar with you can you can probably send us in a few ideas as well
Because there's probably more that we're missing at Linux unplug comm slash
Contact I'll do something soon. I'll do something I think for me key things. I want are
reliability wire guard at the edge the only place I'd like a gooey to really is just
for setting up simple DNS entries and
Maybe static DHCP mappings. That's what I really like about the piehole UI right now
Is it gives me that kind of stuff now, you know, piehole does a pretty good job and it's you know
It's built on top of their own fork of DNS mask
So if you're already familiar with using that which is super handy, especially for doing like split horizon DNS setups
Or just any sort of DNS customization
Well, you can do all that same stuff on piehole either through the gooey or if you want on the command line
They're a couple other things before we get off Wi-Fi
Consider at least two or three Wi-Fi networks West you kind of touched on this
But maybe consider a kids network and IOT network and a guest network
And then of course the main production network where your your device is and maybe your spouse or whatever your significant others devices
Whoever might be family. I have not done the separate kids network, but after this experience recently
I'm considering it for the QoS X aspect of it
But I have done the guest and IOT network and I like that a lot. So for me
I put all those people on two four and it's a separate SSID with a separate password
It's a separate IP space nice
The IOT network can't talk to the guest network the guest network can't see any of my automation devices or any of my IOT devices
They just get a route out to the internet and that's it
And then I have a production SSID that I connect to that is the LAN that has all the devices that can talk to each
Other and I like that a lot. I think it it's a little additional complexity up front
But if you just do it in a really clear simple way, it's pretty easy to maintain and easy to explain
Alright, so West Payne's hot VPN tips hot VPN tips, you know
One thing I like doing for myself is if you have access to it at the router
You can set some of those things up so that if you've got multiple devices you need to use on the VPN
Well, you can set it up that way right just make sure that you only allow access to the VPN connection
Which you've established on your router from those particular devices and you don't have to fiddle with clients on each of those things
Configuring all of that now this could be a security risk
So make sure you've got your firewall configured correctly
But it can make things pretty nice and simplify a config where you might want to do something like a split horizon
DNS setup where instead of forwarding all your VPN traffic over to work and having everything resolved out that way
Well, just send things that you need over that network
And if you use something like DNS mask or many other solutions
You can have it so that DNS queries that are meant to be resolved on the VPN network go that way and everything else
Just uses your standard resolver that makes for a very slick setup where you don't have to worry that
Everything you do is going through the works network or just you know getting that delay some VPNs
Also, you know, you can you can specifically say just this IP block and only traffic to this very particular IP block goes over the VPN
Not true for all of them though. I think the first couple of times I ever really had a work VPN
It was one of those where there's a client piece
They'd have to install or one of these web things that have to go through like an ActiveX connection
It was the worst and it would just by default do all the traffic
It was just the worst it was always for doctors offices, too. If you are running a VPN
Locally just watch out for IP v6
Sometimes you'll get an IP v6 address, which is just totally fine on its own, but you'll have an IP v4 only tunnel configuration
So you'll think all your traffic is going over the tunnel
But in fact IP v6 is still going through your local gateway now a big plug again for the self-hosted podcast
this is table stakes for that show amongst many other things including running a bunch of services on your LAN and
I talk a little bit about more of my server setup in there. You mean just how many pies you have?
Yes, and I think you'd probably really enjoy it if any of this appeals to you
So check that out at self hosted dot show, but let's let's do a little feedback. You ready Wes lay it on me
Michael writes in he says I wanted to thank you guys
I've been primarily listening to other Linux broadcasts in the end in their telegram groups, but I switched to your telegram group in the last two days
Controversy, what could it be? And this is why we're reading this because
Since our last episode there has been quite a bit of feedback around our discussion regarding Microsoft
and
Michael writes here
It seems that the closer we get to WSL to being released and the more software Microsoft open sources
The more hatred against Microsoft. I saw in other Linux groups
Ironically, it made me feel alienated and pushed me towards trying out Windows 10
You know, I can kind of understand that when like when group thing starts to set in I sometimes have like this rebellious
Nerve that just gets pushed on and then I go I rebel against it
but this is something that I said what happened in the post show last week and
It definitely bared out like I got a lot of people who are not happy about the way we talk about Microsoft
There has even been
clickbait blog
Articles that have been written attacking JB and me for talking about it. I mean, it's pretty intense and
You'll hear so much rhetoric about how this is the worst thing Microsoft has ever done
This is embrace extend and extinguish taken to the next level and it seems to be yet another divide
that is developing in our community and that makes me very sad because I
Think every situation with every company
should be taken on its own individual merits and
Any commercial company from Red Hat to Microsoft that is participating in this space has to be monitored with a certain level of suspicion
Although maybe that's a little extreme, you know
But you have to be aware and paying attention a recognition that they've got their own motives and their you know their own drives
And that's okay
That's part of the design of the whole open source ecosystem is that we all have those but we can agree that some things are better
Done shared and this truth is applicable to any company whose goal is to earn revenue
We kind of individually apply it in the Linux community
There's some groups and companies that get a blank check and really nothing is questioned. And then there's some who
Probably because of past actions. There's just a relentless suspicion now
That of course eventually had to result in
unfortunately division I'm trying to consider how we can
accurately and
level-headedly
cover this stuff without
Exaggerating that situation and causing more division and that's something I've been chewing on that I don't have a
Great answer for Michael continues. He says I've been using Linux since 1997
But when a community becomes all about hatred of something rather than the love of Linux then you push people away even your own community
I'm so glad that you guys have managed to create a healthy community that does not fall into that trap
I mean, I think we're struggling with it too. I wouldn't give us too much credit. We're struggling with it
Yeah, absolutely, and I don't know quite what the right answer is here
some of it
Feels like reasonable suspicion and some of it feels silly
The one that feels sort of silly to me is the embrace and extend an extinguished discussion that has cropped up around
Maui and
Around DirectX being available on the Windows subsystem for Linux. I think the premise is flawed
There's no embrace an extending of something that's never been a success
The Linux desktop is not a success that threatens Microsoft. In fact, it's entirely possible that
The quote-unquote vast success of the Linux desktop is barely even represented on any Microsoft
Market share chart now the server sure mobile. Absolutely
IOT yeah a desktop. I think people need a bit of a reality check
Microsoft is not embracing and extending the Linux desktop with adding DirectX api's to WSL to only on Windows
The entire premise is silly
But yet that doesn't prevent YouTube videos and blogs and people going on Twitter
Going on and on about how this is obviously Microsoft trying to extinguish Linux
It's a silly premise to begin with there is no threat from the Linux desktop. I'm sorry. I love it, too
But it is probably not even statistically measurable by Microsoft on the Windows market share bottom line. Let's be honest
The Mac it's good. Yeah, it gets a few percent
Chromebooks. Yeah, that sucks
Not Linux desktop. We're too busy fighting amongst each other
and they were the last thing they're worried about and WSL is absolutely more about taking on the Mac as a
Development platform than it is about Linux desktop, but people are so trapped in this bubble. They can't see it
They don't see the bigger picture. It's not some grand conspiracy to keep the Linux desktop down. It was never up
I'm sorry. I love it, too
But it never got up and it's going to be fine
This will just result in more Linux users and it's not going to stop the plasma or gnome shell developers
Certainly not and I mean if anything it's aimed at the success of Linux on the server, right?
It's a recognition that people are using Linux not on the desktop
But to deploy their production workloads and that's the world Microsoft wants to cater to yeah, and this isn't a defense of Microsoft
I think this is a defense of
rational thinking
And taking each individual situation on its own merits and evaluating it
That's all I'm advocating for
And I I just I plea
for this not to become a divisive issue in the community it would just
There's so many of them. It would just be so nice to have something that doesn't develop into this
We've got enough and a good time to practice acknowledging that
I mean Microsoft has is built up of a
Bunch of people and they've all got their own opinions about open source and there is there is a company line
But I think we've seen how much that has changed even with you know, their president admitting as much
So it's a flexible universe and they are a company
But it's they're made up of people who have different opinions about open source than maybe once they did. What are you?
Yeah, we don't know though, right that it's hard to evaluate how a company change
And over time. Yeah
That is part of it. Here's my pitch
Screw Microsoft. Who cares what Microsoft thinks or feels like?
I don't think that you have to be part of the consideration for the Linux community
It's probably good to do that. But roll with this for a second
Forget Microsoft forget what they're trying forget if they're open or forget any of it what the strategy is. Forget all of it
Here's the truth
They're going to be more people using Linux coming into our community
looking to connect with other individuals either for help for inspiration for guidance for mentorship and we should
Really try not to blow this we shouldn't let our prejudice and our feelings towards Microsoft, whatever they may be
We shouldn't take that out on these new users
We need to be welcoming to new people when they come into this community and show them that it's a collaborative space the true
True open source nature is here
Like you found something that is compelling that maybe draws you in that makes you want to go even further
And if we're just so close to blowing it
I think you've seen that with canonical support for Ubuntu on WSL right there. I mean they recognize it as a supported
Platform for their operating system to run on so we should do the same if people are coming in with you know
Questions about things we can't just disqualify them
Yes, there might be some caveats, but we shouldn't just outright disqualify them just because they happen to be running Linux on Windows
All right. Well, I never meant to talk about this this long. Michael just got us talking
That's what one of the great things about feedback. So my final thoughts on this are and I apologize this turned into such a soapbox. I
Would ask you to see if this all comes from a place of insecurity about Linux's future on the desktop
About the desktop in general about what it has still yet to get to
And if maybe that isn't influencing your reaction
wrapped up in moral superiority or technical advocacy
But the reality the nut of it
Might be insecurity. I know that's a harsh thing to say and a harsh thing to consider about yourself
But I mean people come after me they write articles about me about this stuff
And I think it has to come from someplace deep that is afraid of where this is going and I think that insecurity
while understandable
is misplaced
Windows is still Windows and you can try to run it if you're if you've been a longtime Linux or Mac user
You're still not going to find Windows satisfying. It's not going to destroy the Linux desktop. And I
I would encourage us to maybe consider what's driving this defensiveness
And try not to think about it from what's best for Microsoft or best for Linux or what canonical is doing and try to think
About it from here come the users. How can we make them successful? How can we welcome them to the community?
Yeah, really our goal is to convince them that Linux is a useful technology. They should be excited about learning
Yeah, and there's a community behind it that makes it kind of fun and and maybe something that the windows and commercial platforms
Don't really have in fact, I'd say they're kind of envious of
Come on over the water's fine
Most of the time in the right areas, maybe don't use butter fs
It's too soon less
It's too soon
All right. Well, that is it for this week's episode of the unplug program
We'd love to have you live next week because probably the week after that I'm going to be on the road
So if you want to make it to a live show, it's going to be one of your last chances Tuesday
At noon pacific jupyterbroadcasting.com
Slash calendar to get that converted in your time. Don't forget about the love plug on sunday coming up
We'd love to have you there and links to everything we talked about at linuxunplug.com
Slash 355 the show is at linuxunplugged on twitter at jupyter signal for the network. We'll see you back here next tuesday
So
No computer kid just no live shows while i'm driving to and from texas
No, you we're gonna miss it twice. You said we would never miss anymore. Oh, don't worry
It'll be like we were never gone for the download audience. I'm not the download audience. Well, you will be
